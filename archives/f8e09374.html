<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Vue | awzz博客</title><meta name="author" content="awzz-coder"><meta name="copyright" content="awzz-coder"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue1.邂逅Vue1、Vue在前端的重要性Vue 是一套用于构建用户界面的渐进式 JavaScript 框架 它基于标准 HTML、CSS和JavaScript构建，并提供了一套声明式的、组件化的编程模型 帮助你高效地开发用户界面，无论任务是简单还是复杂 什么是渐进式框架？ 表示我们可以在项目中一点点来引入和使用Vue，而不一定需要全部使用Vue来开发整个项目 目前前端最流行的是三大框架：Vue">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue">
<meta property="og:url" content="https://awzz-coder.github.io/archives/f8e09374.html">
<meta property="og:site_name" content="awzz博客">
<meta property="og:description" content="Vue1.邂逅Vue1、Vue在前端的重要性Vue 是一套用于构建用户界面的渐进式 JavaScript 框架 它基于标准 HTML、CSS和JavaScript构建，并提供了一套声明式的、组件化的编程模型 帮助你高效地开发用户界面，无论任务是简单还是复杂 什么是渐进式框架？ 表示我们可以在项目中一点点来引入和使用Vue，而不一定需要全部使用Vue来开发整个项目 目前前端最流行的是三大框架：Vue">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg">
<meta property="article:published_time" content="2022-12-09T16:00:00.000Z">
<meta property="article:modified_time" content="2023-08-13T14:48:49.470Z">
<meta property="article:author" content="awzz-coder">
<meta property="article:tag" content="IT前端">
<meta property="article:tag" content="Vue">
<meta property="article:tag" content="前端框架">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg"><link rel="shortcut icon" href="/img/magic.svg"><link rel="canonical" href="https://awzz-coder.github.io/archives/f8e09374.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><meta name="baidu-site-verification" content="codeva-1kLiQ63o8L"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":3000,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":100},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-13 22:48:49'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-graduation-cap"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-people-robbery"></i><span> 教程</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-comments-o"></i><span> 简介</span></a></li><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-voicemail"></i><span> 基础</span></a></li><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-scale-unbalanced"></i><span> 进阶</span></a></li><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-stethoscope"></i><span> 总结</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heart"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-heart"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/cartoon/"><i class="fa-fw fas fa-heart"></i><span> 漫画</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-heart"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-image"></i><span> 壁纸</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-toolbox"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/seek/"><i class="fa-fw fas fa-circle-nodes"></i><span> 查询类</span></a></li><li><a class="site-page child" href="/online/"><i class="fa-fw fas fa-heart"></i><span> 在线版</span></a></li><li><a class="site-page child" href="/tools/"><i class="fa-fw fas fa-heart"></i><span> 工具类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-circle-info"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="awzz博客"><span class="site-name">awzz博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-graduation-cap"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-people-robbery"></i><span> 教程</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-comments-o"></i><span> 简介</span></a></li><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-voicemail"></i><span> 基础</span></a></li><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-scale-unbalanced"></i><span> 进阶</span></a></li><li><a class="site-page child" href="/teach/"><i class="fa-fw fas fa-stethoscope"></i><span> 总结</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heart"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-heart"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/cartoon/"><i class="fa-fw fas fa-heart"></i><span> 漫画</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-heart"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-image"></i><span> 壁纸</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-toolbox"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/seek/"><i class="fa-fw fas fa-circle-nodes"></i><span> 查询类</span></a></li><li><a class="site-page child" href="/online/"><i class="fa-fw fas fa-heart"></i><span> 在线版</span></a></li><li><a class="site-page child" href="/tools/"><i class="fa-fw fas fa-heart"></i><span> 工具类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-circle-info"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vue</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-09T16:00:00.000Z" title="发表于 2022-12-10 00:00:00">2022-12-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-13T14:48:49.470Z" title="更新于 2023-08-13 22:48:49">2023-08-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Vue/">Vue</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">45.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>176分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><h2 id="1-邂逅Vue"><a href="#1-邂逅Vue" class="headerlink" title="1.邂逅Vue"></a>1.邂逅Vue</h2><h3 id="1、Vue在前端的重要性"><a href="#1、Vue在前端的重要性" class="headerlink" title="1、Vue在前端的重要性"></a>1、Vue在前端的重要性</h3><p>Vue 是一套用于构建用户界面的渐进式 JavaScript 框架</p>
<p>它基于标准 HTML、CSS和JavaScript构建，并提供了一套声明式的、组件化的编程模型</p>
<p>帮助你高效地开发用户界面，无论任务是简单还是复杂</p>
<p>什么是渐进式框架？</p>
<p>表示我们可以在项目中一点点来引入和使用Vue，而不一定需要全部使用Vue来开发整个项目</p>
<p>目前前端最流行的是三大框架：Vue、React、Angular</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230409072236471.png" alt="image-20230409072236471"></p>
<p>国外，优先推荐React、其次是Vue和Angular</p>
<p>国内，优先推荐且必须学习Vue，其次是React，其次是Angular</p>
<h3 id="2、Vue2还是Vue3"><a href="#2、Vue2还是Vue3" class="headerlink" title="2、Vue2还是Vue3"></a>2、Vue2还是Vue3</h3><p>Vue3：更好的性能；更小的打包体积；更好的TypeScript集成；更优秀的 API 设计</p>
<p>Vue3 目前已经是稳定的版本，并且 Vue3 在2022年2月7日已经成为默认安装版本</p>
<p>目前社区也经过一定时间的沉淀，更加的完善了，包括 AntDesignVue、Element-Plus 都提供了对 Vue3 的支持，所以很多公司目前新的项目都已经在使用 Vue3 来进行开发了</p>
<p>并且在面试的时候，几乎都会问到各种各样 Vue3 相关的问题</p>
<p>Vue 的本质，就是一个 JavaScript 的库</p>
<p>使用 Vue 的方式</p>
<ul>
<li>在页面通过CDN的方式来引入<ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://unpkg.com/vue@next">https://unpkg.com/vue@next</a></li>
</ul>
</li>
<li>下载 Vue 的 JS 文件，并且自己手动引入</li>
<li>通过 npm 包管理工具安装使用它</li>
<li>直接通过 Vue CIL 创建项目，并且使用它</li>
</ul>
<h3 id="3、Vue-初体验"><a href="#3、Vue-初体验" class="headerlink" title="3、Vue 初体验"></a>3、Vue 初体验</h3><p>Vue 页面</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lib/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 1.创建app </span></span><br><span class="line">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`&lt;h1&gt;Hello Vue&lt;/h2&gt;`</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.挂载app</span></span><br><span class="line">  app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>案例1.动态message</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">template</span>: <span class="string">`&lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;`</span></span><br></pre></td></tr></table></figure>

<p>案例2. 列表数据</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">       &lt;h2&gt;电影列表&lt;/h2&gt;</span></span><br><span class="line"><span class="string">       &lt;ul&gt;</span></span><br><span class="line"><span class="string">         &lt;li v-for=&quot;item in movies&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt; </span></span><br><span class="line"><span class="string">       &lt;/ul&gt;</span></span><br><span class="line"><span class="string">     `</span>,</span><br><span class="line">     <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="attr">message</span>: <span class="string">&quot;你好啊，ikun&quot;</span>,</span><br><span class="line">         <span class="attr">movies</span>: [ <span class="string">&quot;大话西游&quot;</span>, <span class="string">&quot;恶灵&quot;</span>, <span class="string">&quot;少年派&quot;</span>, <span class="string">&quot;盗梦空间&quot;</span>, <span class="string">&quot;五十度灰&quot;</span> ]</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>案例3.计数器</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 暂时了解：this通过bild绑定某个对象 可以改变data的return&#123;&#125; 中的对象</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">counter</span>++</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">counter</span>--</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="4、命令式与声明式编程"><a href="#4、命令式与声明式编程" class="headerlink" title="4、命令式与声明式编程"></a>4、命令式与声明式编程</h3><p>原生开发和Vue开发的模式和特点是完全不同的，涉及到两种不同的编程范式</p>
<ul>
<li><p>命令式编程和声明式编程</p>
</li>
<li><p>命令式编程关注的是 “how to do”自己完成整个how的过程</p>
</li>
<li><p>声明式编程关注的是 “what to do”，由框架(机器)完成 “how”的过程</p>
</li>
</ul>
<p>在原生的实现过程中</p>
<ul>
<li><p>每完成一个操作，都需要通过JavaScript编写一条代码，来给浏览器一个指令</p>
</li>
<li><p>这样的编写代码的过程，我们称之为命令式编程</p>
</li>
<li><p>在早期的原生JavaScript和jQuery开发的过程中，都是通过这种命令式的方式编写代码</p>
</li>
</ul>
<p>在Vue的实现过程中的操作</p>
<ul>
<li><p>在createApp传入的对象中声明需要的内容，模板template、数据data、方法methods</p>
</li>
<li><p>这样的编写代码的过程，我们称之为是声明式编程</p>
</li>
<li><p>目前Vue、React、Angular、小程序的编程模式，我们称之为声明式编程</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/%E5%91%BD%E4%BB%A4%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%92%8C%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%96%E7%A8%8B%E7%9A%84%E6%80%9D%E6%83%B3%E5%8C%BA%E5%88%AB.png" alt="命令式编程和声明式编程的思想区别"></p>
<h3 id="5、MVC和MVVM的模型区别"><a href="#5、MVC和MVVM的模型区别" class="headerlink" title="5、MVC和MVVM的模型区别"></a>5、MVC和MVVM的模型区别</h3><p>MVC和MVVM都是一种软件的体系结构</p>
<ul>
<li><p>MVC是Model – View –Controller的简称，是在前期被使用非常框架的架构模式，比如iOS、前端；</p>
</li>
<li><p>MVVM是Model-View-ViewModel的简称，是目前非常流行的架构模式</p>
</li>
</ul>
<p>通常情况下，我们也经常称Vue是一个MVVM的框架</p>
<ul>
<li>Vue官方其实有说明，Vue虽然并没有完全遵守MVVM的模型，但整个设计受到它的启发</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230409203218899.png" alt="image-20230409203218899"></p>
<h3 id="6、常用-options-api"><a href="#6、常用-options-api" class="headerlink" title="6、常用 options api"></a>6、常用 options api</h3><h4 id="1-data"><a href="#1-data" class="headerlink" title="1.data"></a>1.data</h4><p>data属性是传入一个函数，并且该函数需要返回一个对象</p>
<ul>
<li><p>在 Vue2.x 的时候，也可以传入一个对象（虽然官方推荐是一个函数）</p>
</li>
<li><p>在 Vue3.x 的时候，必须传入一个函数，否则就会直接在浏览器中报错</p>
</li>
</ul>
<p>data中返回的对象会被Vue的响应式系统劫持，之后对该对象的修改或者访问都会在劫持中被处理</p>
<ul>
<li><p>在 template 或者 app 中通过 <code>&#123;&#123;counter&#125;&#125;</code> 访问 ounter，可以从对象中获取到数据</p>
</li>
<li><p>修改counter的值时，app中的 <code>&#123;&#123;counter&#125;&#125;</code>也会发生改变</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/data%E6%95%B0%E6%8D%AE%E5%A6%82%E4%BD%95%E8%A2%AB%E5%B1%95%E7%A4%BA%E7%9A%84.png" alt="data数据如何被展示的"></p>
<h4 id="2-methods"><a href="#2-methods" class="headerlink" title="2.methods"></a>2.methods</h4><p>methods 属性是一个对象，通常我们会在这个对象中定义很多的方法：</p>
<ul>
<li><p>这些方法可以被绑定到模板中</p>
</li>
<li><p>在该方法中，我们可以使用 this 关键字来直接访问到data中返回的对象的属性</p>
</li>
</ul>
<p>问题一：为什么不能使用箭头函数（官方文档有给出解释）</p>
<ul>
<li>我们在 methods 中要使用 data 返回对象中的数据，那么这个 this 是必须有值的，并且应该可以通过 this 获取到data返回对象中的数据，不可以是 window，因为 window 中我们无法获取到 data 返回对象中的数据，但是如果我们使用箭头函数，那么这个 this 就会是window了</li>
</ul>
<p>问题二：不使用箭头函数的情况下，this 到底指向的是什么？（可以作为一道面试题）</p>
<p>proxy，事实上Vue的源码当中就是对 methods 中的所有函数进行了遍历，并且通过bind绑定了 this</p>
<h3 id="7、vscode-代码片段"><a href="#7、vscode-代码片段" class="headerlink" title="7、vscode 代码片段"></a>7、vscode 代码片段</h3><p>便于快速生成Vue的基本代码结构</p>
<p>具体的步骤如下：</p>
<ul>
<li><p>第一步，复制自己需要生成代码片段的代码</p>
</li>
<li><p>第二步，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://snippet-generator.app/%E5%9C%A8%E8%AF%A5%E7%BD%91%E7%AB%99%E4%B8%AD%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5">https://snippet-generator.app/在该网站中生成代码片段</a></p>
</li>
<li><p>第三步，在VSCode中配置代码片段</p>
</li>
</ul>
<h2 id="2-模板语法"><a href="#2-模板语法" class="headerlink" title="2.模板语法"></a>2.模板语法</h2><h3 id="1、Mustache-语法"><a href="#1、Mustache-语法" class="headerlink" title="1、Mustache 语法"></a>1、Mustache 语法</h3><p>React的开发模式：</p>
<ul>
<li><p>React使用的jsx，所以对应的代码都是编写的类似于js的一种语法</p>
</li>
<li><p>之后通过Babel将jsx编译成 React.createElement 函数调用</p>
</li>
</ul>
<p>Vue也支持jsx的开发模式</p>
<ul>
<li><p>但大多数情况下，使用基于HTML的模板语法</p>
</li>
<li><p>在模板中，允许开发者以声明式的方式将DOM和底层组件实例的数据绑定在一起</p>
</li>
<li><p>在底层的实现中，Vue将模板编译成虚拟DOM渲染函数</p>
</li>
</ul>
<p>把数据显示到模板（template）中，使用最多的语法是“Mustache”语法 (双大括号)的文本插值</p>
<ul>
<li><p>并且data返回的对象是有添加到Vue的响应式系统中</p>
</li>
<li><p>当data中的数据发生改变时，对应的内容也会发生更新</p>
</li>
<li><p>Mustache中不仅仅可以是data中的属性，也可以是一个JavaScript的表达式</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  &lt;!-- <span class="number">1.</span>基本使用 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  &lt;!-- <span class="number">2.</span>表达式 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>双倍计数: &#123;&#123; counter * 2 &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>展示信息: &#123;&#123; infos.split(&quot; &quot;).join(&quot;-&quot;) &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  &lt;!-- <span class="number">3.</span>三元表达式 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; age &gt;= 18 ? &quot;成年人&quot; : &quot;未成年人&quot; &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  &lt;!-- <span class="number">4.</span>调用methods中函数 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; formateDate(123) &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  &lt;!-- <span class="number">5.</span>注意：这里不能定义语句 --&gt;</span><br><span class="line">  &lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; const name = &quot;why&quot;; name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span> --&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>若是在createApp对象中使用template并写入东西，则会覆盖挂载的app中的原来的html结构，所以可以不写template，而挂载app中的div的html结构会当做template模板，便于书写html结构</p>
<h3 id="2、常见基本指令"><a href="#2、常见基本指令" class="headerlink" title="2、常见基本指令"></a>2、常见基本指令</h3><h4 id="1-v-once"><a href="#1-v-once" class="headerlink" title="1.v-once"></a>1.v-once</h4><p>用于指定元素或者组件只渲染一次：</p>
<ul>
<li><p>当数据发生变化时，元素或者组件以及其所有的子元素将视为静态内容并且跳过</p>
</li>
<li><p>该指令可以用于性能优化</p>
</li>
<li><p>如果是子节点，也是只会渲染一次</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">	&lt;!-- 指令：v-once 自身以及子元素只渲染一次 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-once</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">      &#123;&#123;message&#125;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>数字: &#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">模板中使用&#123;&#123;&#125;&#125;进行渲染一次之后，不能修改所渲染的数据（数据能被修改但是渲染的数据仍是第一次渲染的数据）</span><br></pre></td></tr></table></figure>



<h4 id="2-v-text"><a href="#2-v-text" class="headerlink" title="2.v-text"></a>2.v-text</h4><p>用于更新元素的 textContent</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">如果&#123;&#123;message不含别的解释内容，则两者等价，不然v-text会替换标签中原有的内容&#125;&#125;	</span><br><span class="line">   &lt;!-- 将data对应的文本设置到元素中  message会替换aaa--&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="3-v-html"><a href="#3-v-html" class="headerlink" title="3.v-html"></a>3.v-html</h4><p>默认情况下，如果我们展示的内容本身是html的，那么vue并不会对其进行特殊的解析</p>
<ul>
<li>如果我们希望这个内容被Vue可以解析出来，那么可以使用 v-html 来展示</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123; content &#125;&#125;&lt;/h2&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-html</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="attr">content</span>: <span class="string">`&lt;span style=&quot;color: red; font-size: 30px;&quot;&gt;哈哈哈&lt;/span&gt;`</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure>



<h4 id="4-v-pre"><a href="#4-v-pre" class="headerlink" title="4.v-pre"></a>4.v-pre</h4><p>v-pre用于跳过元素和它的子元素的编译过程，显示原始的Mustache标签：</p>
<ul>
<li>跳过不需要编译的节点，加快编译的速度</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div v-pre&gt;</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>当前计数: &#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pre</span>&gt;</span>&#123;&#123;&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">   &lt;/div&gt;</span><br><span class="line"><span class="comment">// div中设置了 v-pre则子元素也不会进行编译</span></span><br></pre></td></tr></table></figure>



<h4 id="5-v-cloak"><a href="#5-v-cloak" class="headerlink" title="5.v-cloak"></a>5.v-cloak</h4><p>这个指令保持在元素上直到关联组件实例结束编译</p>
<ul>
<li>和 CSS 规则与 [v-cloak] { display: none } 一起用时，这个指令可以隐藏未编译的 Mustache 标签直到组件实例准备完毕</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  [v-cloak] &#123;</span><br><span class="line">    <span class="attr">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;Hello Vue&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br></pre></td></tr></table></figure>



<h4 id="6-v-memo"><a href="#6-v-memo" class="headerlink" title="6.v-memo"></a>6.v-memo</h4><p>缓存一个模板的子树，在元素和组件上都可以使用，为了实现缓存，该指令需要传入一个固定长度的依赖值数组进行比较。如果数组里的每个值都与最后一次的渲染相同，那么整个子树的更新将被跳过</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">   &lt;!-- name 和 age 都保持不变才跳过对数据的修改操作 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-memo</span>=<span class="string">&quot;[name, age]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">h2</span>&gt;</span>name: &#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">h2</span>&gt;</span>age: &#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">h2</span>&gt;</span>height: &#123;&#123; height &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMessage&quot;</span>&gt;</span>改变信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span><br><span class="line">     <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="attr">name</span>: <span class="string">&quot;sws&quot;</span>,</span><br><span class="line">         <span class="attr">age</span>: <span class="number">23</span>,</span><br><span class="line">         <span class="attr">height</span>: <span class="number">1.84</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">methods</span>: &#123;</span><br><span class="line">       <span class="title function_">changeMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="comment">// this.name = &quot;swd&quot;,</span></span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">21</span>,</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">height</span> = <span class="number">1.82</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>



<h3 id="3、v-bind-绑定属性"><a href="#3、v-bind-绑定属性" class="headerlink" title="3、v-bind 绑定属性"></a>3、v-bind 绑定属性</h3><p>动态的绑定一个或多个 attribute，也可以是组件的 prop（向另一个组件传递props值）</p>
<p>当用于绑定 class 或 style attribute， 支持额外的值类型如数组或对象</p>
<h4 id="1-绑定基本属性"><a href="#1-绑定基本属性" class="headerlink" title="1.绑定基本属性"></a>1.绑定基本属性</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span>绑定img的src --&gt;</span><br><span class="line">   &lt;!-- 语法糖: v-bind -&gt; : --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;showImgUrl&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="comment">&lt;!-- 2.绑定a的超链接 --&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;href&quot;</span>&gt;</span>百度一下<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>案例：点击切换图片</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;changeImg&quot;</span>&gt;切换图片&lt;/button&gt;</span><br><span class="line">   <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">           <span class="attr">imgUrl1</span>: <span class="string">&quot;xxx1&quot;</span>,</span><br><span class="line">           <span class="attr">imgUrl2</span>: <span class="string">&quot;xxx2&quot;</span>,</span><br><span class="line">           <span class="attr">showImgUrl</span>: <span class="string">&quot;xxx1&quot;</span>,</span><br><span class="line">           <span class="attr">href</span>: <span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">methods</span>: &#123;</span><br><span class="line">       <span class="title function_">changeImg</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">showImgUrl</span> = <span class="variable language_">this</span>.<span class="property">showImgUrl</span> === <span class="variable language_">this</span>.<span class="property">imgUrl1</span> ? <span class="variable language_">this</span>.<span class="property">imgUrl2</span> : <span class="variable language_">this</span>.<span class="property">imgUrl1</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-绑定class"><a href="#2-绑定class" class="headerlink" title="2.绑定class"></a>2.绑定class</h4><p>开发中，有时候我们的元素class也是动态的，比如：</p>
<ul>
<li><p>当数据为某个状态时，字体显示红色</p>
</li>
<li><p>当数据另一个状态时，字体显示黑色</p>
</li>
</ul>
<p>绑定class有两种方式：</p>
<ul>
<li><p>对象语法：可以传给 :class (v-bind:class 的简写) 一个对象，以动态地切换 class</p>
</li>
<li><p>数组语法：可以把一个数组传给 :class，以应用一个 class 列表</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">  &lt;style&gt;</span><br><span class="line">    .<span class="property">active</span> &#123;</span><br><span class="line">      <span class="attr">color</span>: red;</span><br><span class="line">   	&#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 1.基本绑定class --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&quot;classes&quot;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 2.动态class可以写对象语法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot; isActive ? &#x27;active&#x27; : &#x27;&#x27; &quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>我是按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 2.1对象语法的基本使用 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active: isActive&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>我是&#123;&#123; message &#125;&#125;按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 2.2对象语法的多个键值对 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active: isActive, why: true, kobe: false&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>我是&#123;&#123; message &#125;&#125;按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 2.3动态绑定的class可以个普通的class并列使用 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;abc bcd&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active: isActive, why: true, kobe: false&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>我是&#123;&#123; message &#125;&#125;按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 2.4动态绑定的class可以个普通的class并列使用 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;abc bcd&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;getDynamicClasses()&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>我是&#123;&#123; message &#125;&#125;按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 3.动态class可以写数组语法 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&#x27;[&quot;abc&quot;, &quot;sss&quot;]&#x27;</span>&gt;</span>Hello Array<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&#x27;[&quot;abc&quot;, className]&#x27;</span>&gt;</span>Hello Array<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&#x27;[&quot;abc&quot;, className, isActive? &quot;active&quot; : &quot;&quot;]&#x27;</span>&gt;</span>Hello Array<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&#x27;[&quot;abc&quot;, className, &#123; active: isActive &#125;]&#x27;</span>&gt;</span>Hello Array<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lib/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">message</span>: <span class="string">&quot;原色&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">classes</span>: <span class="string">&quot;ads scw fvs&quot;</span>, </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">isActive</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">className</span>: <span class="string">&quot;sdw&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">btnClick</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">isActive</span> = !<span class="variable language_">this</span>.<span class="property">isActive</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">message</span> = <span class="variable language_">this</span>.<span class="property">message</span> === <span class="string">&quot;原色&quot;</span> ? <span class="string">&quot;红色&quot;</span> : <span class="string">&quot;原色&quot;</span> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">getDynamicClasses</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> &#123; <span class="attr">active</span>: <span class="variable language_">this</span>.<span class="property">isActive</span>, <span class="attr">why</span>: <span class="literal">true</span>, <span class="attr">kobe</span>: <span class="literal">false</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="3-绑定style"><a href="#3-绑定style" class="headerlink" title="3.绑定style"></a>3.绑定style</h4><p>可以利用v-bind:style来绑定一些CSS内联样式：</p>
<ul>
<li><p>这是因为某些样式我们需要根据数据动态来决定</p>
</li>
<li><p>比如某段文字的颜色，大小等等</p>
</li>
</ul>
<p>CSS property 名可以用驼峰式或短横线（使用括号）分隔 ，记得用引号括起来来命名</p>
<p>绑定class有两种方式：</p>
<ul>
<li><p>对象语法</p>
</li>
<li><p>数组语法：:style 的数组语法可以将多个样式对象应用到同一个元素上</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   &lt;!-- <span class="number">1.</span>普通的style写法 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;color: red; font-size: 30px;&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">2.</span>style中的某些值，来自data中 --&gt;</span><br><span class="line">   &lt;!-- <span class="number">2.1</span>动态绑定style 在后面跟上 对象类型 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; color: fontColor, fontSize: fontSize + &#x27;px&#x27; &#125;&quot;</span>&gt;</span>嘻嘻嘻<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">2.2</span> 动态的绑定属性，这个属性是一个对象 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;objStyle&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">3.</span>style的数组语法 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;[objStyle, &#123;backgroundColor: &#x27;purple&#x27;&#125;]&quot;</span>&gt;</span>嘿嘿嘿<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="attr">fontColor</span>: <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">         <span class="attr">fontSize</span>: <span class="number">30</span>,</span><br><span class="line">         <span class="attr">objStyle</span>: &#123;</span><br><span class="line">           <span class="attr">fontSize</span>: <span class="string">&#x27;50px&#x27;</span>,</span><br><span class="line">           <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-动态绑定属性"><a href="#4-动态绑定属性" class="headerlink" title="4.动态绑定属性"></a>4.动态绑定属性</h4><p>某些情况下，我们属性的名称可能也不是固定的：</p>
<ul>
<li><p>如果属性名称不是固定的，我们可以使用 :[属性名]&#x3D;“值” 的格式来定义</p>
</li>
<li><p>这种绑定的方式，我们称之为动态绑定属性</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:</span>[<span class="attr">name</span>]=<span class="string">&quot;&#x27;aaa&#x27;&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;Hello Vue&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;class&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h4 id="5-绑定对象"><a href="#5-绑定对象" class="headerlink" title="5.绑定对象"></a>5.绑定对象</h4><p>如果希望将一个对象的所有属性绑定到元素上的所有属性：</p>
<ul>
<li>可以直接使用 v-bind 绑定一个 对象</li>
</ul>
<p>案例：infos对象会被拆解成div的各个属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>	&lt;h2 :name=<span class="string">&quot;name&quot;</span> :age=<span class="string">&quot;age&quot;</span> :height=<span class="string">&quot;height&quot;</span>&gt;<span class="title class_">Hello</span> <span class="title class_">World</span>&lt;/h2&gt;</span><br><span class="line">    &lt;!-- v-bind绑定对象  给组件传递参数 --&gt;</span><br><span class="line"><span class="number">2</span>   &lt;h2 v-bind=<span class="string">&quot;props&quot;</span>&gt;<span class="title class_">Hello</span> <span class="title class_">Bind</span>&lt;/h2&gt;</span><br><span class="line">	<span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">props</span>: &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;why&quot;</span>,</span><br><span class="line">                <span class="attr">age</span>: <span class="number">23</span>,</span><br><span class="line">                <span class="attr">height</span>: <span class="number">1.44</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;why&quot;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">23</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">1.44</span></span><br><span class="line">        &#125;</span><br><span class="line">   	 &#125;    <span class="comment">// 1 2效果相同</span></span><br></pre></td></tr></table></figure>



<h3 id="4-、Vue-的事件绑定"><a href="#4-、Vue-的事件绑定" class="headerlink" title="4 、Vue 的事件绑定"></a>4 、Vue 的事件绑定</h3><p>为了与用户进行交互，必须监听用户发生的事件</p>
<p>v-on的使用：</p>
<ul>
<li><p>缩写（语法糖）：@</p>
</li>
<li><p>预期：Function | Inline Statement | Object</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span>基本的写法 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;divClick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">2.</span>语法糖写法 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;divClick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">3.</span>绑定的方法位置，也可以写成一个表达式（不常用,不推荐） --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;counter--&quot;</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">4.</span>绑定其他方法 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> @<span class="attr">mousemove</span>=<span class="string">&quot;divMousemove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">5.</span>绑定多个事件 分开传入或者传入对象 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;divClick&quot;</span> @<span class="attr">mousemove</span>=<span class="string">&quot;divMousemove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="comment">// v-on: == v-on 下方这儿:可以省略</span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> <span class="attr">v-on:</span>=<span class="string">&quot;&#123; click: divClick, mousemove: divMousemove &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> @=<span class="string">&quot;&#123; click: divClick, mousemove: divMousemove &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="title function_">divClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;divClick&quot;</span>)</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">counter</span>++</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="title function_">divMousemove</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;mousemove&quot;</span>)</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>参数：event</li>
<li>自定义参数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span>默认传递event对象 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn1Click&quot;</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">2.</span>只有自己的参数 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn2Click(&#x27;why&#x27;, age)&quot;</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">3.</span>明确的参数和event对象 --&gt;</span><br><span class="line">   &lt;!-- 在模板中想要明确的获取event对象：$event --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn3Click(&#x27;swd&#x27;, age, $event)&quot;</span>&gt;</span>按钮3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 1.默认参数：event对象</span></span><br><span class="line">       <span class="comment">// 总结：如果在绑定事件的时候，没有传递任何的参数，那么event对象会被默认传递进来</span></span><br><span class="line">       <span class="title function_">btn1Click</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;btnClick:&quot;</span>, event)</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="title function_">btn2Click</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;btn2Click&quot;</span>, name, age)</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="title function_">btn3Click</span>(<span class="params">name, age, event</span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;btn3Click&quot;</span>, name, age, event)</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>修饰符：</p>
<ul>
<li>.stop - 调用 event.stopPropagation()</li>
<li>.prevent - 调用 event.preventDefault()</li>
<li>.capture - 添加事件侦听器时使用 capture 模式</li>
<li>.self - 只当事件是从侦听器绑定的元素本身触发时才触发回调</li>
<li>.{keyAlias} - 仅当事件是从特定键触发时才触发回调</li>
<li>.once - 只触发一次回调</li>
<li>.left - 只当点击鼠标左键时触发</li>
<li>.right - 只当点击鼠标右键时触发</li>
<li>.middle - 只当点击鼠标中键时触发</li>
<li>.passive - { passive: true } 模式添加侦听器</li>
</ul>
</li>
<li><p>用法：绑定事件监听</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span> @click=<span class="string">&quot;divClick&quot;</span>&gt;</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">   &lt;/div&gt;</span><br></pre></td></tr></table></figure>



<h3 id="5、Vue-的条件渲染"><a href="#5、Vue-的条件渲染" class="headerlink" title="5、Vue 的条件渲染"></a>5、Vue 的条件渲染</h3><p>某些情况下需要根据当前的条件决定某些元素或组件是否渲染，这时就需要进行条件判断</p>
<p>v-if、v-else、v-else-if用于根据条件来渲染某一块的内容：</p>
<ul>
<li><p>这些内容只有在条件为true时，才会被渲染出来</p>
</li>
<li><p>这三个指令与JavaScript的条件语句if、else、else if类似</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;score &gt; 90&quot;</span>&gt;</span>优秀<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else-if</span>=<span class="string">&quot;score &gt; 80&quot;</span>&gt;</span>良好<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else-if</span>=<span class="string">&quot;score &gt;= 60&quot;</span>&gt;</span>及格<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else</span>&gt;</span>不及格<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="1-v-if的渲染原理"><a href="#1-v-if的渲染原理" class="headerlink" title="1.v-if的渲染原理"></a>1.v-if的渲染原理</h4><ul>
<li><p>v-if是惰性的</p>
</li>
<li><p>当条件为false时，其判断的内容完全不会被渲染或者会被销毁掉</p>
</li>
<li><p>当条件为true时，才会真正渲染条件块中的内容</p>
</li>
</ul>
<p>即当v-if所判断的条件为false时，页面查看代码中没有其创建的元素</p>
<h4 id="2-template-元素"><a href="#2-template-元素" class="headerlink" title="2.template 元素"></a>2.template 元素</h4><p>因为v-if是一个指令，所以必须将其添加到一个元素上：</p>
<ul>
<li><p>但是如果我们希望切换的是多个元素</p>
</li>
<li><p>此时我们渲染div，但是我们并不希望div这种元素被渲染</p>
</li>
<li><p>这个时候，我们可以选择使用template</p>
</li>
</ul>
<p>template元素可以当做不可见的包裹元素，并且在v-if上使用，但是最终template不会被渲染出来：</p>
<ul>
<li>有点类似于小程序中的block</li>
</ul>
<h4 id="3-v-show和v-if的区别"><a href="#3-v-show和v-if的区别" class="headerlink" title="3.v-show和v-if的区别"></a>3.v-show和v-if的区别</h4><p>在用法上的区别：</p>
<ul>
<li><p>v-show是不支持template</p>
</li>
<li><p>v-show不可以和v-else一起使用</p>
</li>
</ul>
<p>本质的区别：</p>
<ul>
<li><p>v-show元素无论是否需要显示到浏览器上，它的DOM实际都是有存在的，只是通过CSS的display属性来进行切换</p>
</li>
<li><p>v-if当条件为false时，其对应的元素压根不会被渲染到DOM中</p>
</li>
</ul>
<p>开发中选择</p>
<ul>
<li><p>如果我们的元素需要在显示和隐藏之间频繁的切换，那么使用v-show</p>
</li>
<li><p>如果不会频繁的发生切换，那么使用v-if</p>
</li>
</ul>
<h3 id="6、Vue-的列表渲染"><a href="#6、Vue-的列表渲染" class="headerlink" title="6、Vue 的列表渲染"></a>6、Vue 的列表渲染</h3><h4 id="1-渲染（遍历）方式"><a href="#1-渲染（遍历）方式" class="headerlink" title="1.渲染（遍历）方式"></a>1.渲染（遍历）方式</h4><p>开发中，我们往往会从服务器拿到一组数据，并且需要对其进行渲染</p>
<ul>
<li><p>这时可以使用v-for来完成</p>
</li>
<li><p>v-for类似于JavaScript的for循环，可以用于遍历一组数据</p>
</li>
</ul>
<p>v-for的基本格式是 “item in 数组”：</p>
<ul>
<li><p>数组通常是来自data或者prop，也可以是其他方式</p>
</li>
<li><p>item是我们给每项元素起的一个别名，这个别名可以自定来定义</p>
</li>
</ul>
<p>我们知道，在遍历一个数组的时候会经常需要拿到数组的索引：</p>
<ul>
<li><p>如果我们需要索引，可以使用格式： “(item, index) in 数组”</p>
</li>
<li><p>注意上面的顺序：数组元素项item是在前面的，索引项index是在后面的</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span>电影列表进行渲染 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>电影列表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;movie in movies&quot;</span>&gt;</span>&#123;&#123;movie&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">2.</span>电影列表同时索引(数组) --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     // 支持 of  </span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(movie, index) in movies&quot;</span>&gt;</span>&#123;&#123;index + 1&#125;&#125; - &#123;&#123;movie&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">3.</span>遍历数组复杂数据 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>商品列表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in products&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>商品:&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">span</span>&gt;</span>价格:&#123;&#123;item.price&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">p</span>&gt;</span>秒杀:&#123;&#123;item.desc&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>	</span><br></pre></td></tr></table></figure>

<p>v-for也支持遍历对象，并且支持有一二三个参数：</p>
<ul>
<li><p>一个参数： “value in object”</p>
</li>
<li><p>二个参数： “(value, key) in object”</p>
</li>
<li><p>三个参数： “(value, key, index) in object”</p>
</li>
</ul>
<p>v-for同时也支持数字的遍历：</p>
<ul>
<li>每一个item都是一个数字</li>
</ul>
<p>v-for也可以遍历其他可迭代对象(Iterable)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span>遍历对象 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, key, index) in info&quot;</span>&gt;</span>&#123;&#123;value&#125;&#125;-&#123;&#123;key&#125;&#125;-&#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!--<span class="number">2.</span>遍历字符串 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in message&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="number">3.</span>遍历数字 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in 10&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="2-template元素"><a href="#2-template元素" class="headerlink" title="2.template元素"></a>2.template元素</h4><p>类似于v-if，你可以使用 template 元素来循环渲染一段包含多个元素的内容：</p>
<ul>
<li>使用template来对多个元素进行包裹，而不是使用div来完成；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 如果div没有实际的意义，可以使用template替换 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, key, index) in infos&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123;key&#125;&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="3-数组更新检测"><a href="#3-数组更新检测" class="headerlink" title="3.数组更新检测"></a>3.数组更新检测</h4><p>Vue 将被侦听的数组的变更方法进行了包裹，所以它们也将会触发视图更新</p>
<p>这些被包裹过的方法包括：</p>
<ul>
<li><p>push()</p>
</li>
<li><p>pop()</p>
</li>
<li><p>shift()</p>
</li>
<li><p>unshift()</p>
</li>
<li><p>splice()</p>
</li>
<li><p>sort()</p>
</li>
<li><p>reverse()</p>
</li>
</ul>
<p>替换数组的方法</p>
<ul>
<li>上面的方法会直接修改原来的数组</li>
</ul>
<p>但是某些方法不会替换原来的数组，而是会生成新的数组，比如 filter()、concat() 和 slice()</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in names&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>修改数组<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="attr">names</span>: [<span class="string">&quot;sdw&quot;</span>, <span class="string">&quot;dwdx&quot;</span>, <span class="string">&quot;wwa&quot;</span>]</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">methods</span>: &#123;</span><br><span class="line">       <span class="title function_">btnClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="comment">// 1.将数组修改为新的数组</span></span><br><span class="line">         <span class="comment">// this.names = [&#x27;scs&#x27;,&#x27;dwa&#x27;]</span></span><br><span class="line"></span><br><span class="line">         <span class="comment">// 2.通过一些数组的方法法，修改数组中的元素</span></span><br><span class="line">         <span class="comment">// this.names.push(&quot;ig&quot;)</span></span><br><span class="line"></span><br><span class="line">         <span class="comment">// this.names.splice(2,1,&quot;why&quot;)</span></span><br><span class="line">         <span class="comment">// this.names.sort()</span></span><br><span class="line">         <span class="comment">// this.names.reverse()</span></span><br><span class="line"></span><br><span class="line">         <span class="comment">// 3.不修改原数组的方法是不能侦听（watch）</span></span><br><span class="line">         <span class="keyword">const</span> newNames = <span class="variable language_">this</span>.<span class="property">names</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item + <span class="string">&quot;why&quot;</span>)</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">names</span> = newNames</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-v-for中的key"><a href="#4-v-for中的key" class="headerlink" title="4.v-for中的key"></a>4.v-for中的key</h4><h5 id="1、了解key属性"><a href="#1、了解key属性" class="headerlink" title="1、了解key属性"></a>1、了解key属性</h5><p>在使用v-for进行列表渲染时，我们通常会给元素或者组件绑定一个key属性</p>
<ul>
<li><p>key属性主要用在Vue的虚拟DOM算法，在新旧nodes对比时辨识VNodes</p>
</li>
<li><p>如果不使用key，Vue会使用一种最大限度减少动态元素并且尽可能的尝试就地修改&#x2F;复用相同类型元素的算法</p>
</li>
<li><p>而使用key时，它会基于key的变化重新排列元素顺序，并且会移除&#x2F;销毁key不存在的元素</p>
</li>
</ul>
<h5 id="2、虚拟DOM"><a href="#2、虚拟DOM" class="headerlink" title="2、虚拟DOM"></a>2、虚拟DOM</h5><p>VNode：先理解HTML元素创建出来的VNode</p>
<ul>
<li><p>VNode的全称是Virtual Node，也就是虚拟节点</p>
</li>
<li><p>无论是组件还是元素，它们最终在Vue中表示出来的都是一个个VNode</p>
</li>
<li><p>VNode的本质是一个JavaScript的对象</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410203039359.png" alt="image-20230410203039359"></p>
<p>如果不只是一个简单的div，而是有一堆元素，那么应该会形成一个VNode Tree</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410203141402.png" alt="image-20230410203141402"></p>
<p>作用：</p>
<ul>
<li>跨平台：将对象进行多端的解析，以展示于不同的平台</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410203257959.png" alt="image-20230410203257959"></p>
<ul>
<li>diff 算法</li>
</ul>
<p>案例：点击按钮在 li 插入 f 元素</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;insetF&quot;</span>&gt;插入F&lt;/button&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="comment">&lt;!-- key要求唯一：id --&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in letters&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">       <span class="title function_">insetF</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">letters</span>.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&quot;f&quot;</span>)</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>这次更新对于ul和button是不需要进行更新，需要更新的是我们li的列表</p>
<ul>
<li><p>在Vue中，对于相同父元素的子元素节点并不会重新渲染整个列表</p>
</li>
<li><p>因为对于列表中 a、b、c、d它们都是没有变化的</p>
</li>
<li><p>在操作真实DOM的时候，我们只需要在中间插入一个f的li即可</p>
</li>
</ul>
<p>Vue中对于列表的更新究竟是如何操作的呢？</p>
<p>Vue事实上会对于有key和没有key会调用两个不同的方法</p>
<ul>
<li><p>有key，那么就使用 patchKeyedChildren方法</p>
</li>
<li><p>没有key，那么久使用 patchUnkeyedChildren方法</p>
</li>
</ul>
<p>在没有key时diff算法效率并不高</p>
<ul>
<li><p>c和d来说它们事实上并不需要有任何的改动</p>
</li>
<li><p>但是c被f所使用了，所有后续所有的内容都要一次进行改动，并且最后进行新增</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410203723802.png" alt="image-20230410203723802"></p>
<h5 id="3、key的作用"><a href="#3、key的作用" class="headerlink" title="3、key的作用"></a>3、key的作用</h5><p>有key的diff算法</p>
<p>第一步的操作是从头开始进行遍历、比较</p>
<ul>
<li><p>a和b是一致的会继续进行比较</p>
</li>
<li><p>c和f因为key不一致，所以就会break跳出循环</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410204040153.png" alt="image-20230410204040153"></p>
<p>第二步的操作是从尾部开始进行遍历、比较</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410204053987.png" alt="image-20230410204053987"></p>
<p>第三步是如果旧节点遍历完毕，但是依然有新的节点，那么就新增节点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410204020323.png" alt="image-20230410204020323"></p>
<p>第四步是如果新的节点遍历完毕，但是依然有旧的节点，那么就移除旧节点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410204005807.png" alt="image-20230410204005807"></p>
<p>第五步是最特色的情况，中间还有很多未知的或者乱序的节点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410203948482.png" alt="image-20230410203948482"></p>
<p>所以可以发现，Vue在进行diff算法的时候，会尽量利用我们的key来进行优化操作</p>
<ul>
<li><p>在没有key的时候我们的效率是非常低效的</p>
</li>
<li><p>在进行插入或者重置顺序的时候，保持相同的key可以让diff算法更加的高效</p>
</li>
</ul>
<h2 id="3-Options-API"><a href="#3-Options-API" class="headerlink" title="3.Options API"></a>3.Options API</h2><h3 id="1、计算属性computed"><a href="#1、计算属性computed" class="headerlink" title="1、计算属性computed"></a>1、计算属性computed</h3><h4 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h4><p>在模板中可以直接通过插值语法显示一些data中的数据</p>
<p>但是某些情况可能需要对数据进行一些转化后再显示，或者需要将多个数据结合起来进行显示</p>
<ul>
<li><p>比如需要对多个data数据进行运算、三元运算符来决定结果、数据进行某种转化后显示</p>
</li>
<li><p>在模板中使用表达式，可以非常方便的实现，但是设计它们的初衷是用于简单的运算</p>
</li>
<li><p>在模板中放入太多的逻辑会让模板过重和难以维护</p>
</li>
<li><p>并且如果多个地方都使用到，那么会有大量重复的代码</p>
</li>
</ul>
<p>有没有什么方法可以将逻辑抽离出去</p>
<ul>
<li><p>可以，其中一种方式就是将逻辑抽取到一个method中，放到methods的options中</p>
</li>
<li><p>但是这种做法有一个直观的弊端，就是所有的data使用过程都会变成了一个方法的调用</p>
</li>
</ul>
<p>另外一种方式就是使用计算属性computed</p>
<p>计算属性</p>
<ul>
<li><p>官方并没有给出直接的概念解释</p>
</li>
<li><p>而是说：对于任何包含响应式数据的复杂逻辑，你都应该使用计算属性</p>
</li>
<li><p>计算属性将被混入到组件实例中</p>
<ul>
<li>所有 getter 和 setter 的 this 上下文自动地绑定为组件实例；</li>
</ul>
</li>
</ul>
<p>计算属性的用法：</p>
<ul>
<li><p>选项：computed</p>
</li>
<li><p>类型：{ [key: string]: Function | { get: Function, set: Function } }</p>
</li>
</ul>
<h5 id="案例对比实现"><a href="#案例对比实现" class="headerlink" title="案例对比实现"></a>案例对比实现</h5><h6 id="1-模板语法："><a href="#1-模板语法：" class="headerlink" title="1.模板语法："></a>1.模板语法：</h6><ul>
<li><p>缺点一：模板中存在大量的复杂逻辑，不便于维护（模板中表达式的初衷是用于简单的计算）</p>
</li>
<li><p>缺点二：当有多次一样的逻辑时，存在重复的代码</p>
</li>
<li><p>缺点三：多次使用的时候，很多运算也需要多次执行，没有缓存</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 插值语法表达式直接拼接 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; firstName + &quot; &quot; + lastName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; firstName&#125;&#125; &#123;&#123;lastName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">2.</span>显示等级 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; score &gt;= 60 ? &#x27;及格&#x27; : &#x27;不及格&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">3.</span>反转单词 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; message.split(&quot; &quot;).reverse().join(&quot; &quot;) &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">     <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="comment">// 1.姓名</span></span><br><span class="line">         <span class="attr">firstName</span>: <span class="string">&quot;kobe&quot;</span>,</span><br><span class="line">         <span class="attr">lastName</span>: <span class="string">&quot;bryant&quot;</span>,</span><br><span class="line">         <span class="comment">// 2.分数  及格/不及格</span></span><br><span class="line">         <span class="attr">score</span>: <span class="number">80</span>,</span><br><span class="line">         <span class="comment">// 3.一串文本，对文本中的单词进行反转显示</span></span><br><span class="line">         <span class="attr">message</span>: <span class="string">&#x27;my name is wbh&#x27;</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure>

<h6 id="2-methods-实现"><a href="#2-methods-实现" class="headerlink" title="2.methods 实现"></a>2.methods 实现</h6><ul>
<li><p>缺点一：我们事实上需要显示的是一个结果，但是都变成了一种方法的调用</p>
</li>
<li><p>缺点二：多次使用方法的时候，没有缓存，也需要多次计算</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">getFullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">scoreLevel</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">score</span> &gt;= <span class="number">60</span> ? <span class="string">&#x27;及格&#x27;</span> : <span class="string">&#x27;不及格&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">reverseMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h6 id="3-computed-实现"><a href="#3-computed-实现" class="headerlink" title="3.computed 实现"></a>3.computed 实现</h6><ul>
<li><p>注意：计算属性看起来像是一个函数，但是我们在使用的时候不需要加()，这个后面讲setter和getter时会讲到</p>
</li>
<li><p>发现无论是直观上，还是效果上计算属性都是更好的选择</p>
</li>
<li><p>并且计算属性是有缓存的</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">!-- 插值语法表达式直接拼接 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; fullName &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; fullName &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">2.</span>显示等级 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; scoreLevel &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   &lt;!-- <span class="number">3.</span>反转单词 --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; reverseMessage &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="attr">computed</span>: &#123;</span><br><span class="line">       <span class="comment">// 1.计算属性默认对应的是一个函数</span></span><br><span class="line">       <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="title function_">scoreLevel</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">score</span> &gt;= <span class="number">60</span> ? <span class="string">&quot;及格&quot;</span> : <span class="string">&quot;不及格&quot;</span></span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="title function_">reverseMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>)</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-computed-和-methods-的区别"><a href="#2-computed-和-methods-的区别" class="headerlink" title="2.computed 和 methods 的区别"></a>2.computed 和 methods 的区别</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">     <span class="title function_">getFullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;methods--------&quot;</span>)  <span class="comment">// 调用几次执行几次</span></span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="title function_">changeLastName</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">lastName</span> = <span class="string">&quot;why&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">computed</span>: &#123;</span><br><span class="line">     <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--------&quot;</span>) <span class="comment">//执行一次 会有缓存</span></span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;	</span><br></pre></td></tr></table></figure>

<p>原因：</p>
<ul>
<li><p>计算属性会基于它们的依赖关系进行缓存</p>
</li>
<li><p>在数据不发生变化时，计算属性是不需要重新计算的</p>
</li>
<li><p>但是如果依赖的数据发生变化，在使用时，计算属性依然会重新进行计算</p>
</li>
</ul>
<h4 id="3-computed-的-setter-和-getter"><a href="#3-computed-的-setter-和-getter" class="headerlink" title="3.computed 的 setter 和 getter"></a>3.computed 的 setter 和 getter</h4><p>计算属性在大多数情况下，只需要一个getter方法即可，所以我们会将计算属性直接写成一个函数</p>
<p>如果我们确实想设置计算属性的值，也可以给计算属性设置一个setter的方法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; fullname &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;setFullName&quot;</span>&gt;</span>设置fullname<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;	  </span><br><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">setFullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fullname</span> = <span class="string">&quot;coder why&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,	  </span><br><span class="line"> <span class="attr">computed</span>: &#123;</span><br><span class="line">      <span class="comment">// 语法糖的写法：</span></span><br><span class="line">      <span class="comment">// fullname() &#123;</span></span><br><span class="line">      <span class="comment">//   return this.firstName + &quot; &quot; + this.lastName</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 完整的写法:</span></span><br><span class="line">      <span class="attr">fullname</span>: &#123;</span><br><span class="line">        <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> names = value.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">firstName</span> = names[<span class="number">0</span>]</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">lastName</span> = names[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>源码对setter和getter的处理</p>
<ul>
<li>Vue源码内部只是做了一个逻辑判断而已</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230410210215389.png" alt="image-20230410210215389"></p>
<h3 id="2、侦听器watch"><a href="#2、侦听器watch" class="headerlink" title="2、侦听器watch"></a>2、侦听器watch</h3><h4 id="1-什么是侦听器"><a href="#1-什么是侦听器" class="headerlink" title="1.什么是侦听器"></a>1.什么是侦听器</h4><ul>
<li><p>开发中我们在data返回的对象中定义了数据，这个数据通过插值语法等方式绑定到template中</p>
</li>
<li><p>当数据变化时，template会自动进行更新来显示最新的数据</p>
</li>
<li><p>但是在某些情况下，我们希望在代码逻辑中监听某个数据的变化，这个时候就需要用侦听器watch来完成</p>
</li>
</ul>
<p>用法：</p>
<ul>
<li>选项：watch</li>
<li>类型：{ [key: string]: string | Function | Object | Array}</li>
</ul>
<h4 id="2-基本侦听"><a href="#2-基本侦听" class="headerlink" title="2.基本侦听"></a>2.基本侦听</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMessage&quot;</span>&gt;</span>修改message<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;	  </span><br><span class="line"></span><br><span class="line"> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;Hello Vue&quot;</span>,</span><br><span class="line">        <span class="attr">infos</span>: &#123; <span class="attr">name</span>:<span class="string">&#x27;why&#x27;</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">changeMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&quot;dwsa&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">infos</span> = &#123; <span class="attr">name</span>:<span class="string">&#x27;kobe&#x27;</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">      <span class="comment">// 1.默认有两个参数：newValue/oldVale</span></span><br><span class="line">      <span class="title function_">message</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;message数据发生了变化&quot;</span>, newValue, oldValue)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">infos</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="comment">// 2.如果是对象类型，那么拿到的是代理对象 proxy</span></span><br><span class="line">        <span class="comment">// console.log(&quot;infos数据发生了变化&quot;, oldValue, newValue)</span></span><br><span class="line">        <span class="comment">// console.log(newValue.name, oldValue.name)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.获取原始对象</span></span><br><span class="line">        <span class="comment">// console.log(&#123; ...newValue &#125;)</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Vue</span>.<span class="title function_">toRaw</span>(oldValue))</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-侦听选项"><a href="#3-侦听选项" class="headerlink" title="3.侦听选项"></a>3.侦听选项</h4><p>例子:当我们点击按钮的时候会修改info.name的值</p>
<ul>
<li><p>这个时候使用watch来侦听info，可以侦听到吗？答案是不可以</p>
</li>
<li><p>这是因为默认情况下，watch只是在侦听info的引用变化，对于内部属性的变化是不会做出响应的</p>
<ul>
<li>这个时候我们可以使用一个选项deep进行更深层的侦听；</li>
</ul>
</li>
</ul>
<p>注意前面我们说过watch里面侦听的属性对应的也可以是一个Object</p>
<p>还有另外一个属性，是希望一开始的就会立即执行一次：</p>
<ul>
<li><p>使用immediate选项</p>
</li>
<li><p>这个时候无论后面数据是否有变化，侦听的函数都会先执行一次</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">infos</span>: &#123; <span class="attr">name</span>:<span class="string">&#x27;why&#x27;</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">methods</span>: &#123;</span><br><span class="line">     <span class="title function_">changeMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">// 1.创建一个新对象，赋值给info</span></span><br><span class="line">       <span class="comment">// this.infos = &#123; name:&#x27;kobe&#x27; &#125;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">// 2.直接修改原对象的某一个属性</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">infos</span>.<span class="property">name</span> = <span class="string">&quot;kobe&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">watch</span>: &#123;</span><br><span class="line">     <span class="comment">// 默认watch的监听不会进行深度监听</span></span><br><span class="line">     <span class="comment">// infos(newValue, oldValue) &#123;</span></span><br><span class="line">     <span class="comment">//   console.log(&quot;侦听infos改变&quot;,newValue, oldValue)</span></span><br><span class="line">     <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">// 进行深度监听</span></span><br><span class="line">     <span class="attr">infos</span>: &#123;</span><br><span class="line">       <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;侦听infos改变&quot;</span>, newValue, oldValue)</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue === oldValue)</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="comment">// 监听器的一个配置选项</span></span><br><span class="line">       <span class="comment">// infos进行深度监听</span></span><br><span class="line">       <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">       <span class="comment">// 第一次渲染直接执行一次监听器</span></span><br><span class="line">       <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="comment">// 监听name得到改变</span></span><br><span class="line">     <span class="string">&quot;infos.name&quot;</span>: <span class="keyword">function</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;侦听infos.name改变&quot;</span>, newValue, oldValue)</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-其他的写法"><a href="#4-其他的写法" class="headerlink" title="4.其他的写法"></a>4.其他的写法</h4><p>可以在created的生命周期中，使用this.$watchs 来侦听</p>
<ul>
<li><p>第一个参数是要侦听的源</p>
</li>
<li><p>第二个参数是侦听的回调函数callback</p>
</li>
<li><p>第三个参数是额外的其他选项，比如deep、immediate</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 生命周期的回调函数:当前的组件被创建时自动执行</span></span><br><span class="line">   <span class="comment">// 一般在该函数中，会进行网络请求</span></span><br><span class="line">   <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;created&quot;</span>)</span><br><span class="line"></span><br><span class="line">     <span class="variable language_">this</span>.$watch(<span class="string">&quot;message&quot;</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;message数据变化&quot;</span>,newValue, oldValue)</span><br><span class="line">     &#125;, &#123;<span class="attr">deep</span>: <span class="literal">true</span>, <span class="attr">immediate</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>



<h3 id="3、阶段练习"><a href="#3、阶段练习" class="headerlink" title="3、阶段练习"></a>3、阶段练习</h3><p>书籍购物车案例</p>
<h2 id="4-Vue-的双向绑定"><a href="#4-Vue-的双向绑定" class="headerlink" title="4. Vue 的双向绑定"></a>4. Vue 的双向绑定</h2><h3 id="1、基本使用"><a href="#1、基本使用" class="headerlink" title="1、基本使用"></a>1、基本使用</h3><p>表单提交是开发中非常常见的功能，也是和用户交互的重要手段：</p>
<ul>
<li><p>比如用户在登录、注册时需要提交账号密码</p>
</li>
<li><p>比如用户在检索、创建、更新信息时，需要提交一些数据</p>
</li>
</ul>
<p>这些都要求我们能在代码逻辑中获取到用户提交的数据，通常会使用v-model指令来完成</p>
<ul>
<li><p>v-model指令可以在表单 input、textarea以及select元素上创建双向数据绑定</p>
</li>
<li><p>它会根据控件类型自动选取正确的方法来更新元素</p>
</li>
<li><p>尽管有些神奇，但 v-model 本质上不过是语法糖，它负责监听用户的输入事件来更新数据，并在某种极端场景下进行一些特殊处理</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;message&quot;</span>&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2、v-model-的原理"><a href="#2、v-model-的原理" class="headerlink" title="2、v-model 的原理"></a>2、v-model 的原理</h3><ul>
<li><p>v-bind绑定value属性的值</p>
</li>
<li><p>v-on绑定input事件监听到函数中，函数会获取最新的值赋值到绑定的属性中</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> :value=<span class="string">&quot;message&quot;</span> @input=<span class="string">&quot;inputChange&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412110510508.png" alt="image-20230412110510508"></p>
<p>事实上v-model更加复杂</p>
<h3 id="3、绑定其他类型"><a href="#3、绑定其他类型" class="headerlink" title="3、绑定其他类型"></a>3、绑定其他类型</h3><h4 id="1-v-model-绑定-textarea"><a href="#1-v-model-绑定-textarea" class="headerlink" title="1.v-model 绑定 textarea"></a>1.v-model 绑定 textarea</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;textarea cols=<span class="string">&quot;30&quot;</span> rows=<span class="string">&quot;10&quot;</span> v-model=<span class="string">&quot;content&quot;</span>&gt;&lt;/textarea&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="2-v-model-绑定-checkbox"><a href="#2-v-model-绑定-checkbox" class="headerlink" title="2.v-model 绑定 checkbox"></a>2.v-model 绑定 checkbox</h4><h5 id="单选框"><a href="#单选框" class="headerlink" title="单选框"></a>单选框</h5><ul>
<li><p>v-model 即为布尔值。</p>
</li>
<li><p>此时 input 的 value 属性并不影响 v-model 的值</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   &lt;!-- <span class="number">1.</span>checkbox单选框，绑定到属性的值是一个<span class="title class_">Boolean</span> --&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;agree&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;agree&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span>&gt;</span> 同意协议</span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">isAgree: false</span></span><br></pre></td></tr></table></figure>

<h5 id="多选框"><a href="#多选框" class="headerlink" title="多选框"></a>多选框</h5><ul>
<li><p>当是多个复选框时，因为可以选中多个，所以对应的 data 中属性是一个数组</p>
</li>
<li><p>当选中某一个时，就会将 input 的 value 添加到数组中</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   &lt;label <span class="keyword">for</span>=<span class="string">&quot;sing&quot;</span>&gt;</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;sing&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sing&quot;</span>&gt;</span> 唱</span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;jump&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;jump&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jump&quot;</span>&gt;</span> 跳</span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">hobbies: []</span></span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412110951563.png" alt="image-20230412110951563" style="zoom: 50%;" />



<h4 id="3-v-model-绑定-radio"><a href="#3-v-model-绑定-radio" class="headerlink" title="3.v-model 绑定 radio"></a>3.v-model 绑定 radio</h4><p>v-model 绑定 radio，用于选择其中一项</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   &lt;div <span class="keyword">class</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><br><span class="line">     &lt;!-- v-model绑定同一个值 会自动radio的互斥 可以不需要name属性--&gt;</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;male&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;male&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span> 男</span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;female&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;female&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>&gt;</span> 女de</span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别：&#123;&#123;gender&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">gender: &quot;male&quot;  // 可以默认初始值</span></span><br></pre></td></tr></table></figure>



<h4 id="4-v-model-绑定-select"><a href="#4-v-model-绑定-select" class="headerlink" title="4.v-model 绑定 select"></a>4.v-model 绑定 select</h4><p>单选：只能选中一个值</p>
<ul>
<li><p>v-model 绑定的是一个值</p>
</li>
<li><p>当我们选中 option 中的一个时，会将它对应的 value 赋值到 fruit 中</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   &lt;!-- select的单选   v-model 绑定到的是 select 中--&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;fruit&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;apple&quot;</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;orange&quot;</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;banana&quot;</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">fruit</span>: <span class="string">&quot;orange&quot;</span>  <span class="comment">// 默认值</span></span><br></pre></td></tr></table></figure>

<p>多选：可以选中多个值</p>
<ul>
<li><p>v-model绑定的是一个数组</p>
</li>
<li><p>当选中多个值时，就会将选中的option对应的value添加到数组fruit中</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;select multiple size=<span class="string">&quot;3&quot;</span> v-model=<span class="string">&quot;fruits&quot;</span>&gt;</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;apple&quot;</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;orange&quot;</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;banana&quot;</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line">   &lt;/select&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">fruits</span>: []</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412111708135.png" alt="image-20230412111708135" style="zoom: 67%;" />



<h4 id="5-v-model-的值绑定"><a href="#5-v-model-的值绑定" class="headerlink" title="5.v-model 的值绑定"></a>5.v-model 的值绑定</h4><p>目前我们在前面的案例中大部分的值都是在template中固定好的：</p>
<ul>
<li><p>比如gender的两个输入框值male、female</p>
</li>
<li><p>比如hobbies的三个输入框值basketball、football</p>
</li>
</ul>
<p>在开发中，数据可能是来自服务器的，那么可以先将值请求下来，绑定到data返回的对象中，再通过v-bind来进行值的绑定，这个过程就是值绑定</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">	&lt;!-- <span class="number">1.</span>select的值绑定 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;fruits&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in allFruits&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.value&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123; item.text &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="number">2.</span>checkbox的值绑定 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in allHobbies&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.value&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">:for</span>=<span class="string">&quot;item.value&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">:id</span>=<span class="string">&quot;item.value&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span>&gt;</span> 				&#123;&#123;item.text&#125;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="4-v-model-修饰符"><a href="#4-v-model-修饰符" class="headerlink" title="4.v-model 修饰符"></a>4.v-model 修饰符</h3><h4 id="1、lazy"><a href="#1、lazy" class="headerlink" title="1、lazy"></a>1、lazy</h4><ul>
<li><p>默认情况下，v-model在进行双向绑定时，绑定的是input事件，那么会在每次内容输入后就将最新的值和绑定的属性进行同步</p>
</li>
<li><p>如果我们在v-model后跟上lazy修饰符，那么会将绑定的事件切换为 change 事件，只有在提交时（比如回车）才会触发</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model.<span class="property">lazy</span>=<span class="string">&quot;message&quot;</span>&gt;</span><br></pre></td></tr></table></figure>



<h4 id="2、number"><a href="#2、number" class="headerlink" title="2、number"></a>2、number</h4><p>绑定的 message 总是string类型，即使在我们设置 type 为 number 也是 string 类型</p>
<p>如果希望转换为数字类型，那么可以使用 .number 修饰符：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model.<span class="property">number</span>=<span class="string">&quot;counter&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p>在进行逻辑判断时，如果是一个string和数字类型对比，在可以转化的情况下会进行隐式转换</p>
<p>但typeof 查询的还是字符类型</p>
<h4 id="3、trim"><a href="#3、trim" class="headerlink" title="3、trim"></a>3、trim</h4><p>如果要自动过滤用户输入的守卫空白字符，可以给 v-model 添加 trim 修饰符</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model.<span class="property">trim</span>=<span class="string">&quot;content&quot;</span>&gt;</span><br></pre></td></tr></table></figure>



<h4 id="4、多个修饰符一起使用"><a href="#4、多个修饰符一起使用" class="headerlink" title="4、多个修饰符一起使用"></a>4、多个修饰符一起使用</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model.<span class="property">lazy</span>.<span class="property">trim</span>=<span class="string">&quot;content2&quot;</span>&gt;</span><br></pre></td></tr></table></figure>



<h2 id="5-组件化开发"><a href="#5-组件化开发" class="headerlink" title="5.组件化开发"></a>5.组件化开发</h2><h3 id="1、认识组件化开发"><a href="#1、认识组件化开发" class="headerlink" title="1、认识组件化开发"></a>1、认识组件化开发</h3><h4 id="1-开发思想"><a href="#1-开发思想" class="headerlink" title="1.开发思想"></a>1.开发思想</h4><ul>
<li><p>如果将一个页面中所有的处理逻辑全部放在一起，处理起来就会变得非常复杂，而且不利于后续的管理以及扩展</p>
</li>
<li><p>但如果们把一个页面拆分成一个个小的功能块，每个功能块完成属于自己这部分独立的功能，那么之后整个页面的管理和维护就变得非常容易</p>
</li>
<li><p>如果将一个个功能块拆分后，就可以像搭建积木一下来搭建我们的项目</p>
</li>
</ul>
<p>现在可以说整个的大前端开发都是组件化的天下</p>
<ul>
<li><p>无论从三大框架（Vue、React、Angular），还是跨平台方案的Flutter，甚至是移动端都在转向组件化开发，包括小程序的开发也是采用组件化开发的思想</p>
</li>
<li><p>所以，学习组件化最重要的是它的思想，每个框架或者平台可能实现方法不同，但是思想都是一样的</p>
</li>
</ul>
<p>组件化思想构建程序</p>
<ul>
<li><p>将一个完整的页面分成很多个组件</p>
</li>
<li><p>每个组件都用于实现页面的一个功能块</p>
</li>
<li><p>而每一个组件又可以进行细分</p>
</li>
<li><p>而组件本身又可以在多个地方进行复用</p>
</li>
</ul>
<h4 id="2-Vue-的组件化"><a href="#2-Vue-的组件化" class="headerlink" title="2.Vue 的组件化"></a>2.Vue 的组件化</h4><ul>
<li>createApp 函数传入了一个对象App，这个对象本质上就是一个组件，也是应用程序的根组件</li>
<li>组件化提供了一种抽象，让我们可以开发出一个个独立可复用的小组件来构造我们的应用</li>
<li>任何的应用都会被抽象成一颗组件树</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412113210135.png" alt="image-20230412113210135"></p>
<h3 id="2、注册组件"><a href="#2、注册组件" class="headerlink" title="2、注册组件"></a>2、注册组件</h3><p>注册组件分成两种：</p>
<ul>
<li><p>全局组件：在任何其他的组件中都可以使用的组件</p>
</li>
<li><p>局部组件：只有在注册的组件中才能使用的组件</p>
</li>
</ul>
<h4 id="1-注册全局组件"><a href="#1-注册全局组件" class="headerlink" title="1.注册全局组件"></a>1.注册全局组件</h4><ul>
<li><p>全局组件需要使用我们全局创建的app来注册组件</p>
</li>
<li><p>通过 component 方法传入组件名称、组件对象即可注册一个全局组件</p>
</li>
<li><p>之后，可以在 App 组件的template中直接使用这个全局组件</p>
</li>
<li><p>组件本身也可以有自己的代码逻辑，比如自己的data、methods等</p>
</li>
<li><p>全局组件的特点是：一旦注册成功后，可以在任意其他组件的template中使用</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 组件 product-item的模板 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;product&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span>	 </span><br><span class="line">   <span class="number">1.</span>通过app.<span class="property">component</span>（组件名称，组件的对象）</span><br><span class="line">    <span class="number">2.</span>在<span class="title class_">App</span>组件的模板中，可以直接使用product-item的组件</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1.组件：App组件（根组件）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">App</span> = &#123;&#125;</span><br><span class="line">  <span class="comment">// 2.创建app</span></span><br><span class="line">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.注册一个全局组件</span></span><br><span class="line">  <span class="comment">// product-item全局组件</span></span><br><span class="line">  app.<span class="title function_">component</span>(<span class="string">&quot;product-item&quot;</span>, &#123;</span><br><span class="line">    <span class="comment">// 通过 id 使用在html中构建的模板 </span></span><br><span class="line">    <span class="attr">template</span>: <span class="string">&quot;#item&quot;</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>



<h4 id="2-组件的名称"><a href="#2-组件的名称" class="headerlink" title="2.组件的名称"></a>2.组件的名称</h4><p>通过app.component注册一个组件的时候，第一个参数是组件的名称</p>
<p>方法1：使用kebab-case（短横线分割符）</p>
<ul>
<li>当使用 kebab-case  定义一个组件时，你也必须在引用这个自定义元素时使用 kebab-case</li>
</ul>
<p>方法2：使用PascalCase（驼峰标识符）大驼峰</p>
<ul>
<li><p>当使用 PascalCase 定义一个组件时，你在引用这个自定义元素时两种命名法都可以使用</p>
</li>
<li><p>也就是说 my-component-name 和 MyComponentName 都是可接受的（大驼峰标签在.vue文件中才生效，在 html 文件中不能使用）</p>
</li>
</ul>
<h4 id="3-局部组件"><a href="#3-局部组件" class="headerlink" title="3.局部组件"></a>3.局部组件</h4><p>全局组件往往是在应用程序一开始就会全局组件完成，那么就意味着某些组件就算没有用到也会一起被注册：</p>
<ul>
<li><p>比如注册了三个全局组件：ComponentA、ComponentB、ComponentC</p>
</li>
<li><p>在开发中我们只使用了ComponentA、ComponentB，如果ComponentC没有用到但是我们依然在全局进行了注册，那么就意味着类似于webpack这种打包工具在打包项目时，依然会对其进行打包</p>
</li>
<li><p>这样最终打包出的 JavaScript 包就会有关于 ComponentC 的内容，用户在下载对应的 JavaScript 时也会增加包的大小</p>
</li>
</ul>
<p>开发中通常在使用组件的时候采用的都是局部注册：</p>
<ul>
<li><p>局部注册是在我们需要使用到的组件中，通过components属性选项来进行注册</p>
</li>
<li><p>比如之前的App组件中，我们有data、computed、methods等选项了，还可以有一个components选项</p>
</li>
<li><p>该components选项对应的是一个对象，对象中的键值对是 组件的名称: 组件对象</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ProductItem</span> = &#123;</span><br><span class="line">     <span class="attr">template</span>: <span class="string">&quot;#product&quot;</span>,</span><br><span class="line">       <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> &#123;</span><br><span class="line">           <span class="attr">title</span>: <span class="string">&quot;我是商品&quot;</span>,</span><br><span class="line">           <span class="attr">price</span>: <span class="number">99.9</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;	</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建app</span></span><br><span class="line">   <span class="comment">// 1.1组件打算在哪里被使用</span></span><br><span class="line">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span><br><span class="line">     <span class="comment">// components: option api</span></span><br><span class="line">     <span class="attr">components</span>: &#123;</span><br><span class="line">       <span class="title class_">ProductItem</span>,   <span class="comment">// 对象抽出来了</span></span><br><span class="line">       <span class="title class_">HomeNav</span>: &#123;</span><br><span class="line">         <span class="attr">template</span>: <span class="string">&quot;#nav&quot;</span>,</span><br><span class="line">         <span class="attr">components</span>: &#123;</span><br><span class="line">           <span class="title class_">ProductItem</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<h3 id="3、Vue-的开发模式"><a href="#3、Vue-的开发模式" class="headerlink" title="3、Vue 的开发模式"></a>3、Vue 的开发模式</h3><p>目前使用vue的过程都是在html文件中，通过template编写自己的模板、脚本逻辑、样式等。</p>
<p>但是随着项目越来越复杂，我们会采用组件化的方式来进行开发：</p>
<ul>
<li><p>这意味着每个组件都会有自己的模板、脚本逻辑、样式等</p>
</li>
<li><p>依然可以把它们抽离到单独的js、css文件中，但是它们还是会分离开来</p>
</li>
<li><p>也包括我们的script是在一个全局的作用域下，很容易出现命名冲突的问题</p>
</li>
<li><p>并且我们的代码为了适配一些浏览器，必须使用ES5的语法</p>
</li>
<li><p>在我们编写代码完成之后，依然需要通过工具对代码进行构建、代码</p>
</li>
</ul>
<p>所以开发中，可以通过一个后缀名为 .vue的single-file-components (单文件组件)来解决，并且可以使用webpack或vite或rollup等构建工具来对其进行处理</p>
<p>单文件的特点</p>
<p>在这个组件中我们可以获得非常多的特性：</p>
<ul>
<li><p>代码的高亮</p>
</li>
<li><p>ES6、CommonJS的模块化能力</p>
</li>
<li><p>组件作用域的CSS</p>
</li>
<li><p>可以使用预处理器来构建更加丰富的组件，比如TypeScript、Babel、Less、Sass等</p>
</li>
</ul>
<p>如何支持 SFC</p>
<p>使用SFC的.vue文件比较常见的两种方式</p>
<ul>
<li><p>方式一：使用Vue CLI来创建项目，项目会默认帮助我们配置好所有的配置选项，可以在其中直接使用.vue文件</p>
</li>
<li><p>方式二：自己使用webpack或rollup或vite这类打包工具，对其进行打包处理</p>
</li>
</ul>
<p>VSCode对SFC的支持</p>
<ul>
<li><p>插件一：Vetur，从Vue2开发就一直在使用的VSCode支持Vue的插件</p>
</li>
<li><p>插件二：Volar，官方推荐的插件</p>
</li>
</ul>
<h3 id="4、Vue-CLI-脚手架"><a href="#4、Vue-CLI-脚手架" class="headerlink" title="4、Vue CLI 脚手架"></a>4、Vue CLI 脚手架</h3><h4 id="1-什么是脚手架"><a href="#1-什么是脚手架" class="headerlink" title="1.什么是脚手架"></a>1.什么是脚手架</h4><ul>
<li><p>在真实开发中，我们通常会使用脚手架来创建一个项目，Vue的项目我们使用的就是Vue的脚手架</p>
</li>
<li><p>脚手架其实是建筑工程中的一个概念，在软件工程中也会将一些帮助我们搭建项目的工具称之为脚手架</p>
</li>
</ul>
<p>Vue的脚手架就是Vue CLI</p>
<ul>
<li><p>CLI是Command-Line Interface, 翻译为命令行界面</p>
</li>
<li><p>可以通过CLI选择项目的配置和创建出我们的项目</p>
</li>
<li><p>Vue CLI已经内置了webpack相关的配置，我们不需要从零来配置</p>
</li>
</ul>
<h4 id="2-Vue-CLI-安装和使用"><a href="#2-Vue-CLI-安装和使用" class="headerlink" title="2.Vue CLI 安装和使用"></a>2.Vue CLI 安装和使用</h4><p>安装 Vue CLI</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">全局安装：npm install @vue/cli -g</span><br><span class="line">升级：npm update @vue/cli -g</span><br><span class="line">查看版本：vue -V</span><br><span class="line">通过<span class="title class_">Vue</span>创建项目：vue create 项目名称</span><br></pre></td></tr></table></figure>

<p>使用</p>
<p>引入 Vue 的版本：</p>
<ul>
<li>App 对象可以在 App.vue 中引入，这样引入 Vue 的版本是：<ul>
<li>import { createApp } from ‘vue’</li>
</ul>
</li>
<li>也能在 main.js 中自己定义 App 对象，这样引入 Vue 的版本是：<ul>
<li>import { createApp } from ‘vue&#x2F;dist&#x2F;vue.esm-bundler’</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>



<p>在 App.vue 文件中设置根组件导出，并在 main.js 中导入注册挂载</p>
<p>全局组件也是类似的方法，需要使用 app.component 进行全局注册</p>
<p>局部组件则需要在使用的地方导入并注册就行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ProductItem</span> <span class="keyword">from</span> <span class="string">&#x27;./ProductItem.vue&#x27;</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&quot;product-item&quot;</span>, <span class="title class_">ProductItem</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 局部组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ProductItem</span> <span class="keyword">from</span> <span class="string">&#x27;./ProductItem.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123; <span class="title class_">ProductItem</span> &#125;,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;我也是标题&quot;</span>,</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-项目文件夹说明"><a href="#3-项目文件夹说明" class="headerlink" title="3.项目文件夹说明"></a>3.项目文件夹说明</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412143013515.png" alt="image-20230412143013515" style="zoom: 50%;" />



<h4 id="4-Vue-CLI-的运行原理"><a href="#4-Vue-CLI-的运行原理" class="headerlink" title="4.Vue CLI 的运行原理"></a>4.Vue CLI 的运行原理</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412143116839.png" alt="image-20230412143116839"></p>
<h4 id="5-补充"><a href="#5-补充" class="headerlink" title="5.补充"></a>5.补充</h4><h5 id="1、jsconfig-json"><a href="#1、jsconfig-json" class="headerlink" title="1、jsconfig.json"></a>1、jsconfig.json</h5><p>作用：给vscode来进行读取，vscode在读取到其中的内容时，给我们的代码更友好的支持</p>
<p>比如在一个文件嵌套很深的条件下，需要调用上层的函数，就会出现..&#x2F;..&#x2F;..&#x2F;这种不友好的路径表现，可以配置 vue.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">      <span class="comment">// 配置路径别名</span></span><br><span class="line">      <span class="comment">// @是已经配置好的路径别名：对应的是src的路径</span></span><br><span class="line">      <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="string">&quot;utils&quot;</span>: <span class="string">&quot;@/utils&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>这样可以直接使用配置好的路径，但是 vscode 并不会对此有所提示</p>
<p>就该配置 jsconfig.json 文件的 path，就能得到友好的代码提示</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;utils/*&quot;</span>: [</span><br><span class="line">     <span class="string">&quot;src/utils/*&quot;</span></span><br><span class="line">   ]</span><br></pre></td></tr></table></figure>



<h5 id="2、引入Vue的版本"><a href="#2、引入Vue的版本" class="headerlink" title="2、引入Vue的版本"></a>2、引入Vue的版本</h5><p>上文有说明使用的区别</p>
<p>出现这种情况的本质：</p>
<ul>
<li>在以前创建 vue 项目时会出现选择 runtime  &#x2F; runtime + compile 编译两种选择</li>
<li>编译并不是说其不会编译 vue 文件，而是指对别的对象（vue文件之外）中的 template 模板中元素的编译</li>
<li>而默认版本是 vue，不会对上者情况的 template 编译，因为没有 compile 源码对其进行编译</li>
<li>所以在 main.js 中创建 App 根组件并使用的话，使用默认 vue 并不会对其进行渲染</li>
<li>这时该选择 vue.esm-bundler 版本</li>
</ul>
<h5 id="3、style-的作用域"><a href="#3、style-的作用域" class="headerlink" title="3、style 的作用域"></a>3、style 的作用域</h5><p>每一个组件都应该存在自己独立的作用域，不然在使用时会重复的覆盖，不便于对每一个组件的样式进行设置</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;&lt;/style scoped&gt;</span><br></pre></td></tr></table></figure>



<h5 id="4、vite-创建-vue-项目"><a href="#4、vite-创建-vue-项目" class="headerlink" title="4、vite 创建 vue 项目"></a>4、vite 创建 vue 项目</h5><p>创建 vue 项目的方式</p>
<p>方式1：vue cli：vue create   -&gt; 基于 webpack</p>
<p>方式2：npm init vue@latest  -&gt; 基于 vite</p>
<ul>
<li>1.安装一个本地工具：create-vue</li>
<li>2.使用create-vue创建一个 vue 项目</li>
</ul>
<p>编译速度更快，和其底层有关系</p>
<h2 id="6-组件间的通信"><a href="#6-组件间的通信" class="headerlink" title="6.组件间的通信"></a>6.组件间的通信</h2><h3 id="1、组件的嵌套关系"><a href="#1、组件的嵌套关系" class="headerlink" title="1、组件的嵌套关系"></a>1、组件的嵌套关系</h3><p>在之前只是创建了一个组件App</p>
<p>如果一个应用程序将所有的逻辑都放在一个组件中，那么这个组件就会变成非常的臃肿和难以维护</p>
<ul>
<li><p>所以组件化的核心思想应该是对组件进行拆分，拆分成一个个小的组件</p>
</li>
<li><p>再将这些组件组合嵌套在一起，最终形成我们的应用程序</p>
</li>
</ul>
<p>将所有的代码逻辑全部放到一个组件中，代码是非常的臃肿和难以维护的</p>
<ul>
<li><p>并且在开发中，会有更多的内容和代码逻辑，对于扩展性和可维护性来说都是非 常差的</p>
</li>
<li><p>所以，在真实的开发中会对组件进行拆分，拆分成一个个功能的小组件</p>
</li>
</ul>
<p>将各模块抽为单独的局部组件，在使用的地方进行引入</p>
<h4 id="组件的拆分"><a href="#组件的拆分" class="headerlink" title="组件的拆分"></a>组件的拆分</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412190521688.png" alt="image-20230412190521688"></p>
<h3 id="2、父组件传递子组件"><a href="#2、父组件传递子组件" class="headerlink" title="2、父组件传递子组件"></a>2、父组件传递子组件</h3><p>上面的嵌套逻辑如下，它们存在如下关系：</p>
<ul>
<li><p>App组件是Header、Main、Footer组件的父组件</p>
</li>
<li><p>Main组件是Banner、ProductList组件的父组件</p>
</li>
</ul>
<p>在开发过程中，我们会经常遇到需要组件之间相互进行通信：</p>
<ul>
<li><p>比如App可能使用了多个Header，每个地方的Header展示的内容不同，那么我们就需要使用者传递给Header一些数据，让其进行展示</p>
</li>
<li><p>又比如我们在Main中一次性请求了Banner数据和ProductList数据，那么就需要传递给它们来进行展示</p>
</li>
<li><p>也可能是子组件中发生了事件，需要由父组件来完成某些操作，那就需要子组件向父组件传递事件</p>
</li>
</ul>
<p>总之，在一个Vue项目中，组件之间的通信是非常重要的环节</p>
<h4 id="1-父子组件之间通信的方式"><a href="#1-父子组件之间通信的方式" class="headerlink" title="1.父子组件之间通信的方式"></a>1.父子组件之间通信的方式</h4><ul>
<li><p>父组件传递给子组件：通过props属性</p>
</li>
<li><p>子组件传递给父组件：通过$emit触发事件</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412204202490.png" alt="image-20230412204202490"></p>
<h4 id="2-父传子方法"><a href="#2-父传子方法" class="headerlink" title="2.父传子方法"></a>2.父传子方法</h4><p>通过props来完成组件之间的通信</p>
<p>什么是Props</p>
<ul>
<li><p>Props是你可以在组件上注册一些自定义的attribute</p>
</li>
<li><p>父组件给这些attribute赋值，子组件通过attribute的名称获取到对应的值</p>
</li>
</ul>
<p>Props有两种常见的用法</p>
<ul>
<li><p>方式一：字符串数组，数组中的字符串就是attribute的名称</p>
</li>
<li><p>方式二：对象类型，对象类型我们可以在指定attribute名称的同时，指定它需要传递的类型、是否是必须的、默认值等等</p>
</li>
</ul>
<h5 id="1、Props-的数组用法"><a href="#1、Props-的数组用法" class="headerlink" title="1、Props 的数组用法"></a>1、Props 的数组用法</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;infos&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名： &#123;&#123;name&#125;&#125; <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄： &#123;&#123;age&#125;&#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;others&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// propos 作用：接受父组件传递过来的属性</span></span><br><span class="line">    <span class="comment">// 数组语法</span></span><br><span class="line">    <span class="comment">// 弊端：1&gt; 不能对类型进行验证 2&gt; 没有默认值的</span></span><br><span class="line">    <span class="comment">// props: [&quot;name&quot;, &quot;age&quot;, &quot;height&quot;]</span></span><br><span class="line"></span><br><span class="line">父组件：</span><br><span class="line"><span class="comment">// 补充 使用子组件的时候可以使用单标签，与双标签的区别在插槽中讲</span></span><br><span class="line">  &lt;show-infos name=<span class="string">&quot;mas&quot;</span> age=<span class="string">&quot;23&quot;</span>&gt;&lt;/show-infos&gt;</span><br></pre></td></tr></table></figure>



<h5 id="2、Props-的对象用法"><a href="#2、Props-的对象用法" class="headerlink" title="2、Props 的对象用法"></a>2、Props 的对象用法</h5><p>数组用法中我们只能说明传入的attribute的名称，并不能对其进行任何形式的限制，接下来我们来看一下对象的写法是如何让 我们的props变得更加完善的</p>
<p>当使用对象语法的时候，我们可以对传入的内容限制更多：</p>
<ul>
<li><p>比如指定传入的attribute的类型</p>
</li>
<li><p>比如指定传入的attribute是否是必传的</p>
</li>
<li><p>比如指定没有传入时，attribute的默认值</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">     <span class="attr">name</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">       <span class="attr">default</span>: <span class="string">&quot;默认值&quot;</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">age</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">       <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">       <span class="attr">default</span>: <span class="number">10</span></span><br><span class="line">     &#125;,</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h5 id="3、type-的类型"><a href="#3、type-的类型" class="headerlink" title="3、type 的类型"></a>3、type 的类型</h5><p>String、Number、Boolean、Array、Object、Date、Function、Symbol</p>
<p>对象类型的其他写法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 重要的原则：对象类型写默认值时，需要编写default的函数，函数返回默认值</span></span><br><span class="line">      <span class="attr">friend</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Object</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="function">() =&gt;</span> (&#123; <span class="attr">name</span>: <span class="string">&quot;james&quot;</span> &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">hobbies</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Array</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="function">() =&gt;</span> [<span class="string">&quot;篮球&quot;</span>, <span class="string">&quot;rap&quot;</span>]</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230412205345651.png" alt="image-20230412205345651"></p>
<h5 id="4、Props的大小写"><a href="#4、Props的大小写" class="headerlink" title="4、Props的大小写"></a>4、Props的大小写</h5><p>Prop 的大小写命名(camelCase vs kebab-case)</p>
<ul>
<li><p>HTML 中的 attribute 名是大小写不敏感的，所以浏览器会把所有大写字符解释为小写字符</p>
</li>
<li><p>这意味着当你使用 DOM 中的模板时，camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短横线分隔命名)  命名</p>
</li>
</ul>
<p>即在 props 中使用小驼峰，在父组件中传递过来可以使用小驼峰也能使用 - 连接</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">show-message=<span class="string">&quot;哈哈哈&quot;</span></span><br><span class="line">showMessage=<span class="string">&quot;哈哈哈&quot;</span></span><br><span class="line"><span class="attr">showMessage</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&quot;dsa&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3、非props的attribute"><a href="#3、非props的attribute" class="headerlink" title="3、非props的attribute"></a>3、非props的attribute</h3><p>什么是非Prop的Attribute</p>
<ul>
<li><p>当我们传递给一个组件某个属性，但是该属性并没有定义对应的 props 或者 emits 时，就称之为非Prop的Attribute</p>
</li>
<li><p>常见的包括class、style、id属性等</p>
</li>
</ul>
<p>Attribute继承</p>
<ul>
<li>当组件有单个根节点时，非Prop的Attribute将自动添加到根节点的Attribute中</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;infos sws&quot;</span> address=<span class="string">&quot;北京&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>



<p>禁用Attribute继承和多根节点</p>
<p>如果我们不希望组件的根元素继承attribute，可以在组件中设置 inheritAttrs: false</p>
<ul>
<li><p>禁用attribute继承的常见情况是需要将attribute应用于根元素之外的其他元素</p>
</li>
<li><p>我们可以通过 $attrs来访问所有的非props的attribute</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">inheritAttrs</span>: <span class="literal">false</span>  <span class="comment">// 写在options api</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用子节点来接收  不禁掉inheritAttrs时根节点也同时拿到</span></span><br><span class="line">&lt;h2 :<span class="keyword">class</span>=<span class="string">&quot;$attrs.address&quot;</span>&gt;姓名： &#123;&#123;name&#125;&#125; &lt;/h2&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个根：使用另一个根节点接收非 props</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;others&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="4、子组件传递父组件"><a href="#4、子组件传递父组件" class="headerlink" title="4、子组件传递父组件"></a>4、子组件传递父组件</h3><p>子组件需要传递内容到父组件的情况</p>
<ul>
<li><p>当子组件有一些事件发生的时候，比如在组件中发生了点击，父组件需要切换内容</p>
</li>
<li><p>子组件有一些内容想要传递给父组件的时</p>
</li>
</ul>
<p>操作</p>
<ul>
<li><p>首先，我们需要在子组件中定义好在某些情况下触发的事件名称</p>
</li>
<li><p>其次，在父组件中以v-on的方式传入要监听的事件名称，并且绑定到对应的方法中</p>
</li>
<li><p>最后，在子组件中发生某个事件的时候，根据事件名称触发对应的事件</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">父组件：</span><br><span class="line">    &lt;h2&gt;当前计数: &#123;&#123;counter&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;!-- <span class="number">1.</span>自定义 add-counter 并且监听内部的add事件 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">add-counter</span> @<span class="attr">add</span>=<span class="string">&quot;addBtnClick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">add-counter</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">addBtnClick</span>(<span class="params">count</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">counter</span> += count</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件：</span><br><span class="line">    &lt;button @click=<span class="string">&quot;btnClick(1)&quot;</span>&gt;+<span class="number">1</span>&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">btnClick</span>(<span class="params">count</span>) &#123;</span><br><span class="line">        <span class="comment">// 让子组件发出去一个自定义事件</span></span><br><span class="line">        <span class="comment">// 第一个参数，自定义事件的名称</span></span><br><span class="line">        <span class="comment">// 第二个参数是传递的参数</span></span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&quot;add&quot;</span>, count)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>自定义事件的参数和验证</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.emits的数组写法  options api 中</span></span><br><span class="line"><span class="attr">emits</span>: [<span class="string">&quot;add&quot;</span>],</span><br><span class="line"><span class="comment">// 2.emits的对象写法  vue3 新加的对参数验证  可以写一个函数</span></span><br><span class="line"><span class="comment">// emits: &#123;</span></span><br><span class="line"><span class="comment">//   add: function(count) &#123;</span></span><br><span class="line"><span class="comment">//     if (count &lt;= 10) &#123;   // 不符合也能看到  就是报警告</span></span><br><span class="line"><span class="comment">//       return true</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     return false   </span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;,</span></span><br></pre></td></tr></table></figure>



<h3 id="5、案例练习"><a href="#5、案例练习" class="headerlink" title="5、案例练习"></a>5、案例练习</h3><p>tab-control 的案例练习</p>
<h2 id="7-组件插槽"><a href="#7-组件插槽" class="headerlink" title="7.组件插槽"></a>7.组件插槽</h2><h3 id="1、认识插槽Slot作用"><a href="#1、认识插槽Slot作用" class="headerlink" title="1、认识插槽Slot作用"></a>1、认识插槽Slot作用</h3><p>在开发中，我们会经常封装一个个可复用的组件：</p>
<ul>
<li><p>前面我们会通过props传递给组件一些数据，让组件来进行展示</p>
</li>
<li><p>但是为了让这个组件具备更强的通用性，我们不能将组件中的内容限制为固定的div、span等等这些元素</p>
</li>
<li><p>比如某种情况下我们使用组件，希望组件显示的是一个按钮，某种情况下我们使用组件希望显示的是一张图片</p>
</li>
<li><p>我们应该让使用者可以决定某一块区域到底存放什么内容和元素</p>
</li>
</ul>
<p>举个栗子：假如定制一个通用的导航组件 — NavBar</p>
<ul>
<li><p>这个组件分成三块区域：左边-中间-右边，每块区域的内容是不固定</p>
</li>
<li><p>左边区域可能显示一个菜单图标，也可能显示一个返回按钮，可能什么都不显示</p>
</li>
<li><p>中间区域可能显示一个搜索框，也可能是一个列表，也可能是一个标题，等等</p>
</li>
<li><p>右边可能是一个文字，也可能是一个图标，也可能什么都不显示</p>
</li>
</ul>
<p>这时可以来定义插槽slot</p>
<ul>
<li><p>插槽的使用过程其实是抽取共性、预留不同</p>
</li>
<li><p>我们会将共同的元素、内容依然在组件内进行封装</p>
</li>
<li><p>同时会将不同的元素使用slot作为占位，让外部决定到底显示什么样的元素</p>
</li>
</ul>
<p>如何使用 slot</p>
<ul>
<li>Vue 中将 slot 元素作为承载分发内容的出口</li>
<li>在封装组件中，使用特殊的元素就可以为封装组件开启一个插槽</li>
<li>该插槽插入什么内容取决于父组件如何使用</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413113750153.png" alt="image-20230413113750153"></p>
<h3 id="2、插槽Slot基本使用"><a href="#2、插槽Slot基本使用" class="headerlink" title="2、插槽Slot基本使用"></a>2、插槽Slot基本使用</h3><p>有时候在使用插槽时，如果没有插入对应的内容，需要显示一个默认的内容</p>
<ul>
<li>这个默认的内容只会在没有提供插入的内容时，才会显示</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">父组件：</span><br><span class="line">	&lt;show-message title=<span class="string">&quot;哈哈&quot;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>我是按钮元素<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &lt;/show-message&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件：</span><br><span class="line">&lt;!-- 内容是一个按钮 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是默认内容 哈哈哈<span class="tag">&lt;/<span class="name">p</span>&gt;</span>   // 默认内容</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="3、具名插槽Slot使用"><a href="#3、具名插槽Slot使用" class="headerlink" title="3、具名插槽Slot使用"></a>3、具名插槽Slot使用</h3><p>如果一个组件中含有多个插槽，会发现默认情况下每个插槽都会获取到我们插入的内容来显示</p>
<p>即多个元素都有在一个插槽中展示</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413114755709.png" alt="image-20230413114755709"></p>
<p>而想要达到的效果是插槽对应的显示，这个时候我们就可以使用具名插槽</p>
<ul>
<li>具名插槽顾名思义就是给插槽起一个名字， 元素有一个特殊的 attribute：name</li>
<li>一个不带 name 的slot，会带有隐含的名字 default</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">父组件：</span><br><span class="line">  &lt;nav-bar&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">left</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span>&gt;</span> &#123;&#123;leftText&#125;&#125; <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">center</span>&gt;</span>  // # 语法糖</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">    </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:right</span>&gt;</span>  // 使用template元素 并 v-slot:name</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">  &lt;/nav-bar&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件：</span><br><span class="line">  &lt;div <span class="keyword">class</span>=<span class="string">&quot;nav-bar&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">slot</span>&gt;</span>   // 取 name</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;center&quot;</span>&gt;</span>center<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>动态插槽名：</p>
<p>目前我们使用的插槽名称都是固定的</p>
<ul>
<li>比如 v-slot:left、v-slot:center 等等</li>
<li>可以通过 v-slot:[dynamicSlotName] 方式动态绑定一个名称</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">父组件：</span><br><span class="line">  &lt;!-- nav-bar 只给一个插槽传入 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">nav-bar</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:</span>[<span class="attr">position</span>]&gt;</span>    // data 中定义默认的 position</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">nav-bar</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;position=&#x27;left&#x27;&quot;</span>&gt;</span>左边<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;position = &#x27;center&#x27;&quot;</span>&gt;</span>中间<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;position = &#x27;right&#x27;&quot;</span>&gt;</span>右边<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件：同上一个</span><br></pre></td></tr></table></figure>



<p>具名插槽使用的时候缩写</p>
<ul>
<li><p>跟 v-on 和 v-bind 一样，v-slot 也有缩写</p>
</li>
<li><p>即把参数之前的所有内容 (v-slot:) 替换为字符 #</p>
</li>
</ul>
<h3 id="4、作用域插槽Slot使用"><a href="#4、作用域插槽Slot使用" class="headerlink" title="4、作用域插槽Slot使用"></a>4、作用域插槽Slot使用</h3><p>在Vue中有渲染作用域的概念：</p>
<ul>
<li><p>父级模板里的所有内容都是在父级作用域中编译的</p>
</li>
<li><p>子模板里的所有内容都是在子作用域中编译的</p>
</li>
</ul>
<p>案例： </p>
<ul>
<li><p>案例中ChildCpn自然是可以访问自己作用域中的title内容的</p>
</li>
<li><p>但是在App中，是访问不了ChildCpn中的内容的，因为它们是跨作用域的访问</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413115537939.png" alt="image-20230413115537939"></p>
<h4 id="1-插槽作用域"><a href="#1-插槽作用域" class="headerlink" title="1.插槽作用域"></a>1.插槽作用域</h4><p>插槽可以访问到子组件中的内容是非常重要的</p>
<ul>
<li><p>当一个组件被用来渲染一个数组元素时，我们使用插槽，并且希望插槽中没有显示每项的内容</p>
</li>
<li><p>这个Vue给我们提供了作用域插槽</p>
</li>
</ul>
<p>案例：</p>
<ul>
<li><p>1.在App.vue中定义好数据</p>
</li>
<li><p>2.传递给 ShowNames 组件中</p>
</li>
<li><p>3.ShowNames 组件中遍历 names 数据</p>
</li>
<li><p>4.定义插槽的prop</p>
</li>
<li><p>5.通过 v-slot:default 的方式获取到 slot 的 props</p>
</li>
<li><p>6.使用 slotProps 中的 item 和 index</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413115833886.png" alt="image-20230413115833886"></p>
<p>简单理解：就是父组件传入数据插入到子组件，子组件对传入的数据进行遍历并插入到 slot 中，但是这时 slot 内默认的元素是写死的，我们希望这个元素可以被自定义，这时就使用作用域插槽</p>
<h4 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">父组件：</span><br><span class="line">   &lt;tab-control :titles=<span class="string">&quot;[&#x27;衣服&#x27;, &#x27;裤子&#x27;, &#x27;鞋子&#x27;]&quot;</span> @tab-item-click=<span class="string">&quot;tabItemClick&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">&quot;props&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123; props.item &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>   // 使用 a 元素展示传到子组件的 item</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">   &lt;/tab-control&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件：</span><br><span class="line">	&lt;template v-<span class="keyword">for</span>=<span class="string">&quot;(item, index) in titles&quot;</span> :key=<span class="string">&quot;item&quot;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tab-control-item&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;itemClick(index)&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      	<span class="attr">:class</span>=<span class="string">&quot;&#123; active: index === currentIndex &#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:item</span>=<span class="string">&quot;item&quot;</span>&gt;</span>   // 定义 :item = &quot;item&quot;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>  // 默认组件</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="1、独占默认插槽的缩写"><a href="#1、独占默认插槽的缩写" class="headerlink" title="1、独占默认插槽的缩写"></a>1、独占默认插槽的缩写</h5><ul>
<li>如果我们的插槽是默认插槽default，那么在使用的时候 v-slot:default&#x3D;”slotProps”可以简写为v-slot&#x3D;”slotProps”</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;tab-control :titles=<span class="string">&quot;[&#x27;衣服&#x27;, &#x27;裤子&#x27;, &#x27;鞋子&#x27;]&quot;</span> @tab-item-click=<span class="string">&quot;tabItemClick&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;props&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 独占默认插槽的简写 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- &lt;template v-slot=&quot;props&quot;&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>&#123;&#123; props.item &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">tab-control</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>并且如果我们的插槽只有默认插槽时，组件的标签可以被当做插槽的模板来使用，这样可以将 v-slot 直接用在组件上</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 如果只有一个默认插槽 那么template可以省略 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">tab-control</span> <span class="attr">:titles</span>=<span class="string">&quot;[&#x27;衣服&#x27;, &#x27;裤子&#x27;, &#x27;鞋子&#x27;]&quot;</span> @<span class="attr">tab-item-click</span>=<span class="string">&quot;tabItemClick&quot;</span> <span class="attr">v-slot</span>=<span class="string">&quot;props&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123;props.item&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">tab-control</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h5 id="2、默认插槽和具名插槽混合使用"><a href="#2、默认插槽和具名插槽混合使用" class="headerlink" title="2、默认插槽和具名插槽混合使用"></a>2、默认插槽和具名插槽混合使用</h5><ul>
<li><p>如果我们有默认插槽和具名插槽，那么按照完整的template来编写</p>
</li>
<li><p>只要出现多个插槽，请始终为所有的插槽使用完整的基于 template 的语法</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413120925169.png" alt="image-20230413120925169"></p>
<h3 id="5、非父子组件的通信"><a href="#5、非父子组件的通信" class="headerlink" title="5、非父子组件的通信"></a>5、非父子组件的通信</h3><p>在开发中构建了组件树之后，除了父子组件之间的通信之外，还会有非父子组件之间的通信</p>
<p>两种方式：</p>
<ul>
<li>Provide&#x2F;Inject</li>
<li>全局事件总线</li>
</ul>
<h4 id="1-依赖注入Provide-x2F-Inject"><a href="#1-依赖注入Provide-x2F-Inject" class="headerlink" title="1.依赖注入Provide&#x2F;Inject"></a>1.依赖注入Provide&#x2F;Inject</h4><h5 id="1、作用"><a href="#1、作用" class="headerlink" title="1、作用"></a>1、作用</h5><p>Provide&#x2F;Inject用于非父子组件之间共享数据</p>
<ul>
<li><p>比如有一些深度嵌套的组件，子组件想要获取父组件的部分内容</p>
</li>
<li><p>在这种情况下，如果我们仍然将props沿着组件链逐级传递下去，就会非常的麻烦</p>
</li>
</ul>
<p>对于这种情况可以使用 Provide 和 Inject </p>
<ul>
<li><p>无论层级结构有多深，父组件都可以作为其所有子组件的依赖提供者</p>
</li>
<li><p>父组件有一个 provide 选项来提供数据</p>
</li>
<li><p>子组件有一个 inject 选项来开始使用这些数据</p>
</li>
</ul>
<p>实际上可以将依赖注入看作是 “long range props”</p>
<ul>
<li><p>父组件不需要知道哪些子组件使用它 provide 的 property</p>
</li>
<li><p>子组件不需要知道 inject 的 property 来自哪里</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413160855262.png" alt="image-20230413160855262" style="zoom:50%;" />



<h5 id="2、基本使用"><a href="#2、基本使用" class="headerlink" title="2、基本使用"></a>2、基本使用</h5><p>所使用结构类似于：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413161943865.png" alt="image-20230413161943865"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230413162151996.png" alt="image-20230413162151996"></p>
<h5 id="3、Provide-和-Inject-函数的写法"><a href="#3、Provide-和-Inject-函数的写法" class="headerlink" title="3、Provide 和 Inject 函数的写法"></a>3、Provide 和 Inject 函数的写法</h5><ul>
<li>如果Provide中提供的一些数据是来自data，那可能会想要通过 this 获取</li>
<li>由于 this 指向的问题，对象不能形成作用域，获取不了 data 中的数据，所以使用函数写法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>.<span class="property">vue</span>:</span><br><span class="line">    <span class="comment">// provide 一般写为函数  options api</span></span><br><span class="line">    <span class="title function_">provide</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;wbh&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="variable language_">this</span>.<span class="property">message</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">HomeBanner</span>:</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>homebanner: &#123;&#123;name&#125;&#125; - &#123;&#123;age&#125;&#125;-&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">inject</span>: [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;message&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="4、处理响应式数据"><a href="#4、处理响应式数据" class="headerlink" title="4、处理响应式数据"></a>4、处理响应式数据</h5><p>此时，如果我们修改了this.names的内容，那么使用 message 的子组件不是响应式的</p>
<ul>
<li>这是因为当我们修改了 message 之后，之前在 provide 中引入的 this.message 本身并不是响应式的</li>
</ul>
<p>怎么让的数据变成响应式</p>
<ul>
<li><p>可以使用响应式的一些API来完成这些功能，比如说computed函数</p>
</li>
<li><p>这个computed是vue3的新特性</p>
</li>
</ul>
<p>注意：</p>
<ul>
<li><p>在使用 message 的时候需要获取其中的 value</p>
</li>
<li><p>这是因为 computed 返回的是一个ref对象，需要取出其中的 value 来使用</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>.<span class="property">vue</span>:  </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>app: &#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>   <span class="comment">// 查看message的改变</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;message = &#x27;hello wodrds&#x27;&quot;</span>&gt;</span>修改message<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>  <span class="comment">// 引入 computed script中 export外</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">provide</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;wbh&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 拿到的是 message 的引用 返回的是一个ref对象，需要使用.value来解包才能获取其真正的值</span></span><br><span class="line">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">message</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">HomeBanner</span>.<span class="property">vue</span>:</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>homebanner: &#123;&#123;name&#125;&#125; - &#123;&#123;age&#125;&#125;-&#123;&#123;message.value&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="2-全局事件总线使用"><a href="#2-全局事件总线使用" class="headerlink" title="2.全局事件总线使用"></a>2.全局事件总线使用</h4><p>Vue3从实例中移除了 $on、$off 和 $once 方法，如果希望继续使用全局事件总线，要通过第三方的库：</p>
<ul>
<li><p>Vue3官方有推荐一些库，例如 mitt 或 tiny-emitter</p>
</li>
<li><p>主要介绍 hy-event-store 的使用</p>
</li>
</ul>
<p>前期工作</p>
<ul>
<li><p>安装：npm install hy-event-bus</p>
</li>
<li><p>封装一个工具 eventBus.js</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HYEventBus</span> &#125; <span class="keyword">from</span> <span class="string">&quot;hy-event-store&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> eventBus = <span class="keyword">new</span> <span class="title class_">HYEventBus</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> eventBus</span><br></pre></td></tr></table></figure>

<p>使用：监听，结构：App -&gt; Home -&gt; HomeBanner</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>.<span class="property">vue</span>:</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>App message: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">home</span>&gt;</span><span class="tag">&lt;/<span class="name">home</span>&gt;</span></span></span><br><span class="line">  <span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">&quot;./utils/event-bus&quot;</span>;  <span class="comment">// 在需要使用时间总线的地方导入</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 事件监听</span></span><br><span class="line">      eventBus.<span class="title function_">on</span>(<span class="string">&quot;whyEvent&quot;</span>, <span class="function">(<span class="params">name, age, height</span>) =&gt;</span> &#123;  <span class="comment">// 监听事件</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;whyEvent事件在app中的监听&quot;</span>, name, age, height)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">`name:<span class="subst">$&#123;name&#125;</span>, age:<span class="subst">$&#123;age&#125;</span>,height:<span class="subst">$&#123;height&#125;</span>`</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">HomeBanner</span>:</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;bannerBtnClick&quot;</span>&gt;</span>banner按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">&#x27;./utils/event-bus&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">bannerBtnClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bannerBtnClick&quot;</span>)</span><br><span class="line">        eventBus.<span class="title function_">emit</span>(<span class="string">&quot;whyEvent&quot;</span>, <span class="string">&quot;why&quot;</span>, <span class="number">23</span>, <span class="number">1.94</span>)  <span class="comment">// 传出事件，可以加参数</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>使用：事件取消，结构：App -&gt; Category</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>:  添加了按钮移除 category 页面的展示，目的：在目录页面销毁时给其取消事件监听</span><br><span class="line">&lt;button @click=<span class="string">&quot;isShowCategory = false&quot;</span>&gt;是否显示category&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">category</span> <span class="attr">v-if</span>=<span class="string">&quot;isShowCategory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">category</span>&gt;</span></span>  <span class="comment">// 定义变量记录页面是否展示</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Category</span>:</span><br><span class="line">  <span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">&#x27;./utils/event-bus&#x27;</span>;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">whyEventHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;在category中监听&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,  </span><br><span class="line">    <span class="comment">// 由于这里需要使用箭头函数，便于使用 this，但是在移除监听时第二个参数需要是事件监听的函数</span></span><br><span class="line">    <span class="comment">// 为了拿到这个函数，可以将函数放在 methods 中，使用 this 指向这个函数</span></span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">      eventBus.<span class="title function_">on</span>(<span class="string">&quot;whyEvent&quot;</span>, <span class="variable language_">this</span>.<span class="property">whyEventHandler</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 移除监听</span></span><br><span class="line">    <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;categoty unmounted&quot;</span>)</span><br><span class="line">      eventBus.<span class="title function_">off</span>(<span class="string">&quot;whyEvent&quot;</span>, <span class="variable language_">this</span>.<span class="property">whyEventHandler</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li><p>在一般的组件通信应使用 Vue 官方推荐的方法</p>
</li>
<li><p>只有需要在很多组件中进行传递时才考虑使用事件总线</p>
</li>
</ul>
<h2 id="8-额外知识补充"><a href="#8-额外知识补充" class="headerlink" title="8.额外知识补充"></a>8.额外知识补充</h2><h3 id="1、生命周期"><a href="#1、生命周期" class="headerlink" title="1、生命周期"></a>1、生命周期</h3><p>什么是生命周期</p>
<ul>
<li><p>生物学上，生物生命周期指得是一个生物体在生命开始到结束周而复始所历经的一系列变化过程</p>
</li>
<li><p>每个组件都可能会经历从创建、挂载、更新、卸载等一系列的过程</p>
</li>
<li><p>在这个过程中的某一个阶段，我们可能会想要添加一些属于自己的代码逻辑（比如组件创建完后就请求一些服务器数据）</p>
</li>
<li><p>如何可以知道目前组件正在哪一个过程？Vue 提供了组件的生命周期函数</p>
</li>
</ul>
<p>生命周期函数</p>
<ul>
<li><p>生命周期函数是一些钩子函数（回调函数），在某个时间会被Vue源码内部进行回调</p>
</li>
<li><p>通过对生命周期函数的回调，我们可以知道目前组件正在经历什么阶段</p>
</li>
<li><p>那么我们就可以在该生命周期中编写属于自己的逻辑代码了</p>
</li>
</ul>
<h4 id="生命周期的流程"><a href="#生命周期的流程" class="headerlink" title="生命周期的流程"></a>生命周期的流程</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230415110343000.png" alt="image-20230415110343000"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">    <span class="comment">// 1.组件被创建之前</span></span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeCreate&quot;</span>)</span><br><span class="line">    &#125;,  </span><br><span class="line">    <span class="comment">// 2.组件被创建完成</span></span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件被创建完成&quot;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1.发送网络请求，请求数据&quot;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;2.监听eventBus事件&quot;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;3.监听watch数据&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 3.组件template准备被挂载</span></span><br><span class="line">    <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeMount&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 4.组件template被挂载：x虚拟DOM -&gt; 真实DOM</span></span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;mounted&quot;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1.获取DOM&quot;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;2.使用DOM&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 5.数据发生改变</span></span><br><span class="line">    <span class="comment">// 5.1准备更新DOM</span></span><br><span class="line">    <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeUpdate&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 5.2 更新DOM</span></span><br><span class="line">    <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;updated&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 6准备卸载VNode -&gt; DOM元素  </span></span><br><span class="line">    <span class="comment">// 6.1卸载之前</span></span><br><span class="line">    <span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeUnmoute&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 6.2 DOM元素被卸载完成</span></span><br><span class="line">    <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;unmounted&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">在 <span class="title class_">App</span>.<span class="property">vue</span>中查看不到卸载效果，在子组件中可以使用v-<span class="keyword">if</span>查看</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230415110746460.png" alt="image-20230415110746460"></p>
<h3 id="2、ref-获取元素组件"><a href="#2、ref-获取元素组件" class="headerlink" title="2、ref 获取元素组件"></a>2、ref 获取元素组件</h3><p>某些情况下，我们在组件中想要直接获取到元素对象或者子组件实例</p>
<ul>
<li><p>在Vue开发中我们是不推荐进行DOM操作的</p>
</li>
<li><p>可以给元素或者组件绑定一个ref的attribute属性</p>
</li>
</ul>
<p>组件实例有一个$refs属性：</p>
<ul>
<li>它一个对象Object，持有注册过 ref attribute 的所有 DOM 元素和组件实例</li>
</ul>
<p>$parent和$root：可以通过$parent来访问父元素</p>
<ul>
<li>HelloWorld.vue的实现：<ul>
<li>这里我们也可以通过$root来实现，因为App是我们的根组件</li>
</ul>
</li>
</ul>
<p>注意：在Vue3中已经移除了$children的属性，所以不可以使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   &lt;h2 ref=<span class="string">&quot;title&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;title&quot;</span> :style=<span class="string">&quot;&#123; color: titleColor &#125;&quot;</span>&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ref</span>=<span class="string">&quot;btn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeTitle&quot;</span>&gt;</span>修改title<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>    </span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">     <span class="title function_">changeTitle</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">// 1.不要主动的去获取DOM 并且修改DOM内容</span></span><br><span class="line">       <span class="comment">// this.message = &quot;你好啊，李银河!&quot;,</span></span><br><span class="line">       <span class="comment">// this.titleColor = &quot;blue&quot;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">// 2.获取h2/button元素</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">title</span>)</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">btn</span>)</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 3.获取 banner 子组件:组件实例</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">banner</span>)</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 3.1 在父组件中可以主动调用子组件的对象方法</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">banner</span>.<span class="title function_">bannerClick</span>()</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 3.2 获取banner组件实例，获取banner组件中的元素</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">banner</span>.<span class="property">$el</span>)</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 3.3 如果banner template是多个根 那么会拿到第一个node节点</span></span><br><span class="line">       <span class="comment">// 注意：在开发中不推荐一个组件的template中有多个根元素</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">banner</span>.<span class="property">$el</span>.<span class="property">nextSibling</span>)</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 4.组件实例还有两个实例</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$parent</span>)  <span class="comment">// 获取父组件</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$root</span>)  <span class="comment">// 获取根组件</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h3 id="3、动态切换组件"><a href="#3、动态切换组件" class="headerlink" title="3、动态切换组件"></a>3、动态切换组件</h3><p>比如在想要实现了一个功能：点击一个tab-bar，切换不同的组件显示</p>
<p>可以通过两种不同的实现思路来实现：</p>
<ul>
<li>方式一：通过v-if来判断，显示不同的组件</li>
<li>方式二：动态组件的方式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span>第一种做法：v-<span class="keyword">if</span>判断逻辑，以显示不同的组件 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;currentIndex === 0&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">home</span>&gt;</span><span class="tag">&lt;/<span class="name">home</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else-if</span>=<span class="string">&quot;currentIndex === 1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">About</span>&gt;</span><span class="tag">&lt;/<span class="name">About</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else-if</span>=<span class="string">&quot;currentIndex === 2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Category</span>&gt;</span><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">2.</span>第二种做法：动态组件component --&gt;</span><br><span class="line">&lt;!-- is中的组件需要来自两个地方：全局注册的组件/局部注册的组件 --&gt;</span><br><span class="line"><span class="comment">//	tabs </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;tabs[currentIndex]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="其它操作"><a href="#其它操作" class="headerlink" title="其它操作"></a>其它操作</h4><p>父组件传数据到子组件进行接收</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;component name=<span class="string">&quot;wbh&quot;</span> :age=<span class="string">&quot;age&quot;</span> :is=<span class="string">&quot;currentTab&quot;</span>&gt;&lt;/component&gt;</span><br></pre></td></tr></table></figure>

<p>在子组件使用 props 接收</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="title class_">Home</span>组件: &#123;&#123;name&#125;&#125;-&#123;&#123;age&#125;&#125;&lt;/h2&gt;    </span><br><span class="line"></span><br><span class="line">   <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">age</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>



<p>子组件传数据（事件）到父组件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件定义事件并传出：</span><br><span class="line">&lt;button @click=<span class="string">&quot;homeClick&quot;</span>&gt;homeBtn&lt;/button&gt;</span><br><span class="line"><span class="attr">$emits</span>: [<span class="string">&quot;homeClick&quot;</span>],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">homeClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;homeClick&quot;</span>, <span class="string">&quot;home&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">父组件接收并使用参数：</span><br><span class="line">&lt;component @homeClick=<span class="string">&quot;homeClick&quot;</span> :is=<span class="string">&quot;currentTab&quot;</span>&gt;&lt;/component&gt;</span><br><span class="line"></span><br><span class="line"><span class="title function_">homeClick</span>(<span class="params">arg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;HomeClick:&quot;</span>, arg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4、Keep-Alive-的使用"><a href="#4、Keep-Alive-的使用" class="headerlink" title="4、Keep-Alive 的使用"></a>4、Keep-Alive 的使用</h3><p>先对之前的案例中About组件进行改造：</p>
<ul>
<li>在其中增加了一个按钮，点击可以递增的功能</li>
</ul>
<p>比如将counter点到10，那么在切换到home再切换回来about时，状态是否可以保持？</p>
<ul>
<li><p>答案是否定的</p>
</li>
<li><p>因为默认情况下，在切换组件后，about组件会被销毁掉，再次回来时会重新创建组件</p>
</li>
</ul>
<p>但是，在开发中某些情况我们希望继续保持组件的状态，而不是销毁掉，这个时候我们就可以使用一个内置组件：keep-alive</p>
<p>keep-alive 的属性</p>
<ul>
<li>include - string | RegExp | Array。只有名称匹配的组件会被缓存</li>
<li>exclude - string | RegExp | Array。任何名称匹配的组件都不会被缓存</li>
<li>max - number | string。最多可以缓存多少组件实例，一旦达到这个数字，那么缓存组件中最近没有被访问的实例会被销毁</li>
</ul>
<p>include 和 exclude prop 允许组件有条件地缓存：</p>
<ul>
<li><p>二者都可以用逗号分隔字符串、正则表达式或一个数组来表示</p>
</li>
<li><p>匹配首先检查组件自身的 name 选项</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;view&quot;</span>&gt;</span><br><span class="line">    &lt;!-- <span class="attr">include</span>:以逗号隔开且不能添加空格 --&gt;</span><br><span class="line">    &lt;!-- <span class="attr">include</span>:名称来自于组件定义时name选项 --&gt;</span><br><span class="line">    <span class="comment">// 对于需要保持活性的组件，需要在其根组件定义 name 属性，使用的便是此name名称</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;home,about&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;currentTab&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>



<h4 id="缓存组件的生命周期"><a href="#缓存组件的生命周期" class="headerlink" title="缓存组件的生命周期"></a>缓存组件的生命周期</h4><p>对于缓存的组件来说，再次进入时，我们是不会执行created或者mounted等生命周期函数的：</p>
<ul>
<li><p>但是有时候我们确实希望监听到何时重新进入到了组件，何时离开了组件</p>
</li>
<li><p>这个时候我们可以使用activated 和 deactivated 这两个生命周期钩子函数来监听</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对于保持keep-alive组件，监听有没有获取</span></span><br><span class="line"><span class="comment">// keep-alive组件进入活跃状态</span></span><br><span class="line"><span class="title function_">activated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;home activated&quot;</span>)</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="title function_">deactivated</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;home deactivated&quot;</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="5、异步组件的使用"><a href="#5、异步组件的使用" class="headerlink" title="5、异步组件的使用"></a>5、异步组件的使用</h3><p>在此之前，我们需要对项目通过 webpack 的打包进行了解</p>
<ul>
<li>一般在项目完成后，打包后 js 文件夹中有四个文件</li>
<li>app 中默认存放的是全部的逻辑代码</li>
<li>chunk-vendors 存放的是相关的第三方引入的库的版本</li>
</ul>
<h4 id="1-所以默认的打包过程"><a href="#1-所以默认的打包过程" class="headerlink" title="1.所以默认的打包过程"></a>1.所以默认的打包过程</h4><ul>
<li><p>默认情况下，在构建整个组件树的过程中，因为组件和组件之间是通过模块化直接依赖的，那么webpack在打包时就会将组 件模块打包到一起（比如一个app.js文件中）</p>
</li>
<li><p>这个时候随着项目的不断庞大，app.js文件的内容过大，会造成首屏的渲染速度变慢</p>
</li>
</ul>
<p>打包时，代码的分包：</p>
<ul>
<li>所以，对于一些不需要立即使用的组件，我们可以单独对它们进行拆分，拆分成一些小的代码块chunk.js</li>
<li>这些chunk.js会在需要时从服务器加载下来，并且运行代码，显示对应的内容</li>
</ul>
<h4 id="2-文件的分包"><a href="#2-文件的分包" class="headerlink" title="2.文件的分包"></a>2.文件的分包</h4><p>对于 utils 之类的 js 文件，想对其进行分包</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// import &#123; sum &#125; from &#x27;./utils/math.js&#x27;  </span></span><br><span class="line"><span class="comment">// sum(10, 20) // 默认在main.js中的引入与使用是不能对其进行分包</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// js 文件的分包</span></span><br><span class="line"><span class="comment">// import(&quot;./utils/math&quot;).then(res =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   res.sum(10, 20)</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure>



<h4 id="3-实现异步组件"><a href="#3-实现异步组件" class="headerlink" title="3.实现异步组件"></a>3.实现异步组件</h4><p>Vue中实现异步组件：对于想要单独分包的组件</p>
<ul>
<li>如果我们的项目过大了，对于某些组件我们希望通过异步的方式来进行加载（目的是可以对其进行分包处理），那么Vue中给我们提供了一个函数：defineAsyncComponent</li>
</ul>
<p>defineAsyncComponent接受两种类型的参数</p>
<ul>
<li><p>类型一：工厂函数，该工厂函数需要返回一个Promise对象</p>
</li>
<li><p>类型二：接受一个对象类型，对异步函数进行配置</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>  <span class="comment">// 先导入对应的方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncCategory</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./views/Category.vue&quot;</span>))  <span class="comment">// 导入方式</span></span><br><span class="line">  </span><br><span class="line">	<span class="title class_">Category</span>: <span class="title class_">AsyncCategory</span>  <span class="comment">// 注册方式</span></span><br></pre></td></tr></table></figure>

<p>类型二的写法：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230415171317358.png" alt="image-20230415171317358"></p>
<h3 id="6、组件的-v-model"><a href="#6、组件的-v-model" class="headerlink" title="6、组件的 v-model"></a>6、组件的 v-model</h3><h4 id="1-基本使用-1"><a href="#1-基本使用-1" class="headerlink" title="1.基本使用"></a>1.基本使用</h4><p>在input中可以使用v-model来完成双向绑定：</p>
<ul>
<li><p>这个时候往往会非常方便，因为v-model默认帮助我们完成了两件事</p>
</li>
<li><p>v-bind:value 的数据绑定和 @input 的事件监听</p>
</li>
</ul>
<p>如果现在封装了一个组件，其他地方在使用这个组件时，是否也可以使用 v-model 来同时完成这两个功能？</p>
<ul>
<li>也是可以的，vue也支持在组件上使用v-model</li>
</ul>
<p>当我们在组件上使用的时候，等价于如下的操作：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">2.</span>组件v-<span class="attr">model</span>:默认的 modelValue --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">counter</span> <span class="attr">v-model</span>=<span class="string">&quot;appCounter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">counter</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 两行代码等价  默认固定写为 modelValue</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">counter</span> <span class="attr">:modelValue</span>=<span class="string">&quot;appCounter&quot;</span> @<span class="attr">update:modelValue</span>=<span class="string">&quot;appCounter = $event&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">counter</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">在子组件中：</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Counter: &#123;&#123;modelValue&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCounter&quot;</span>&gt;</span>修改counter<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"><span class="comment">// 接受传过来的 modelValue</span></span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">modelValue</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="comment">// 修改modelValue：固定写法</span></span><br><span class="line">    <span class="attr">emits</span>: [<span class="string">&quot;update:modelValue&quot;</span>],</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">changeCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="comment">// 999 是改变 App 中绑定的 appCounter 的值</span></span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&quot;update:modelValue&quot;</span>, <span class="number">999</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>和input元素不同的只是属性的名称和事件触发的名称而已；</p>
<h4 id="2-绑定多个属性"><a href="#2-绑定多个属性" class="headerlink" title="2.绑定多个属性"></a>2.绑定多个属性</h4><p>通过v-model是直接绑定了一个属性，如果想要绑定多个属性呢？也就是在一个组件上使用多个v-model是否可以实现呢？</p>
<ul>
<li><p>默认情况下的v-model其实是绑定了 modelValue 属性和 @update:modelValue的事件</p>
</li>
<li><p>如果希望绑定更多，可以给 v-model 传入一个参数，那么这个参数的名称就是我们绑定属性的名称</p>
</li>
</ul>
<p>v-model:why 相当于做了两件事：</p>
<ul>
<li><p>绑定了message 属性</p>
</li>
<li><p>监听了 @update:message 的事件</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">3.</span>组件的v-model：自定义名称counter --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">counter2</span> <span class="attr">v-model:counter</span>=<span class="string">&quot;appCounter&quot;</span> <span class="attr">v-model:why</span>=<span class="string">&quot;appWhy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">counter2</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">why</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">emits</span>: [<span class="string">&quot;update:counter&quot;</span>, <span class="string">&quot;update:why&quot;</span>],</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">changeCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&quot;update:counter&quot;</span>, <span class="number">999</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">changeWhy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&quot;update:why&quot;</span>, <span class="string">&quot;kobe&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7、组件的混入"><a href="#7、组件的混入" class="headerlink" title="7、组件的混入"></a>7、组件的混入</h3><h4 id="1-认识-Mixin"><a href="#1-认识-Mixin" class="headerlink" title="1.认识 Mixin"></a>1.认识 Mixin</h4><p>目前我们是使用组件化的方式在开发整个Vue的应用程序，但是组件和组件之间有时候会存在相同的代码逻辑，我们希望对相同的代码逻辑进行抽取</p>
<p>在 Vue2 和 Vue3 中都支持的一种方式就是使用Mixin来完成：</p>
<ul>
<li><p>Mixin提供了一种非常灵活的方式，来分发Vue组件中的可复用功能</p>
</li>
<li><p>一个Mixin对象可以包含任何组件选项</p>
</li>
<li><p>当组件使用 Mixin 对象时，所有 Mixin 对象的选项将被混合进入该组件本身的选项中</p>
</li>
</ul>
<h4 id="2-基本使用"><a href="#2-基本使用" class="headerlink" title="2.基本使用"></a>2.基本使用</h4><p>将重复的对象抽入一个 js 文件中：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;hello world&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;message&quot;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在需要使用的地方引入</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> messageMixin <span class="keyword">from</span> <span class="string">&#x27;../mixins/message-mixin.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">mixins</span>: [messageMixin]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-合并规则"><a href="#3-合并规则" class="headerlink" title="3.合并规则"></a>3.合并规则</h4><p>如果Mixin对象中的选项和组件对象中的选项发生了冲突，那么Vue会如何操作呢？</p>
<p>这里分成不同的情况来进行处理</p>
<p>情况一：如果是data函数的返回值对象</p>
<ul>
<li><p>返回值对象默认情况下会进行合并</p>
</li>
<li><p>如果data返回值对象的属性发生了冲突，那么会保留组件自身的数据</p>
</li>
</ul>
<p>情况二：如何生命周期钩子函数</p>
<ul>
<li>生命周期的钩子函数会被合并到数组中，都会被调用</li>
</ul>
<p>情况三：值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象</p>
<ul>
<li><p>比如都有methods选项，并且都定义了方法，那么它们都会生效</p>
</li>
<li><p>但是如果对象的key相同，那么会取组件对象的键值对</p>
</li>
</ul>
<h4 id="4-全局混入-Mixin"><a href="#4-全局混入-Mixin" class="headerlink" title="4.全局混入 Mixin"></a>4.全局混入 Mixin</h4><p>如果组件中的某些选项，是所有的组件都需要拥有的，那这时可以使用全局的mixin</p>
<ul>
<li><p>全局的Mixin可以使用应用app的方法 mixin 来完成注册</p>
</li>
<li><p>一旦注册，那么全局混入的选项将会影响每一个组件</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;mixin created&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="9-Composition-API"><a href="#9-Composition-API" class="headerlink" title="9.Composition API"></a>9.Composition API</h2><h3 id="1、认识-CompositionAPI"><a href="#1、认识-CompositionAPI" class="headerlink" title="1、认识 CompositionAPI"></a>1、认识 CompositionAPI</h3><h4 id="1-Options-API的弊端"><a href="#1-Options-API的弊端" class="headerlink" title="1.Options API的弊端"></a>1.Options API的弊端</h4><ul>
<li><p>Options API的一大特点就是在对应的属性中编写对应的功能模块</p>
</li>
<li><p>比如data定义数据、methods中定义方法、computed中定义计算属性、watch中监听属性改变，也包括生命周期钩子</p>
</li>
</ul>
<p>但是这种代码有一个很大的弊端：</p>
<ul>
<li><p>当我们实现某一个功能时，这个功能对应的代码逻辑会被拆分到各个属性中</p>
</li>
<li><p>当我们组件变得更大、更复杂时，逻辑关注点的列表就会增长，那么同一个功能的逻辑就会被拆分的很分散</p>
</li>
<li><p>尤其对于那些一开始没有编写这些组件的人来说，这个组件的代码是难以阅读和理解的（阅读组件的其他人）</p>
</li>
</ul>
<p>对于非常大的组件</p>
<ul>
<li>这种碎片化的代码使用理解和维护这个复杂的组件变得异常困难，并且隐藏了潜在的逻辑问题</li>
<li>并且当我们处理单个逻辑关注点时，需要不断的跳到相应的代码块中</li>
</ul>
<p>如果我们能将同一个逻辑关注点相关的代码收集在一起会更好</p>
<p>这就是Composition API想要做的事情，以及可以帮助我们完成的事情</p>
<p>也有人把Vue Composition API简称为VCA</p>
<h4 id="2-认识-Composition-API"><a href="#2-认识-Composition-API" class="headerlink" title="2.认识 Composition API"></a>2.认识 Composition API</h4><p>编写位置：在Vue组件中，这个位置是 setup 函数</p>
<p>setup其实就是组件的另外一个选项：</p>
<ul>
<li><p>只不过这个选项强大到我们可以用它来替代之前所编写的大部分其他选项</p>
</li>
<li><p>比如methods、computed、watch、data、生命周期等等</p>
</li>
</ul>
<h3 id="2、Setup-函数的基本使用"><a href="#2、Setup-函数的基本使用" class="headerlink" title="2、Setup 函数的基本使用"></a>2、Setup 函数的基本使用</h3><h4 id="setup-函数的使用"><a href="#setup-函数的使用" class="headerlink" title="setup 函数的使用"></a>setup 函数的使用</h4><h5 id="1、setup-函数的参数"><a href="#1、setup-函数的参数" class="headerlink" title="1、setup 函数的参数"></a>1、setup 函数的参数</h5><p>它主要有两个参数：第一个参数：props；第二个参数：context</p>
<p>props 就是父组件传递过来的属性会被放到 props 对象中，我们在setup中如果需要使用，那么就可以直接通过props参数获取：</p>
<ul>
<li><p>对于定义props的类型，还是和之前的规则是一样的，在props选项中定义</p>
</li>
<li><p>并且在template中依然是可以正常去使用props中的属性，比如message</p>
</li>
<li><p>如果在setup函数中想要使用props，那么不可以通过 this 去获取</p>
</li>
<li><p>因为props有直接作为参数传递到setup函数中，所以可以直接通过参数来使用即可</p>
</li>
</ul>
<p>另一个参数：context，我们也称之为是一个SetupContext</p>
<p>它里面包含三个属性：</p>
<ul>
<li><p>attrs：所有的非prop的attribute</p>
</li>
<li><p>slots：父组件传递过来的插槽（这个在以渲染函数返回时会有作用）</p>
</li>
<li><p>emit：当我们组件内部需要发出事件时会用到emit（因为我们不能访问this，所以不可以通过 this.$emit发出事件）</p>
</li>
</ul>
<h5 id="2、setup-函数的返回值"><a href="#2、setup-函数的返回值" class="headerlink" title="2、setup 函数的返回值"></a>2、setup 函数的返回值</h5><p>setup既然是一个函数，那么它也可以有返回值</p>
<ul>
<li><p>setup的返回值可以在模板 template 中被使用</p>
</li>
<li><p>也就是说我们可以通过 setup 的返回值来替代data选项</p>
</li>
</ul>
<p>甚至是我们可以返回一个执行函数来代替在methods中定义的方法：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230417193706344.png" alt="image-20230417193706344"></p>
<p>如果将 counter 在 increment 或者 decrement进行操作时，是否可以实现界面的响应式呢？</p>
<ul>
<li><p>答案是不可以</p>
</li>
<li><p>这是因为对于一个定义的变量来说，默认情况下，Vue并不会跟踪它的变化，来引起界面的响应式操作</p>
</li>
</ul>
<p>初体验：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">  &lt;div <span class="keyword">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;!-- 对于 template 中的 ref 对象会自动解包 不需要 .<span class="property">value</span>获取值 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>  <span class="comment">// 数据只有在ref包裹来实现响应式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 1.定义counter的内容</span></span><br><span class="line">    <span class="comment">// 默认定义的数据都不是响应式数据</span></span><br><span class="line">    <span class="keyword">let</span> counter = <span class="title function_">ref</span>(<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      counter.<span class="property">value</span>++</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      counter.<span class="property">value</span>--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      counter, increment, decrement</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>抽取函数：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">抽取到 js 文件中：</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;</span><br><span class="line"></span><br><span class="line">export default function useCounter() &#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>.<span class="property">vue</span>:</span><br><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;./hooks/useCounter.js&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; counter, increment, decrement &#125; = <span class="title function_">useCounter</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...<span class="title function_">useCounter</span>()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="3、Setup-中数据的响应式"><a href="#3、Setup-中数据的响应式" class="headerlink" title="3、Setup 中数据的响应式"></a>3、Setup 中数据的响应式</h3><h4 id="1-Reactive-API"><a href="#1-Reactive-API" class="headerlink" title="1.Reactive API"></a>1.Reactive API</h4><p>如果想为在 setup 中定义的数据提供响应式的特性，可以使用 reactive 的函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">message</span>: &#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>账号: &#123;&#123;account.username&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>密码: &#123;&#123;account.password&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 1.定义普通的数据：可以正常的被使用</span></span><br><span class="line">    <span class="comment">// 缺点：数据不是响应式的</span></span><br><span class="line">    <span class="keyword">let</span> message = <span class="string">&quot;hello world&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.定义响应式数据</span></span><br><span class="line">    <span class="comment">// 2.1 reactive函数：定义复杂类型的数据(数组、对象)</span></span><br><span class="line">    <span class="keyword">const</span> account = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&quot;coderwhy&quot;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&quot;123456&quot;</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>原因：</p>
<ul>
<li><p>因为当使用reactive函数处理数据之后，数据再次被使用时就会进行依赖收集</p>
</li>
<li><p>当数据发生改变时，所有收集到的依赖都是进行对应的响应式操作（比如更新界面）</p>
</li>
<li><p>事实上，我们编写的data选项，也是在内部交给了reactive函数将其编程响应式对象的</p>
</li>
</ul>
<h4 id="2-Ref-API"><a href="#2-Ref-API" class="headerlink" title="2.Ref API"></a>2.Ref API</h4><p>reactive API对传入的类型是有限制的，它要求必须传入的是一个对象或者数组类型</p>
<p>如果传入一个基本数据类型（String、Number、Boolean）会报一个警告</p>
<p>Vue3 提供了另外一个API：ref API</p>
<ul>
<li><p>ref 会返回一个可变的响应式对象，该对象作为一个响应式的引用维护着它内部的值，这就是 ref 名称的来源</p>
</li>
<li><p>它内部的值是在 ref 的 value 属性中被维护的</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;当前计数: &#123;&#123;counter&#125;&#125;&lt;/h2&gt;</span><br><span class="line"><span class="comment">// 2.2 ref 函数：定义简单类型的数据（也可以定义复杂数据类型的数据）</span></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)  <span class="comment">// 返回的是 ref 对象</span></span><br></pre></td></tr></table></figure>



<p>注意：</p>
<ul>
<li>在模板中引入 ref 的值时，Vue 会自动帮助进行解包操作，所以并不需要在模板中通过 ref.value 的方式来使用</li>
<li>但是在 setup 函数内部，它依然是一个 ref 引用， 所以对其进行操作时依然需要使用 ref.value的方式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 默认情况下在template中使用ref时，vue会自动对其进行解包（取出value） --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>  <span class="comment">// 调用函数</span></span><br><span class="line">&lt;!-- 也不需要写.<span class="property">value</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter++&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    counter.<span class="property">value</span>++  <span class="comment">// 在script中都需要写.value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-Ref-自动解包"><a href="#3-Ref-自动解包" class="headerlink" title="3.Ref 自动解包"></a>3.Ref 自动解包</h4><p>模板中的解包是浅层的解包</p>
<ul>
<li>在别的对象中引用 ref 对象时，如下</li>
<li>在以前是浅层解包（.value），现在是自动解包，除了在别的对象中引用 ref 对象且进行修改</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- vue3<span class="number">.1</span>之前需要添加value --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123;&#123; info.counter &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- 这儿又必须加上.<span class="property">value</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;info.counter.value++&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;!-- 总结：使用时不需要使用.<span class="property">value</span>,修改时需要写上.<span class="property">value</span> --&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>) </span><br><span class="line"><span class="keyword">const</span> info = &#123;</span><br><span class="line">    counter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果将 ref 放到一个 reactive 的属性当中，那么在模板中使用时，它会自动解包：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230417200714193.png" alt="image-20230417200714193"></p>
<h4 id="4-reactive-和-ref-的使用总结"><a href="#4-reactive-和-ref-的使用总结" class="headerlink" title="4.reactive 和 ref 的使用总结"></a>4.reactive 和 ref 的使用总结</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">  <span class="comment">// 定义响应式数据：reactive/ref</span></span><br><span class="line">  <span class="comment">// 强调：ref也可以定义复杂的数据</span></span><br><span class="line">  <span class="keyword">const</span> info = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1.reactive的应用场景</span></span><br><span class="line">  <span class="comment">// 1.1 条件一：reactive应用于本地的数据</span></span><br><span class="line">  <span class="comment">// 1.2 条件二：多个数据之间是有关系/联系（聚合的数据，组织在一起会有特定的作用）</span></span><br><span class="line">  <span class="keyword">const</span> account = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;coderwhy&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> username = <span class="title function_">ref</span>(<span class="string">&quot;coderwhy&quot;</span>)</span><br><span class="line">  <span class="keyword">const</span> password = <span class="title function_">ref</span>(<span class="string">&quot;123456&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.ref 的应用场景：其他的场景基本都用ref（computed）</span></span><br><span class="line">  <span class="comment">// 2.1 定义本地的一些简单数据</span></span><br><span class="line">  <span class="keyword">const</span> message = <span class="title function_">ref</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">  <span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;why&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.2 定义从网络中获取的数据也是使用ref</span></span><br><span class="line">  <span class="comment">// const musics = reactive([])</span></span><br><span class="line">  <span class="keyword">const</span> musics = <span class="title function_">ref</span>([])</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> serverMusics = [<span class="string">&quot;1s&quot;</span>, <span class="string">&quot;2s&quot;</span>, <span class="string">&quot;3s&quot;</span>]</span><br><span class="line">      musics.<span class="property">value</span> = serverMusics</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="5-认识-readonly"><a href="#5-认识-readonly" class="headerlink" title="5.认识 readonly"></a>5.认识 readonly</h4><p>通过reactive或者ref可以获取到一个响应式的对象，但是某些情况下，传入给其他地方（组件）的这个响应式对象希望在另外一个地方（组件）被使用，但是不能被修改，如何防止这种情况</p>
<ul>
<li><p>Vue3 提供了 readonly 的方法</p>
</li>
<li><p>readonly会返回原始对象的只读代理（也就是它依然是一个 Proxy，这是一个 proxy 的 set 方法被劫持，并且不能对其进行修改）</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">子组件接受数据并修改：可以修改的原因，这里父组件传来的是一个对象，即是一个对象的引用地址，所以可对其值进行修改</span><br><span class="line">&lt;h2&gt;<span class="title class_">ShowInfo</span>: &#123;&#123; info &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;!-- 代码没有错误，但是违背了规范(单向数据流) --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;info.name = &#x27;kobe&#x27;&quot;</span>&gt;</span>showinfo按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;!-- 正确的做法: 通过emit向父组件发出事件，符合单向数据流 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showInfobtnClick&quot;</span>&gt;</span>showinfo按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<p>补充：单向数据流</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230417201301364.png" alt="image-20230417201301364"></p>
<h5 id="1、readonly-的使用"><a href="#1、readonly-的使用" class="headerlink" title="1、readonly 的使用"></a>1、readonly 的使用</h5><ul>
<li><p>readonly 返回的对象都是不允许修改的</p>
</li>
<li><p>但是经过 readonly 处理的原来的对象是允许被修改的</p>
<ul>
<li>比如 const info &#x3D; readonly(obj)，info对象是不允许被修改的</li>
<li>当 obj 被修改时，readonly 返回的 info 对象也会被修改</li>
<li>但是我们不能去修改 readonly 返回的对象 info</li>
</ul>
</li>
</ul>
<p>其实本质上就是 readonly 返回的对象的 setter 方法被劫持了而已</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 使用readonly的数据 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>readonly: &#123;&#123; roInfo &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;!-- 代码无效（报警告） --&gt;</span><br><span class="line">&lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;roInfo.name = &#x27;james&#x27;&quot;</span>&gt;</span>showinfo按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span> --&gt;</span><br><span class="line">&lt;!-- 正确的做法:使用emit向父组件发出修改事件 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;roInfobtnClick&quot;</span>&gt;</span>roInfo按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h5 id="2、readonly-的应用"><a href="#2、readonly-的应用" class="headerlink" title="2、readonly 的应用"></a>2、readonly 的应用</h5><p>在传递给其他组件数据时，往往希望其他组件使用我们传递的内容，但是不允许它们修改时，就可以使用readonly了</p>
<h3 id="4、Reactive-知识点补充"><a href="#4、Reactive-知识点补充" class="headerlink" title="4、Reactive 知识点补充"></a>4、Reactive 知识点补充</h3><p>插件的使用：vue-devtools</p>
<h4 id="Reactive-判断的-API"><a href="#Reactive-判断的-API" class="headerlink" title="Reactive 判断的 API"></a>Reactive 判断的 API</h4><p>isProxy：检查对象是否是由 reactive 或 readonly创建的 proxy</p>
<p>isReactive</p>
<ul>
<li><p>检查对象是否是由 reactive创建的响应式代理</p>
</li>
<li><p>如果该代理是 readonly 建的，但包裹了由 reactive 创建的另一个代理，它也会返回 true</p>
</li>
</ul>
<p>isReadonly：检查对象是否是由 readonly 创建的只读代理</p>
<p>toRaw</p>
<ul>
<li>返回 reactive 或 readonly 代理的原始对象（不建议保留对原始对象的持久引用。请谨慎使用）</li>
</ul>
<p>shallowReactive</p>
<ul>
<li>创建一个响应式代理，它跟踪其自身 property 的响应性，但不执行嵌套对象的深层响应式转换 (深层还是原生对象)</li>
</ul>
<p>shallowReadonly</p>
<ul>
<li>创建一个 proxy，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换（深层还是可读、可写的）</li>
</ul>
<h3 id="5、Ref-知识点补充"><a href="#5、Ref-知识点补充" class="headerlink" title="5、Ref 知识点补充"></a>5、Ref 知识点补充</h3><h4 id="1-toRefs"><a href="#1-toRefs" class="headerlink" title="1.toRefs"></a>1.toRefs</h4><p>如果使用ES6的解构语法，对 reactive 返回的对象进行解构获取值（有时解构是为了便于展示时书写），那么之后无论是修改结构后的变量，还是修改reactive 返回的state对象，数据都不再是响应式的</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">info</span>: &#123;&#123;name&#125;&#125; - &#123;&#123;age&#125;&#125; - &#123;&#123;height&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>



<p>那么有没有办法让我们解构出来的属性是响应式的</p>
<ul>
<li><p>Vue为我们提供了一个toRefs的函数，可以将reactive返回的对象中的属性都转成ref</p>
</li>
<li><p>那么我们再次进行结构出来的 name 和 age 本身都是 ref的</p>
</li>
</ul>
<p>这种做法相当于已经在state.name和ref.value之间建立了 链接，任何一个修改都会引起另外一个变化</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// reactive 被解构后会变成普通的值，失去响应式</span></span><br><span class="line"><span class="comment">// const &#123; name, age &#125; = info</span></span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = <span class="title function_">toRefs</span>(info)</span><br><span class="line"><span class="keyword">return</span> &#123; name, age &#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-toRef"><a href="#2-toRef" class="headerlink" title="2.toRef"></a>2.toRef</h4><p>如果我们只希望转换一个 reactive 对象中的属性为ref, 那么可以使用toRef的方法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> height = <span class="title function_">toRef</span>(info, <span class="string">&quot;height&quot;</span>)  <span class="comment">// info 中的height属性</span></span><br><span class="line"><span class="keyword">return</span> &#123; height &#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-ref-其他的-API"><a href="#3-ref-其他的-API" class="headerlink" title="3.ref 其他的 API"></a>3.ref 其他的 API</h4><p>unref：如果想要获取一个 ref 引用中的 value，那么也可以通过 unref 方法</p>
<ul>
<li>如果参数是一个 ref，则返回内部值，否则返回参数本身</li>
<li>这是 val &#x3D; isRef(val) ? val.value : val 的语法糖函数</li>
</ul>
<p>isRef：判断值是否是一个ref对象</p>
<p>shallowRef：创建一个浅层的ref对象</p>
<p>triggerRef：手动触发和 shallowRef 相关联的副作用</p>
<h3 id="6、setup-中禁用-this"><a href="#6、setup-中禁用-this" class="headerlink" title="6、setup 中禁用 this"></a>6、setup 中禁用 this</h3><p>官方关于 this 的描述：</p>
<ul>
<li>表达的含义是this并没有指向当前组件实例</li>
<li>并且在setup被调用之前，data、computed、methods等都没有被解析</li>
<li>所以无法在setup中获取this</li>
</ul>
<p>其实在之前的这段描述是和源码有出入的： </p>
<ul>
<li>之前的描述大概含义是不可以使用this是因为组件实例还没有被创建出来</li>
</ul>
<p>源码：</p>
<p>代码是按照如下顺序执行的：</p>
<ul>
<li><p>调用 createComponentInstance 创建组件实例</p>
</li>
<li><p>调用 setupComponent 初始化component内部的操作</p>
</li>
<li><p>调用 setupStatefulComponent 初始化有状态的组件</p>
</li>
<li><p>在 setupStatefulComponent 取出了 setup 函数</p>
</li>
<li><p>通过callWithErrorHandling 的函数执行 setup</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230417203715822.png" alt="image-20230417203715822"></p>
<p>从上面的代码可以看出， 组件的instance肯定是在执行 setup 函数之前就创建出来的</p>
<h2 id="10-Composition-API"><a href="#10-Composition-API" class="headerlink" title="10.Composition API"></a>10.Composition API</h2><h3 id="1、computed"><a href="#1、computed" class="headerlink" title="1、computed"></a>1、computed</h3><p>在前面记录过计算属性computed：当某些属性是依赖其他状态时，可以使用计算属性来处理</p>
<ul>
<li><p>在前面的Options API中，是使用computed选项来完成的</p>
</li>
<li><p>在Composition API中，可以在 setup 函数中使用 computed 方法来编写一个计算属性</p>
</li>
</ul>
<p>如何使用 computed</p>
<ul>
<li><p>方式一：接收一个 getter 函数，并为 getter 函数返回的值，返回一个不变的 ref 对象</p>
</li>
<li><p>方式二：接收一个具有 get 和 set 的对象，返回一个可变的（可读写）ref 对象</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;setFullName&quot;</span>&gt;</span>设置fullName<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> names = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&quot;kobe&quot;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;bryant&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">import</span> &#123; reactive, computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> tempNmaes = newValue.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>)</span><br><span class="line">        names.<span class="property">firstName</span> = tempNmaes[<span class="number">0</span>]</span><br><span class="line">        names.<span class="property">lastName</span> = tempNmaes[<span class="number">1</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> names.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + names.<span class="property">lastName</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setFullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    fullName.<span class="property">value</span> = <span class="string">&quot;coder why&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="setup中使用ref"><a href="#setup中使用ref" class="headerlink" title="setup中使用ref"></a>setup中使用ref</h4><p>只需要定义一个ref对象，绑定到元素或者组件的ref属性上即可</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2 ref=<span class="string">&quot;titleRef&quot;</span>&gt;我是标题&lt;/h2&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ref</span>=<span class="string">&quot;btnRef&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 先转换为ref对象</span></span><br><span class="line"><span class="keyword">const</span> titleRef = <span class="title function_">ref</span>()</span><br><span class="line"><span class="keyword">const</span> btnRef= <span class="title function_">ref</span>()</span><br><span class="line"><span class="keyword">const</span> showinfoRef= <span class="title function_">ref</span>()</span><br><span class="line"><span class="comment">// 直接获取的话是获取不到的，因为在解析时可能还没挂载便执行了获取代码，还没有元素</span></span><br><span class="line"><span class="comment">// 可以在页面渲染完成后，使用函数点击获取元素</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getElements</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(titleRef.<span class="property">value</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(btnRef.<span class="property">value</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(showinfoRef.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 也可以使用生命周期函数获取，等其挂载完成之后，所以选择onMounted</span></span><br><span class="line"><span class="comment">// onMounted 的生命周期函数</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(titleRef.<span class="property">value</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(btnRef.<span class="property">value</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(showinfoRef.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">    showinfoRef.<span class="property">value</span>.<span class="title function_">showinfofoo</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="2、组件的生命周期函数"><a href="#2、组件的生命周期函数" class="headerlink" title="2、组件的生命周期函数"></a>2、组件的生命周期函数</h3><p>setup 可以用来替代 data 、 methods 、 computed 等等这些选项，也可以替代生命周期钩子</p>
<p>setup 中可以使用直接导入的 onX 函数注册生命周期钩子</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, onUpdated, onUnmounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 在执行setup函数的过程中，你需要注册别的生命周期函数</span></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onMounted&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onMounted&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onMounted&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230417205134405.png" alt="image-20230417205134405"></p>
<h3 id="3、Provide-x2F-Inject-使用"><a href="#3、Provide-x2F-Inject-使用" class="headerlink" title="3、Provide&#x2F;Inject 使用"></a>3、Provide&#x2F;Inject 使用</h3><p>之前还学习过Provide和Inject，Composition API也可以替代之前的 Provide 和 Inject 的选项</p>
<h4 id="1-Provide-函数"><a href="#1-Provide-函数" class="headerlink" title="1.Provide 函数"></a>1.Provide 函数</h4><p>可以通过 provide来提供数据：可以通过 provide 方法来定义每个 Property</p>
<p>provide可以传入两个参数</p>
<ul>
<li><p>name：提供的属性名称</p>
</li>
<li><p>value：提供的属性值</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; provide, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="title function_">provide</span>(<span class="string">&quot;name&quot;</span>, name)</span><br><span class="line"><span class="title function_">provide</span>(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">return</span> &#123; name &#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-Inject函数"><a href="#2-Inject函数" class="headerlink" title="2.Inject函数"></a>2.Inject函数</h4><p>在后代组件中可以通过 inject 来注入需要的属性和对应的值</p>
<ul>
<li>可以通过 inject 来注入需要的内容</li>
</ul>
<p>inject可以传入两个参数</p>
<ul>
<li><p>要 inject 的 property 的 name</p>
</li>
<li><p>默认值</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 以前的方法</span></span><br><span class="line"><span class="comment">// inject的options api注入，那么依然需要手动来解包，使用之后警告依旧存在</span></span><br><span class="line"><span class="comment">// inject: [&quot;name&quot;, &quot;age&quot;], </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 setup 不需要手动解包</span></span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="title function_">inject</span>(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> age = <span class="title function_">inject</span>(<span class="string">&quot;age&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> &#123; name, age&#125;</span><br></pre></td></tr></table></figure>

<p>如果 Inject 接受的数据不存在，可以定义默认值</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> height = <span class="title function_">inject</span>(<span class="string">&quot;height&quot;</span>, <span class="number">1.58</span>)</span><br><span class="line"><span class="keyword">return</span> &#123; height &#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-数据响应式"><a href="#3-数据响应式" class="headerlink" title="3.数据响应式"></a>3.数据响应式</h4><p>为了增加 provide 值和 inject 值之间的响应性，可以在 provide 值时使用 ref 和 reactive</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&quot;why&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> info = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;why&quot;</span>, <span class="attr">age</span>: <span class="number">15</span>&#125;)</span><br><span class="line"><span class="title function_">provide</span>(<span class="string">&quot;info&quot;</span>, info)</span><br></pre></td></tr></table></figure>



<h3 id="4、watch-x2F-watchEffect"><a href="#4、watch-x2F-watchEffect" class="headerlink" title="4、watch&#x2F;watchEffect"></a>4、watch&#x2F;watchEffect</h3><p>在Composition API中，可以使用watchEffect和watch来完成响应式数据的侦听</p>
<ul>
<li><p>watchEffect：用于自动收集响应式数据的依赖</p>
</li>
<li><p>watch：需要手动指定侦听的数据源</p>
</li>
</ul>
<h4 id="1-Watch-的使用"><a href="#1-Watch-的使用" class="headerlink" title="1.Watch 的使用"></a>1.Watch 的使用</h4><p>watch的API完全等同于组件watch选项的Property</p>
<ul>
<li>watch需要侦听特定的数据源，并且执行其回调函数</li>
<li>默认情况下它是惰性的，只有当被侦听的源发生变化时才会执行回调</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, ref, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="title function_">watch</span>(message, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">watch</span>(info, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue === oldValue)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">    <span class="comment">// 会默认有深度的监听</span></span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<p>以上方法获取的是 proxy，要获取普通对象的话：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 3.侦听reactive数据变化后，获取普通对象</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> (&#123; ...info &#125;), <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 需要打开 deep</span></span><br><span class="line">    <span class="attr">deep</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>侦听多个数据源</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230417210813073.png" alt="image-20230417210813073"></p>
<p>watch 的选项</p>
<ul>
<li><p>如果希望侦听一个深层的侦听，那么依然需要设置 deep 为true</p>
</li>
<li><p>也可以传入 immediate 立即执行</p>
</li>
</ul>
<h4 id="2-WatchEffect"><a href="#2-WatchEffect" class="headerlink" title="2.WatchEffect"></a>2.WatchEffect</h4><p>当侦听到某些响应式数据变化时，希望执行某些操作，这个时候可以使用 watchEffect</p>
<p>案例：</p>
<ul>
<li>首先，watchEffect传入的函数会被立即执行一次，并且在执行的过程中会收集依赖</li>
<li>其次，只有收集的依赖发生变化时，watchEffect传入的函数才会再次执行</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; watchEffect, ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 1.watchEffect传入的函数默认会直接被执行</span></span><br><span class="line"><span class="comment">// 2.在执行的过程中，会自动的收集依赖（依赖哪些响应式的数据）</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;-------------&quot;</span>, counter.<span class="property">value</span>, name.<span class="property">value</span>)</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>



<h5 id="watchEffect-的停止侦听"><a href="#watchEffect-的停止侦听" class="headerlink" title="watchEffect 的停止侦听"></a>watchEffect 的停止侦听</h5><p>如果在发生某些情况下，希望停止侦听，这时可以获取watchEffect的返回值函数，调用该函数即可</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> stopWatch = <span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;-------------&quot;</span>, counter.<span class="property">value</span>, name.<span class="property">value</span>)</span><br><span class="line">    <span class="comment">// 判断counter.value &gt; 10</span></span><br><span class="line">    <span class="keyword">if</span> (counter.<span class="property">value</span> &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="title function_">stopWatch</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="5、自定义-Hook-练习"><a href="#5、自定义-Hook-练习" class="headerlink" title="5、自定义 Hook 练习"></a>5、自定义 Hook 练习</h3><h4 id="1-useCounter-计数"><a href="#1-useCounter-计数" class="headerlink" title="1.useCounter 计数"></a>1.useCounter 计数</h4><p>见 composition api 9 初体验，抽取计数器 setup 中的函数至一个 js 文件，在需要使用的组件进行引入即可</p>
<h4 id="2-useTitle-切换title"><a href="#2-useTitle-切换title" class="headerlink" title="2.useTitle 切换title"></a>2.useTitle 切换title</h4><p>初使用：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useTitle</span>(<span class="params">titleValue</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = title</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useTitle <span class="keyword">from</span> <span class="string">&#x27;../hooks/useTitle.js&#x27;</span>;</span><br><span class="line"><span class="title function_">useTitle</span>(<span class="string">&quot;首页&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>一般使用：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useTitle</span>(<span class="params">titleValue</span>) &#123;</span><br><span class="line">  <span class="comment">// document.title = title</span></span><br><span class="line">  <span class="comment">// 定义ref应用的数据</span></span><br><span class="line">  <span class="keyword">const</span> title = <span class="title function_">ref</span>(titleValue)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">watch</span>(title, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = newValue</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 返回 ref 的值</span></span><br><span class="line">  <span class="keyword">return</span> title</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2.修改标题</span></span><br><span class="line"><span class="keyword">const</span> title = <span class="title function_">useTitle</span>(<span class="string">&quot;首页&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.监听按钮的点击</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">popularClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    title.<span class="property">value</span> = <span class="string">&quot;首页-流行&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-useScrollPosition"><a href="#3-useScrollPosition" class="headerlink" title="3.useScrollPosition"></a>3.useScrollPosition</h4><p>监听界面的滚动位置</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollPosition = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.监听滚动</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;scroll&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    scrollPosition.<span class="property">x</span> = <span class="variable language_">window</span>.<span class="property">scrollX</span></span><br><span class="line">    scrollPosition.<span class="property">y</span> = <span class="variable language_">window</span>.<span class="property">scrollY</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.返回数据</span></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    scrollPosition</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;scroll&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>x: &#123;&#123; scrollPosition.x &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>y: &#123;&#123; scrollPosition.y &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> useScrollPosition <span class="keyword">from</span> <span class="string">&quot;../hooks/useScrollPosition.js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; scrollPosition &#125; = <span class="title function_">useScrollPosition</span>()</span><br><span class="line"><span class="keyword">return</span> &#123; scrollPosition &#125;</span><br></pre></td></tr></table></figure>



<h3 id="6、script-setup-语法糖"><a href="#6、script-setup-语法糖" class="headerlink" title="6、script setup 语法糖"></a>6、script setup 语法糖</h3><p><code>&lt;script setup&gt; </code>是在单文件组件 (SFC) 中使用组合式 API 的编译时语法糖，当同时使用 SFC 与组合式 API 时则推荐该语法</p>
<ul>
<li>更少的样板内容，更简洁的代码</li>
<li>能够使用纯 Typescript 声明 prop 和抛出事件</li>
<li>更好的运行时性能 </li>
<li>更好的 IDE 类型推断性能</li>
</ul>
<p>使用这个语法，需要将 setup attribute 添加到 <code>&lt;script&gt;&lt;/script&gt;</code>代码块上</p>
<p>里面的代码会被编译成组件 setup() 函数的内容</p>
<ul>
<li>这意味着与普通的<code>&lt;script&gt;</code>只在组件被首次引入的时候执行一次不同</li>
<li><code>&lt;script setup&gt;</code>中的代码会在每次组件实例被创建的时候执行</li>
</ul>
<h4 id="1-顶层的绑定会被暴露给模板"><a href="#1-顶层的绑定会被暴露给模板" class="headerlink" title="1.顶层的绑定会被暴露给模板"></a>1.顶层的绑定会被暴露给模板</h4><p>当使用 <code>&lt;script setup&gt;</code> 时，任何在<code>&lt;script setup&gt;</code>声明的顶层的绑定(包括变量，函数声明，以及 import 引入的内容) 都能在模板中直接使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.所有编写在顶层中的代码，都是默认暴露给template可以使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; onMounted, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br></pre></td></tr></table></figure>

<p>响应式数据需要通过ref、reactive来创建</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2.定义响应式数据</span></span><br><span class="line"><span class="keyword">const</span> message = <span class="title function_">ref</span>(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message.<span class="property">value</span>)</span><br></pre></td></tr></table></figure>



<h4 id="2-导入的组件直接使用"><a href="#2-导入的组件直接使用" class="headerlink" title="2.导入的组件直接使用"></a>2.导入的组件直接使用</h4><p><code>&lt;script setup&gt;</code>范围里的值也能被直接作为自定义组件的标签名使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ShowInfo</span> <span class="keyword">from</span> <span class="string">&quot;./ShowInfo.vue&quot;</span> <span class="comment">// 不需要注册</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义绑定的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    message.<span class="property">value</span> = <span class="string">&#x27;你好啊!&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-defineProps-和-defineEmits"><a href="#3-defineProps-和-defineEmits" class="headerlink" title="3.defineProps() 和 defineEmits()"></a>3.defineProps() 和 defineEmits()</h4><p>通过 props 传递给子组件时，子组件：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;<span class="title class_">ShowInfo</span>: &#123;&#123;name&#125;&#125; - &#123;&#123;age&#125;&#125;&lt;/div&gt;</span><br><span class="line"><span class="comment">// 定义props</span></span><br><span class="line"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&quot;默认值&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">age</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>子组件发出事件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="keyword">const</span> emits = <span class="title function_">defineEmits</span>([<span class="string">&quot;infoBtnClick&quot;</span>])</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showInfoBtnClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">emits</span>(<span class="string">&quot;infoBtnClick&quot;</span>, <span class="string">&quot;showinfo内部发生了点击&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">infobtnclick</span>(<span class="params">payload</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听到showinfo内部的点击&quot;</span>, payload)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-defineExpose"><a href="#4-defineExpose" class="headerlink" title="4.defineExpose()"></a>4.defineExpose()</h4><p>使用语法糖的组件时默认关闭的：</p>
<ul>
<li>通过模板 ref 或者 $parent 链获取到的组件的公开实例，不会暴露任何在 <code>&lt;script setup&gt;</code> 中声明的绑定</li>
</ul>
<p>通过 defineExpose 编译器宏来显式指定在 <code>&lt;script setup&gt;</code> 组件中要暴露出去的 property</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 4.获取组件实例</span></span><br><span class="line"><span class="keyword">const</span> showInfoRef = <span class="title function_">ref</span>()  <span class="comment">// 获取子组件</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">   showInfoRef.<span class="property">value</span>.<span class="title function_">foo</span>()  <span class="comment">// 获取子组件的foo函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 子组件定义foo的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是showinfo的foo函数打印&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">defineExpose</span>(&#123;</span><br><span class="line">  foo</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="7、案例练习"><a href="#7、案例练习" class="headerlink" title="7、案例练习"></a>7、案例练习</h3><h4 id="1-创建项目获取数据"><a href="#1-创建项目获取数据" class="headerlink" title="1.创建项目获取数据"></a>1.创建项目获取数据</h4><p>按照区域划分相关的组件，对于整个也页面的重置，可以在 assets 中新建 reset.css 文件进行重置</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> assets <span class="keyword">from</span> <span class="string">&quot;./assets/reset.css&quot;</span></span><br></pre></td></tr></table></figure>

<p>获取数据：一般都是在 App 组件中获取，再传递给需要使用的组件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> highScore <span class="keyword">from</span> <span class="string">&quot;./data/high_score.json&quot;</span></span><br></pre></td></tr></table></figure>



<h4 id="2-头部的封装与使用"><a href="#2-头部的封装与使用" class="headerlink" title="2.头部的封装与使用"></a>2.头部的封装与使用</h4><p>可以现在 App 中写出对应的效果，再将其抽取到独立的组件中，便于复用</p>
<p>传递数据与接受数据：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;area-header :title=<span class="string">&quot;areaData.title&quot;</span> :subtitle=<span class="string">&quot;areaData.subtitle&quot;</span>&gt;&lt;/area-header&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subtitle&quot;</span>&gt;</span>&#123;&#123; subtitle &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&quot;默认标题&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">subtitle</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&quot;默认子标题&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="3-列表的展示"><a href="#3-列表的展示" class="headerlink" title="3.列表的展示"></a>3.列表的展示</h4><p>一样的做法，可以在 App 中完成之后再抽取，对于不便于展示的稍微复杂的数据可以先放着</p>
<p>在 style 样式调整中如果想要使用 less</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">先安装对应解析less的包： npm install less-loader</span><br><span class="line">再在标签中写入：&lt;style lang=<span class="string">&quot;less&quot;</span> scoped&gt;</span><br></pre></td></tr></table></figure>



<h4 id="4-组件的封装"><a href="#4-组件的封装" class="headerlink" title="4.组件的封装"></a>4.组件的封装</h4><p>一般可以将头部和 item 都各自抽离为一个组件使用，但是对于这两者合并的 area 也可能是一个可复用的模型，所以也可对其整体进行抽取，再从 App 中传递数据过来，再将此接受的数据向 header 和 item 发出（这两者需要的，此操作就是改个传出数据的名）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">areaData</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Object</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="function">() =&gt;</span> (&#123;&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)  <span class="comment">// 接受数据名称是 areaData  原来是highScore传出，现在需在此组件中将其改正</span></span><br></pre></td></tr></table></figure>



<h4 id="5-组件中的数据"><a href="#5-组件中的数据" class="headerlink" title="5.组件中的数据"></a>5.组件中的数据</h4><p>对于不利于展示的数据，若是在标签中书写不利于代码阅读，可以使用计算属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// const titleText = computed(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   return props.itemData.verify_info.messages.join(&quot; &quot;)</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">// const titleColor = computed(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   return props.itemData.verify_info.text_color</span></span><br><span class="line"><span class="comment">// &#125;) </span></span><br><span class="line"><span class="keyword">const</span> titleInfo = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">text</span>: props.<span class="property">itemData</span>.<span class="property">verify_info</span>.<span class="property">messages</span>.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>),</span><br><span class="line">        <span class="attr">color</span>: props.<span class="property">itemData</span>.<span class="property">verify_info</span>.<span class="property">text_color</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> bottomInfo = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">content</span>: props.<span class="property">itemData</span>.<span class="property">bottom_info</span>.<span class="property">content</span>,</span><br><span class="line">        <span class="attr">style</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: props.<span class="property">itemData</span>.<span class="property">bottom_info</span>.<span class="property">content_color</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: props.<span class="property">itemData</span>.<span class="property">bottom_info</span>.<span class="property">font_size</span> + <span class="string">&quot;px&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="6-模拟网络请求"><a href="#6-模拟网络请求" class="headerlink" title="6.模拟网络请求"></a>6.模拟网络请求</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 刚开始传入的是空对象，页面会使用默认的数据进行展示</span></span><br><span class="line"><span class="keyword">const</span> highScore = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line"><span class="comment">// 在模拟请求完数据之后，页面会展示数据</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; </span><br><span class="line">  <span class="keyword">import</span>(<span class="string">&quot;./data/high_score.json&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    highScore.<span class="property">value</span> = res.<span class="property">default</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br></pre></td></tr></table></figure>



<h2 id="11-Vue全家桶-Vue-Router"><a href="#11-Vue全家桶-Vue-Router" class="headerlink" title="11.Vue全家桶 - Vue-Router"></a>11.Vue全家桶 - Vue-Router</h2><p>Vue 全家桶</p>
<ul>
<li>vue 核心语法，又叫 vue core，在此之前学的语法包括 options api 和 composition api</li>
<li>插件：vue-router，路由管理前端页面切换</li>
<li>插件：vuex&#x2F;pinia，状态管理</li>
</ul>
<h3 id="1、前端路由的发展历程"><a href="#1、前端路由的发展历程" class="headerlink" title="1、前端路由的发展历程"></a>1、前端路由的发展历程</h3><p>路由是网络工程中的一个术语</p>
<ul>
<li><p>在架构一个网络时，非常重要的两个设备就是路由器和交换机</p>
</li>
<li><p>路由器主要维护的是一个映射表</p>
</li>
<li><p>映射表会决定数据的流向</p>
</li>
</ul>
<p>路由的概念在软件工程中出现，最早是在后端路由中实现的，web的发展主要经历</p>
<ul>
<li><p>后端路由阶段</p>
</li>
<li><p>前后端分离阶段</p>
</li>
<li><p>单页面富应用（SPA）</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418144437159.png" alt="image-20230418144437159"></p>
<h4 id="1-后端路由"><a href="#1-后端路由" class="headerlink" title="1.后端路由"></a>1.后端路由</h4><p>早期的网站开发整个HTML页面是由服务器来渲染的</p>
<ul>
<li>服务器直接生产渲染好对应的HTML页面, 返回给客户端进行展示</li>
</ul>
<p>但是, 一个网站, 这么多页面服务器如何处理呢</p>
<ul>
<li><p>一个页面有自己对应的网址, 也就是URL</p>
</li>
<li><p>URL会发送到服务器, 服务器会通过正则对该URL进行匹配, 并且最后交给一个Controller进行处理</p>
</li>
<li><p>Controller进行各种处理, 最终生成HTML或者数据, 返回给前端</p>
</li>
</ul>
<p>上面的这种操作, 就是后端路由</p>
<ul>
<li><p>当我们页面中需要请求不同的路径内容时, 交给服务器来进行处理, 服务器渲染好整个页面, 并且将页面返回给客户端</p>
</li>
<li><p>这种情况下渲染好的页面, 不需要单独加载任何的js和css, 可以直接交给浏览器展示, 这样也有利于SEO的优化</p>
</li>
</ul>
<p>后端路由的缺点</p>
<ul>
<li><p>一种情况是整个页面的模块由后端人员来编写和维护的</p>
</li>
<li><p>另一种情况是前端开发人员如果要开发页面, 需要通过PHP和Java等语言来编写页面代码</p>
</li>
<li><p>而且通常情况下HTML代码和数据以及对应的逻辑会混在一起，编写和维护都是非常糟糕的事情</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418144837435.png" alt="image-20230418144837435" style="zoom:50%;" />



<h4 id="2-前后端分离阶段"><a href="#2-前后端分离阶段" class="headerlink" title="2.前后端分离阶段"></a>2.前后端分离阶段</h4><p>前端渲染的理解</p>
<ul>
<li><p>每次请求涉及到的静态资源都会从静态资源服务器获取，这些资源包括HTML+CSS+JS，然后在前端对这些请求回来的资源进行渲染</p>
</li>
<li><p>需要注意的是，客户端的每一次请求，都会从静态资源服务器请求文件</p>
</li>
<li><p>同时可以看到，和之前的后端路由不同，这时后端只是负责提供API了</p>
</li>
</ul>
<p>前后端分离阶段</p>
<ul>
<li><p>随着Ajax的出现, 有了前后端分离的开发模式</p>
</li>
<li><p>后端只提供API来返回数据，前端通过Ajax获取数据，并且可以通过JavaScript将数据渲染到页面中</p>
</li>
<li><p>这样做最大的优点就是前后端责任的清晰，后端专注于数据上，前端专注于交互和可视化上</p>
</li>
<li><p>并且当移动端(iOS&#x2F;Android)出现后，后端不需要进行任何处理，依然使用之前的一套API即可</p>
</li>
<li><p>目前比较少的网站采用这种模式开发</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418144935784.png" alt="image-20230418144935784" style="zoom:50%;" />

<h4 id="3-前端路由"><a href="#3-前端路由" class="headerlink" title="3.前端路由"></a>3.前端路由</h4><p>单页面富应用阶段</p>
<ul>
<li><p>其实SPA最主要的特点就是在前后端分离的基础上加了一层前端路由</p>
</li>
<li><p>也就是前端来维护一套路由规则</p>
</li>
</ul>
<p>前端路由的核心是：改变URL，但是页面不进行整体的刷新</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418145207866.png" alt="image-20230418145207866" style="zoom: 33%;" />



<h3 id="2、Vue-Router基本使用"><a href="#2、Vue-Router基本使用" class="headerlink" title="2、Vue-Router基本使用"></a>2、Vue-Router基本使用</h3><h4 id="1-URL-的-hash"><a href="#1-URL-的-hash" class="headerlink" title="1.URL 的 hash"></a>1.URL 的 hash</h4><p>前端路由是如何做到URL和内容进行映射呢？监听URL的改变</p>
<p>URL的hash</p>
<ul>
<li><p>URL的hash也就是锚点(#)，本质上是改变window.location的href属性</p>
</li>
<li><p>可以通过直接赋值location.hash来改变href，但是页面不发生刷新</p>
</li>
</ul>
<p>hash的优势就是兼容性更好，在老版IE中都可以运行，但是缺陷是有一个#，显得不像一个真实的路径</p>
<h4 id="2-HTML5-的-History"><a href="#2-HTML5-的-History" class="headerlink" title="2.HTML5 的 History"></a>2.HTML5 的 History</h4><p>history接口是HTML5新增的, 它有六种模式改变URL而不刷新页面</p>
<ul>
<li><p>replaceState：替换原来的路径</p>
</li>
<li><p>pushState：使用新的路径</p>
</li>
<li><p>popState：路径的回退</p>
</li>
<li><p>go：向前或向后改变路径</p>
</li>
<li><p>forward：向前改变路径</p>
</li>
<li><p>back：向后改变路径</p>
</li>
</ul>
<h4 id="3-认识-vue-router"><a href="#3-认识-vue-router" class="headerlink" title="3.认识 vue-router"></a>3.认识 vue-router</h4><p>目前前端流行的三大框架, 都有自己的路由实现</p>
<p>Angular 的 ngRouter、React 的 ReactRouter、Vue 的 vue-router</p>
<p>Vue Router 是 Vue.js 的官方路由</p>
<ul>
<li>它与 Vue.js 核心深度集成，让用 Vue.js 构建单页应用（SPA）变得非常容易</li>
</ul>
<p>vue-router 是基于路由和组件的</p>
<ul>
<li><p>路由用于设定访问路径, 将路径和组件映射起来</p>
</li>
<li><p>在 vue-router 的单页面应用中, 页面的路径的改变就是组件的切换</p>
</li>
</ul>
<p>安装 Vue Router：npm install vue-router</p>
<h4 id="4-使用步骤"><a href="#4-使用步骤" class="headerlink" title="4.使用步骤"></a>4.使用步骤</h4><p>使用 vue-router 的步骤</p>
<ul>
<li><p>第一步：创建路由需要映射的组件（打算显示的页面）</p>
</li>
<li><p>第二步：通过 createRouter 创建路由对象，并且传入 routes 和 history 模式</p>
<ul>
<li>配置路由映射：组件和路径映射关系的 routes 数组</li>
<li>创建基于 hash 或者 history 的模式</li>
</ul>
</li>
<li><p>第三步：使用 app 注册路由对象（use方法）</p>
</li>
<li><p>第四步：路由使用: 通过和<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code></p>
</li>
</ul>
<p>详解：</p>
<p>1.创建路由对象（创建对应的 js 文件，引入 router 相关）</p>
<ul>
<li>routers：映射关系</li>
<li>history：修改 url 的模式（hash&#x2F;history）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>, <span class="attr">component</span>: <span class="title class_">About</span> &#125;,  ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>2.让路由对象生效</p>
<ul>
<li>app.use(router)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index.js&quot;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br></pre></td></tr></table></figure>

<p>3.router-view 占位</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>

<p>4.router-link 进行路由的切换</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;router-link to=<span class="string">&quot;/home&quot;</span> replace active-<span class="keyword">class</span>=<span class="string">&quot;active&quot;</span>&gt;首页&lt;/router-link&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; path: &#x27;/about&#x27; &#125;&quot;</span> <span class="attr">replace</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418151220193.png" alt="image-20230418151220193"></p>
<h4 id="5-路由的默认路径"><a href="#5-路由的默认路径" class="headerlink" title="5.路由的默认路径"></a>5.路由的默认路径</h4><p>默认情况下, 进入网站的首页, 希望渲染首页的内容</p>
<ul>
<li>但是在实现中, 默认没有显示首页组件, 必须让用户点击才可以</li>
</ul>
<p>routes中又配置了一个映射：</p>
<ul>
<li><p>path配置的是根路径: &#x2F;</p>
</li>
<li><p>redirect是重定向, 也就是我们将根路径重定向到&#x2F;home的路径下</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 默认路径</span></span><br><span class="line"><span class="comment">// &#123; path: &quot;/&quot;, component: Home&#125;,</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">redirect</span>: <span class="string">&quot;/home&quot;</span> &#125;,</span><br></pre></td></tr></table></figure>



<h4 id="6-history-模式"><a href="#6-history-模式" class="headerlink" title="6.history 模式"></a>6.history 模式</h4><p>见上方代码块</p>
<h4 id="7-router-link"><a href="#7-router-link" class="headerlink" title="7.router-link"></a>7.router-link</h4><p>router-link事实上有很多属性可以配置</p>
<ul>
<li><p>to属性：是一个字符串，或者是一个对象</p>
</li>
<li><p>replace属性：设置 replace 属性的话，当点击时，会调用 router.replace()，而不是 router.push()，就是浏览器没有了缓存，返回上一级直接到了浏览器主页面</p>
</li>
<li><p>active-class属性：设置激活a元素后应用的class，默认是router-link-active</p>
<ul>
<li>可以对该值进行自定义命名：active-class&#x3D;”active”</li>
</ul>
</li>
<li><p>exact-active-class属性：链接精准激活时，应用于渲染的 <code>&lt;a&gt;</code>  的 class，默认是router-link-exact-active</p>
</li>
</ul>
<h3 id="3、路由懒加载分包处理"><a href="#3、路由懒加载分包处理" class="headerlink" title="3、路由懒加载分包处理"></a>3、路由懒加载分包处理</h3><p>当打包构建应用时，JavaScript 包会变得非常大，影响页面加载</p>
<ul>
<li><p>如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就会更加高效</p>
</li>
<li><p>也可以提高首屏的渲染效率</p>
</li>
</ul>
<p>通过 webpack 的分包知识，而 Vue Router 默认就支持动态来导入组件</p>
<ul>
<li><p>这是因为 component 可以传入一个组件，也可以接收一个函数，该函数需要返回一个Promise</p>
</li>
<li><p>而 import 函数就是返回一个 Promise</p>
</li>
</ul>
<p>在引入组件时</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 分包</span></span><br><span class="line"><span class="comment">// 路由的懒加载</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&quot;../views/Home.vue&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">About</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&quot;../views/About.vue&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>也可以在使用组件时</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123; <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/Home.vue&quot;</span>)&#125;,</span><br></pre></td></tr></table></figure>



<p>打包效果分析</p>
<p>按以上方发进行引入组件可以实现分包，但是不能很直观的看出那一个包对应是那一个组件打包的</p>
<p>可以使用魔法注释来进行命名</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &#x27;home&#x27; */</span><span class="string">&quot;../views/Home.vue&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>路由的其他属性</p>
<ul>
<li><p>name属性：路由记录独一无二的名称</p>
</li>
<li><p>meta属性：自定义的数据</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">   <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">   <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/Home.vue&quot;</span>),</span><br><span class="line">   <span class="attr">meta</span>: &#123;</span><br><span class="line">     <span class="attr">name</span>: <span class="string">&quot;why&quot;</span>,</span><br><span class="line">     <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="4、动态路由和路由嵌套"><a href="#4、动态路由和路由嵌套" class="headerlink" title="4、动态路由和路由嵌套"></a>4、动态路由和路由嵌套</h3><h4 id="1-路由动态的基本匹配"><a href="#1-路由动态的基本匹配" class="headerlink" title="1.路由动态的基本匹配"></a>1.路由动态的基本匹配</h4><p>很多时候需要将给定匹配模式的路由映射到同一个组件</p>
<ul>
<li><p>可能有一个 User 组件，它应该对所有用户进行渲染，但是用户的ID是不同的</p>
</li>
<li><p>在Vue Router中可以在路径中使用一个动态字段来实现，称之为路径参数</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 动态路由</span></span><br><span class="line"><span class="attr">path</span>: <span class="string">&quot;/user/:id&quot;</span>,</span><br><span class="line"><span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/User.vue&quot;</span>),</span><br></pre></td></tr></table></figure>

<p>在router-link中进行如下跳转：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;router-link to=<span class="string">&quot;/user/123&quot;</span>&gt;用户<span class="number">123</span>&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>



<h4 id="2-获取动态路由的值"><a href="#2-获取动态路由的值" class="headerlink" title="2.获取动态路由的值"></a>2.获取动态路由的值</h4><p>在User中如何获取到对应的值</p>
<ul>
<li>在template中，直接通过 $route.params获取值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 在模板中获取id --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>user: &#123;&#123; $route.params.id &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>在 created 中，通过 this.$route.params获取值</p>
</li>
<li><p>在setup中，我们要使用 vue-router库给我们提供的一个hook useRoute</p>
<ul>
<li>该 Hook 会返回一个Route对象，对象中保存着当前路由相关的值</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRoute, onBeforeRouteUpdate &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 route 跳转 id</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;代码中拿到: &quot;</span>,route.<span class="property">params</span>.<span class="property">id</span>)</span><br><span class="line"><span class="title function_">onBeforeRouteUpdate</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;from &quot;</span>,<span class="keyword">from</span>.<span class="property">params</span>.<span class="property">id</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;to &quot;</span>,to.<span class="property">params</span>.<span class="property">id</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="3-NotFound"><a href="#3-NotFound" class="headerlink" title="3.NotFound"></a>3.NotFound</h4><p>对于哪些没有匹配到的路由，通常会匹配到固定的某个页面</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="comment">// 如果匹配到任何一个不存在的路径，那么显示下面这个组件</span></span><br><span class="line">   <span class="attr">path</span>: <span class="string">&quot;/:pathMatch(.*)&quot;</span>,</span><br><span class="line">   <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/NotFound.vue&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以通过 $route.params.pathMatch 获取到传入的参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>NotFund: 您当前的路径&#123;&#123; $route.params.pathMatch &#125;&#125;不正确，请输入正确的路径<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>匹配规则加 *</p>
<p>在 &#x2F;:pathMatch(.*) 后面又加了一个 *</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">path</span>: <span class="string">&quot;/:pathMatch(.*)*&quot;</span></span><br></pre></td></tr></table></figure>

<p>区别：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418183914097.png" alt="image-20230418183914097"></p>
<h4 id="4-路由的嵌套"><a href="#4-路由的嵌套" class="headerlink" title="4.路由的嵌套"></a>4.路由的嵌套</h4><p>目前匹配的Home、About、User等都属于第一层路由，在它们之间可以来回进行切换</p>
<p>但是 Home 页面本身，也可能会在多个组件之间来回切换</p>
<ul>
<li><p>比如Home中包括Product、Message，它们可以在Home内部来回切换</p>
</li>
<li><p>这时就需要使用嵌套路由，在Home中也使用 router-view 来占位之后需要渲染的组件</p>
</li>
</ul>
<p>配置：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">     <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">     <span class="attr">redirect</span>: <span class="string">&quot;/home/recommend&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">     <span class="attr">path</span>: <span class="string">&quot;recommend&quot;</span>,  <span class="comment">//  /home/recommend</span></span><br><span class="line">     <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/HomeRecommend.vue&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">     <span class="attr">path</span>: <span class="string">&quot;ranking&quot;</span>,  <span class="comment">//  /home/recommend</span></span><br><span class="line">     <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/HomeRanking.vue&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<h3 id="5、路由的编程式导航"><a href="#5、路由的编程式导航" class="headerlink" title="5、路由的编程式导航"></a>5、路由的编程式导航</h3><h4 id="1-代码的页面跳转"><a href="#1-代码的页面跳转" class="headerlink" title="1.代码的页面跳转"></a>1.代码的页面跳转</h4><p>有时希望通过代码来完成页面的跳转，比如点击的是一个按钮</p>
<p>如果是在setup中编写的代码，可以通过 useRouter 来获取</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">homeSpanClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(<span class="string">&quot;/home&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以传入一个对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="comment">// 使用 name 跳转的话不会做重定向</span></span><br><span class="line">    <span class="comment">// name: &quot;home&quot;,</span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>methods的方法：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418185902226.png" alt="image-20230418185902226"></p>
<h4 id="2-query-方式的参数"><a href="#2-query-方式的参数" class="headerlink" title="2.query 方式的参数"></a>2.query 方式的参数</h4><p>可以通过query的方式来传递参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">query</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;whs&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在 about 获取到 query 传的值</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="title class_">About</span>: &#123;&#123; $route.<span class="property">query</span> &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>



<h4 id="3-替换当前位置"><a href="#3-替换当前位置" class="headerlink" title="3.替换当前位置"></a>3.替换当前位置</h4><p>使用push的特点是压入一个新的页面，那么在用户点击返回时，上一个页面还可以回退，但是如果希望当前页面是一个替换操作，那么可以使用replace</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230418190206654.png" alt="image-20230418190206654"></p>
<h4 id="4-页面的前进后退"><a href="#4-页面的前进后退" class="headerlink" title="4.页面的前进后退"></a>4.页面的前进后退</h4><p>router 的 go 方法</p>
<p>router 也有 back</p>
<ul>
<li>通过调用 history.back() 回溯历史。相当于 router.go(-1)</li>
</ul>
<p>router 也有 forward</p>
<ul>
<li>通过调用 history.forward() 在历史中前进。相当于 router.go(1)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">backClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// router.back()</span></span><br><span class="line">  <span class="comment">// router.forward()</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// go(delta)</span></span><br><span class="line">  <span class="comment">// go(1) -&gt; forward()</span></span><br><span class="line">  <span class="comment">// go(-1) -&gt; back()</span></span><br><span class="line">  router.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6、动态管理路由对象"><a href="#6、动态管理路由对象" class="headerlink" title="6、动态管理路由对象"></a>6、动态管理路由对象</h3><p>了解开发中的各种类别，数据来源与存放</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419155042718.png" alt="image-20230419155042718" style="zoom: 33%;" />

<p>了解后台管理系统，对于不同的角色，能够使用系统中不同的功能</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419154915206.png" alt="image-20230419154915206" style="zoom: 67%;" />

<h4 id="1-动态添加路由"><a href="#1-动态添加路由" class="headerlink" title="1.动态添加路由"></a>1.动态添加路由</h4><p>某些情况下可能需要动态的来添加路由</p>
<ul>
<li><p>比如根据用户不同的权限，注册不同的路由</p>
</li>
<li><p>可以使用一个方法 addRoute</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> isAdmin = <span class="literal">false</span>  <span class="comment">// 写死的</span></span><br><span class="line"><span class="keyword">if</span> (isAdmin) &#123;</span><br><span class="line">  <span class="comment">// 一级路由</span></span><br><span class="line">  router.<span class="title function_">addRoute</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/Admin.vue&quot;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果是为 route 添加一个 children 路由（二级路由），那么可以传入对应的 name</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">router.<span class="title function_">addRoute</span>(<span class="string">&quot;home&quot;</span>,&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;vip&quot;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/HomeSongs.vue&quot;</span>) </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="2-动态添加路由的其他方法"><a href="#2-动态添加路由的其他方法" class="headerlink" title="2.动态添加路由的其他方法"></a>2.动态添加路由的其他方法</h4><p>删除路由有以下三种方式</p>
<ul>
<li><p>方式一：添加一个 name 相同的路由（name 是唯一的，原理是覆盖上一个 name）</p>
</li>
<li><p>方式二：通过 removeRoute 方法，传入路由的名称</p>
</li>
<li><p>方式三：通过 addRoute 方法的返回值回调</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419160915567.png" alt="image-20230419160915567"></p>
<p>其他方法</p>
<ul>
<li>router.hasRoute()：检查路由是否存在</li>
<li>router.getRoutes()：获取一个包含所有路由记录的数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取router所有的映射路由对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="title function_">getRoutes</span>())</span><br></pre></td></tr></table></figure>



<h3 id="7、路由导航守卫钩子"><a href="#7、路由导航守卫钩子" class="headerlink" title="7、路由导航守卫钩子"></a>7、路由导航守卫钩子</h3><h4 id="1-基本使用-2"><a href="#1-基本使用-2" class="headerlink" title="1.基本使用"></a>1.基本使用</h4><p>在进入到某些页面时可能需要判断用户是否登录，如果没有登录则需要跳转到登录界面登录之后，才能进入到该页面</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419161510368.png" alt="image-20230419161510368" style="zoom: 67%;" />

<p>vue-router 提供的导航守卫主要用来通过跳转或取消的方式守卫导航</p>
<p>全局的前置守卫 beforeEach 是在导航触发时会被回调的：</p>
<p>它有两个参数</p>
<ul>
<li><p>to：即将进入的路由Route对象</p>
</li>
<li><p>from：即将离开的路由Route对象</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 路由导航守卫</span></span><br><span class="line"><span class="comment">// 在进行任何的路由跳转之前，传入到beforeEach中的函数都会被回调</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1.进入到任何界面是都跳转到login页面</span></span><br><span class="line">  <span class="keyword">if</span> ( to.<span class="property">path</span> !== <span class="string">&quot;/login&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;/login&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>它有返回值</p>
<ul>
<li>false：取消当前导航</li>
<li>不返回或者undefined：进行默认导航</li>
<li>返回一个路由地址<ul>
<li>可以是一个string类型的路径</li>
<li>可以是一个对象，对象中包含path、query、params等信息</li>
</ul>
</li>
</ul>
<p>可选的第三个参数：next（不推荐使用）</p>
<ul>
<li><p>在 Vue2 中是通过next函数来决定如何进行跳转的</p>
</li>
<li><p>但是在 Vue3 中是通过返回值来控制的，不再推荐使用 next 函数，这是因为开发中很容易调用多次 next</p>
</li>
</ul>
<h4 id="2-登录守卫功能"><a href="#2-登录守卫功能" class="headerlink" title="2.登录守卫功能"></a>2.登录守卫功能</h4><p>按需求：进入订单页面时进行判断登录</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 需求：进入到订单页面时，判断用是否登录（isLogin -&gt; LocalStorage保存token）</span></span><br><span class="line"><span class="comment">// 情况一：用户没有登录，那么跳转到登录页面，进行登录操作</span></span><br><span class="line"><span class="comment">// 情况二：用户已经登录，那么直接进入到订单页面</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 2.进入到订单页面，判断是否登录</span></span><br><span class="line">  <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span>(to.<span class="property">path</span> === <span class="string">&quot;/order&quot;</span> &amp;&amp; !token) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/login&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>模拟在 login 登录之后进行跳转</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loginClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// console.log(&quot;点击了登录操作&quot;)</span></span><br><span class="line">  <span class="comment">// 向服务器发送请求，服务器返回token</span></span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>, <span class="string">&quot;coderwhy&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 跳转到order页面</span></span><br><span class="line">  router.<span class="title function_">push</span>(<span class="string">&quot;/order&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>模拟在别的页面退出登录（删除 token），测试登录功能</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logoutClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;token&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-其他导航守卫"><a href="#3-其他导航守卫" class="headerlink" title="3.其他导航守卫"></a>3.其他导航守卫</h4><p>Vue-Router 还提供了很多的其他守卫函数，目的都是在某一个时刻给予我们回调，让我们可以更好的控制程序的流程或者功能</p>
<ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://next.router.vuejs.org/zh/guide/advanced/navigation-guards.html">https://next.router.vuejs.org/zh/guide/advanced/navigation-guards.html</a></li>
</ul>
<p>完整的导航解析流程：</p>
<ul>
<li><p>导航被触发</p>
</li>
<li><p>在失活的组件里调用 beforeRouteLeave 守卫</p>
</li>
<li><p>调用全局的 beforeEach 守卫</p>
</li>
<li><p>在重用的组件里调用 beforeRouteUpdate 守卫(2.2+)</p>
</li>
<li><p>在路由配置里调用 beforeEnter</p>
</li>
<li><p>解析异步路由组件</p>
</li>
<li><p>在被激活的组件里调用 beforeRouteEnter</p>
</li>
<li><p>调用全局的 beforeResolve 守卫(2.5+)</p>
</li>
<li><p>导航被确认</p>
</li>
<li><p>调用全局的 afterEach 钩子</p>
</li>
<li><p>触发 DOM 更新</p>
</li>
<li><p>调用 beforeRouteEnter 守卫中传给 next 的回调函数，创建好的组件实例会作为回调函数的参数传入</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419163238823.png" alt="image-20230419163238823" style="zoom: 67%;" />



<h2 id="12-Vue全家桶-Vuex状态管理"><a href="#12-Vue全家桶-Vuex状态管理" class="headerlink" title="12.Vue全家桶 - Vuex状态管理"></a>12.Vue全家桶 - Vuex状态管理</h2><h3 id="1、认识应用状态管理"><a href="#1、认识应用状态管理" class="headerlink" title="1、认识应用状态管理"></a>1、认识应用状态管理</h3><h4 id="1-什么是状态管理"><a href="#1-什么是状态管理" class="headerlink" title="1.什么是状态管理"></a>1.什么是状态管理</h4><p>在开发中，应用程序需要处理各种各样的数据，这些数据需要保存在应用程序中的某一个位置，对于这些数据的管理我们就称之为是状态管理</p>
<p>在前面的如何管理自己的状态方式</p>
<ul>
<li><p>在Vue开发中，使用组件化的开发方式</p>
</li>
<li><p>而在组件中定义 data 或者在 setup 中返回使用的数据，这些数据我们称之为 state</p>
</li>
<li><p>在模块 template 中可以使用这些数据，模块最终会被渲染成 DOM，称之为View</p>
</li>
<li><p>在模块中会产生一些行为事件，处理这些行为事件时，有可能会修改 state，这些行为事件称之为 actions</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419163423469.png" alt="image-20230419163423469" style="zoom:50%;" />



<h4 id="2-复杂的状态管理"><a href="#2-复杂的状态管理" class="headerlink" title="2.复杂的状态管理"></a>2.复杂的状态管理</h4><p>JavaScript 开发的应用程序，已经变得越来越复杂</p>
<ul>
<li><p>JavaScript需要管理的状态越来越多，越来越复杂</p>
</li>
<li><p>这些状态包括服务器返回的数据、缓存数据、用户操作产生的数据等等</p>
</li>
<li><p>也包括一些UI的状态，比如某些元素是否被选中，是否显示加载动效，当前分页</p>
</li>
</ul>
<p>当应用遇到多个组件共享状态时，单向数据流的简洁性很容易被破坏</p>
<ul>
<li><p>多个视图依赖于同一状态</p>
</li>
<li><p>来自不同视图的行为需要变更同一状态</p>
</li>
</ul>
<p>是否可以通过组件数据的传递来完成</p>
<ul>
<li><p>对于一些简单的状态，可以通过props的传递或者Provide的方式来共享状态</p>
</li>
<li><p>但是对于复杂的状态管理来说，单纯通过传递和共享的方式是不足以解决问题的，比如兄弟组件共享数据</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419164257028.png" alt="image-20230419164257028" style="zoom: 33%;" />



<h4 id="3-Vuex-的状态管理"><a href="#3-Vuex-的状态管理" class="headerlink" title="3.Vuex 的状态管理"></a>3.Vuex 的状态管理</h4><p>管理不断变化的state本身是非常困难的</p>
<ul>
<li>状态之间相互会存在依赖，一个状态的变化会引起另一个状态的变化，View页面也有可能会引起状态的变化</li>
<li>当应用程序复杂时，state在什么时候，因为什么原因而发生了变化，发生了怎么样的变化，会变得非常难以控制和追踪</li>
</ul>
<p>因此，需要考虑将组件的内部状态抽离出来，以一个全局单例的方式来管理</p>
<ul>
<li><p>在这种模式下，我们的组件树构成了一个巨大的 “试图View”</p>
</li>
<li><p>不管在树的哪个位置，任何组件都能获取状态或者触发行为</p>
</li>
<li><p>通过定义和隔离状态管理中的各个概念，并通过强制性的规则来维护视图和状态间的独立性，我们的代码边会变得更加结构化和易于维护、跟踪</p>
</li>
</ul>
<p>这就是Vuex背后的基本思想，它借鉴了Flux、Redux、Elm（纯函数语言，redux有借鉴它的思想）</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419164051648.png" alt="image-20230419164051648" style="zoom:67%;" />



<h3 id="2、Vuex-的基本使用"><a href="#2、Vuex-的基本使用" class="headerlink" title="2、Vuex 的基本使用"></a>2、Vuex 的基本使用</h3><p>安装：npm install vuex</p>
<h4 id="1-创建-store"><a href="#1-创建-store" class="headerlink" title="1.创建 store"></a>1.创建 store</h4><p>每一个Vuex应用的核心就是store（仓库）</p>
<ul>
<li>store本质上是一个容器，它包含着你的应用中大部分的状态（state）</li>
</ul>
<p>Vuex和单纯的全局对象有什么区别</p>
<ul>
<li><p>第一：Vuex 的状态存储是响应式的</p>
<ul>
<li>当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会被更新</li>
</ul>
</li>
<li><p>第二：不能直接改变 store 中的状态</p>
<ul>
<li>改变 store 中的状态的唯一途径就显示提交 (commit) mutation</li>
<li>这样可以方便的跟踪每一个状态的变化，从而能够通过一些工具帮助更好的管理应用的状态</li>
</ul>
</li>
</ul>
<h4 id="2-基本使用-1"><a href="#2-基本使用-1" class="headerlink" title="2.基本使用"></a>2.基本使用</h4><p>使用步骤</p>
<ul>
<li>创建Store对象</li>
<li>在app中通过插件安装</li>
</ul>
<p>组件中使用 store</p>
<ul>
<li>在模板中使用</li>
<li>在options api中使用，比如computed</li>
<li>在setup中使用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">创建store文件夹，写入 js 文件</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="comment">// state() &#123;</span></span><br><span class="line">  <span class="comment">//   return &#123;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">counter</span>: <span class="number">100</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br><span class="line">                          </span><br><span class="line">在 main.<span class="property">js</span>中导入并使用：</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(store).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line">在 template 中访问</span><br><span class="line">&lt;h2&gt;<span class="title class_">Home</span>页面计数：&#123;&#123; $store.<span class="property">state</span>.<span class="property">counter</span> &#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">在 setup 中测试响应式</span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 也能修改，但是官发不建议并且说明了改变store的值的唯一方式是通过mutations</span></span><br><span class="line">  <span class="comment">// store.state.counter++</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 通过mutations  能够实时追踪更新 counter，不需要手动刷新，会自动刷新</span></span><br><span class="line">  store.<span class="title function_">commit</span>(<span class="string">&quot;increment&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store 中的 mutations</span></span><br><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">state</span>) &#123;</span><br><span class="line">        state.<span class="property">counter</span>++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 options api 中使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">storeCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">counter</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 setup 中使用注意</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> setupCounter = store.<span class="property">state</span>.<span class="property">counter</span>  <span class="comment">// 丢失响应式</span></span><br><span class="line"><span class="keyword">const</span> &#123; counter&#125;  = <span class="title function_">toRefs</span>(store.<span class="property">state</span>)  <span class="comment">// 不加 refs 也会丢失响应式</span></span><br></pre></td></tr></table></figure>



<h3 id="3、核心概念-State"><a href="#3、核心概念-State" class="headerlink" title="3、核心概念 State"></a>3、核心概念 State</h3><h4 id="1-单一状态树"><a href="#1-单一状态树" class="headerlink" title="1.单一状态树"></a>1.单一状态树</h4><p>Vuex 使用单一状态树</p>
<ul>
<li>用一个对象就包含了全部的应用层级的状态</li>
<li>采用的是SSOT，Single Source of Truth，也可以翻译成单一数据源</li>
</ul>
<p>这也意味着，每个应用将仅仅包含一个 store 实例</p>
<ul>
<li>单状态树和模块化并不冲突</li>
</ul>
<p>单一状态树的优势：</p>
<ul>
<li>如果你的状态信息是保存到多个Store对象中的，那么之后的管理和维护等等都会变得特别困难</li>
<li>所以Vuex也使用了单一状态树来管理应用层级的全部状态</li>
<li>单一状态树能够让我们最直接的方式找到某个状态的片段</li>
<li>而且在之后的维护和调试过程中，也可以非常方便的管理和维护</li>
</ul>
<h4 id="2-组件获取状态"><a href="#2-组件获取状态" class="headerlink" title="2.组件获取状态"></a>2.组件获取状态</h4><p>在前面已经学习过如何在组件中获取状态</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span>在模板中直接使用多个状态 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>name: &#123;&#123; $store.state.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>level: &#123;&#123; $store.state.level &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>  ... </span><br></pre></td></tr></table></figure>

<p>如果觉得有点繁琐（表达式过长），可以使用计算属性（opition api）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">name</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">name</span></span><br><span class="line">    &#125;,   <span class="comment">// 也是写多遍，还是繁琐</span></span><br></pre></td></tr></table></figure>

<p>但是，如果有很多个状态都需要获取，可以使用mapState的辅助函数</p>
<ul>
<li><p>mapState的方式一：数组类型</p>
</li>
<li><p>mapState的方式二：对象类型</p>
</li>
<li><p>也可以使用展开运算符和来原有的 computed 混合在一起</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 计算属性（映射状态：数组写法） --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>name: &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>level: &#123;&#123;level&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;!-- 计算属性（映射状态：对象写法） --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>name: &#123;&#123;sName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>level: &#123;&#123;sLevel&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span> --&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// 数组写法，可能会出现名称冲突</span></span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&quot;counter&quot;</span>, <span class="string">&quot;level&quot;</span>, <span class="string">&quot;name&quot;</span>]),</span><br><span class="line">    <span class="comment">// 对象写法</span></span><br><span class="line">    ...<span class="title function_">mapState</span>(&#123;</span><br><span class="line">      <span class="attr">sName</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">sLevel</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">level</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-在-setup-中使用-mapState"><a href="#3-在-setup-中使用-mapState" class="headerlink" title="3.在 setup 中使用 mapState"></a>3.在 setup 中使用 mapState</h4><p>在 setup 中如果单个获取装是非常简单的：通过useStore拿到store后去获取某个状态即可</p>
<p>但是如果需要使用 mapState 的功能</p>
<ul>
<li>默认情况下，Vuex并没有提供非常方便的使用mapState的方式，可以进行了一个函数的封装</li>
</ul>
<p>方法1：拿到函数，绑定 this</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1.一步步完成</span></span><br><span class="line"><span class="keyword">const</span> &#123; name, level &#125; = <span class="title function_">mapState</span>([<span class="string">&quot;name&quot;</span>, <span class="string">&quot;level&quot;</span>])</span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cName = <span class="title function_">computed</span>(name.<span class="title function_">bind</span>(&#123; <span class="attr">$store</span>: store &#125;))</span><br><span class="line"><span class="keyword">const</span> cLevel = <span class="title function_">computed</span>(level.<span class="title function_">bind</span>(&#123; <span class="attr">$store</span>: store &#125;))</span><br></pre></td></tr></table></figure>

<p>方法2：封装函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useState <span class="keyword">from</span> <span class="string">&quot;../hooks/useState&quot;</span></span><br><span class="line"><span class="keyword">const</span> &#123; name, level&#125; = <span class="title function_">useState</span>([<span class="string">&quot;name&quot;</span>, <span class="string">&quot;level&quot;</span>])</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419172451987.png" alt="image-20230419172451987" style="zoom: 67%;" />

<p>对象写法：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230419173013463.png" alt="image-20230419173013463" style="zoom:67%;" />

<p>方法3：解构再添加响应式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 直接对store.state进行结构</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"><span class="comment">// 可以起别名，防止重名</span></span><br><span class="line"><span class="keyword">const</span> &#123; name, level&#125; = <span class="title function_">toRefs</span>(store.<span class="property">state</span>)</span><br></pre></td></tr></table></figure>



<h3 id="4、核心概念-Getters"><a href="#4、核心概念-Getters" class="headerlink" title="4、核心概念 Getters"></a>4、核心概念 Getters</h3><h4 id="1-基本使用-3"><a href="#1-基本使用-3" class="headerlink" title="1.基本使用"></a>1.基本使用</h4><p>某些属性可能需要经过变化后来使用，这个时候可以使用getters</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">doubleCounter</span>(<span class="params">state</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state.<span class="property">counter</span> * <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>在组件中获取</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">doublecounter</span>: &#123;&#123; $store.<span class="property">getters</span>.<span class="property">doubleCounter</span> &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<p>稍微复杂一点的数据</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">users</span>: [</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">111</span>, <span class="attr">name</span>: <span class="string">&#x27;whd&#x27;</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">112</span>, <span class="attr">name</span>: <span class="string">&#x27;wh&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">113</span>, <span class="attr">name</span>: <span class="string">&#x27;wd&#x27;</span>, <span class="attr">age</span>: <span class="number">13</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">114</span>, <span class="attr">name</span>: <span class="string">&#x27;wds&#x27;</span>, <span class="attr">age</span>: <span class="number">22</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="title function_">totalAge</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">users</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">preValue,item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> preValue + item.<span class="property">age</span></span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>usersTotalAge: &#123;&#123; $store.getters.totalAge &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="2-getters-第二个参数"><a href="#2-getters-第二个参数" class="headerlink" title="2.getters 第二个参数"></a>2.getters 第二个参数</h4><p>getters 可以接收第二个参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在该getters属性中，获取其他的getters</span></span><br><span class="line"><span class="title function_">message</span>(<span class="params">state, getters</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`name:<span class="subst">$&#123;state.name&#125;</span> level:<span class="subst">$&#123;state.level&#125;</span> friendAge: <span class="subst">$&#123;getters.totalAge&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;<span class="attr">message</span>: &#123;&#123; $store.<span class="property">getters</span>.<span class="property">message</span> &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>



<h4 id="3-getter-的返回函数"><a href="#3-getter-的返回函数" class="headerlink" title="3.getter 的返回函数"></a>3.getter 的返回函数</h4><p>getters中的函数本身，可以返回一个函数，那么在使用的地方相当于可以调用这个函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 根据id获取某一个用户的信息 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>获取id为111的信息: &#123;&#123; $store.getters.getUserById(111)&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="title function_">getUserById</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> user = state.<span class="property">users</span>.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> === id)</span><br><span class="line">        <span class="keyword">return</span> user</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-mapGetters-的辅助函数"><a href="#4-mapGetters-的辅助函数" class="headerlink" title="4.mapGetters 的辅助函数"></a>4.mapGetters 的辅助函数</h4><p>映射</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">doublecounter</span>: &#123;&#123; doubleCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>usersTotalAge: &#123;&#123; totalAge &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>message: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>id为111的用户信息: &#123;&#123; getUserById(111)&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>  </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...<span class="title function_">mapGetters</span>([<span class="string">&quot;doubleCounter&quot;</span>, <span class="string">&quot;totalAge&quot;</span>, <span class="string">&quot;message&quot;</span>]),</span><br><span class="line">        ...<span class="title function_">mapGetters</span>([<span class="string">&quot;getUserById&quot;</span>])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 setup 中使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">一般使用</span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters, useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">message</span>:messageFn&#125; = <span class="title function_">mapGetters</span>([<span class="string">&quot;message&quot;</span>])</span><br><span class="line"><span class="keyword">const</span> message = <span class="title function_">computed</span>(messageFn.<span class="title function_">bind</span>(&#123; <span class="attr">$store</span>:store&#125;))</span><br><span class="line"></span><br><span class="line">解构方法  </span><br><span class="line">报警告 <span class="title function_">toRefs</span>() expects a reactive object but received a plain one.</span><br><span class="line"><span class="keyword">const</span> &#123; message &#125; =  <span class="title function_">toRefs</span>(store.<span class="property">getters</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">// 针对某一个getters属性使用computed</span></span><br><span class="line"><span class="keyword">const</span> message = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> store.<span class="property">getters</span>.<span class="property">message</span>)</span><br></pre></td></tr></table></figure>



<h3 id="5、核心概念-Mutations"><a href="#5、核心概念-Mutations" class="headerlink" title="5、核心概念 Mutations"></a>5、核心概念 Mutations</h3><h4 id="1-基本使用-4"><a href="#1-基本使用-4" class="headerlink" title="1.基本使用"></a>1.基本使用</h4><p>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">changeName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">name</span> = <span class="string">&quot;wangxiaobo&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// this.$store.state.name = &quot;李银河&quot;</span></span><br><span class="line">      <span class="comment">// 可以跟踪修改</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;changeName&quot;</span>)</span><br><span class="line">&#125;,&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-携带数据"><a href="#2-携带数据" class="headerlink" title="2.携带数据"></a>2.携带数据</h4><p>携带数据：简单数据</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">changeName</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">    state.<span class="property">name</span> = payload</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;changeName&quot;</span>, <span class="string">&quot;wxb&quot;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>携带数据：对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">changeInfo</span>(<span class="params">state, newInfo</span>) &#123;</span><br><span class="line">    state.<span class="property">name</span> = newInfo.<span class="property">name</span></span><br><span class="line">    state.<span class="property">level</span> = newInfo.<span class="property">level</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">changeInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;changeInfo&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;网二&quot;</span>,</span><br><span class="line">        <span class="attr">level</span>: <span class="number">99</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对象风格的提交方式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">incrementLevel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;incrementLevel&quot;</span>,</span><br><span class="line">        <span class="attr">counter</span>: <span class="number">100</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h4 id="3-常量类型"><a href="#3-常量类型" class="headerlink" title="3.常量类型"></a>3.常量类型</h4><p>目的：在组件中的提交名称与 mutation 中的方法的名称是需要保持一致的，担心名字写错，可以使用常量</p>
<p>方法：</p>
<ul>
<li>定义 muutation_type.js 文件存放常量</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">CHANGE_INFO</span> = <span class="string">&quot;CHANGE_INFO&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在 store 中使用常量</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">CHANGE_INFO</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./mutation_types&quot;</span></span><br><span class="line">[<span class="variable constant_">CHANGE_INFO</span>](state, newInfo) &#123;</span><br><span class="line">    state.<span class="property">name</span> = newInfo.<span class="property">name</span></span><br><span class="line">    state.<span class="property">level</span> = newInfo.<span class="property">level</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在组件中使用常量</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">CHANGE_INFO</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../store/mutation_types&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">changeInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="variable constant_">CHANGE_INFO</span>, &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;网二&quot;</span>,</span><br><span class="line">      <span class="attr">level</span>: <span class="number">99</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-mapMutation-辅助函数"><a href="#4-mapMutation-辅助函数" class="headerlink" title="4.mapMutation 辅助函数"></a>4.mapMutation 辅助函数</h4><h5 id="1、options-api-中"><a href="#1、options-api-中" class="headerlink" title="1、options api 中"></a>1、options api 中</h5><p>不带参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">      ...<span class="title function_">mapMutations</span>([<span class="string">&quot;changeName&quot;</span>, <span class="string">&quot;incrementLevel&quot;</span>, <span class="variable constant_">CHANGE_INFO</span>])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;button @click=<span class="string">&quot;incrementLevel&quot;</span>&gt;递增level&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>带普通参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;changeName(&#x27;王小波i&#x27;)&quot;</span>&gt;修改name&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>带对象参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;changeInfo(&#123; name:&#x27;dws&#x27;, level: 105&#125;)&quot;</span>&gt;修改info&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>带对象参数最好不要使用常量</p>
<p>可以修改一下常量</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">CHANGE_INFO</span> = <span class="string">&quot;changeInfo&quot;</span></span><br></pre></td></tr></table></figure>



<h5 id="2、在-setup-中"><a href="#2、在-setup-中" class="headerlink" title="2、在 setup() 中"></a>2、在 setup() 中</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations,useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">CHANGE_INFO</span>&#125; <span class="keyword">from</span> <span class="string">&quot;../store/mutation_types&quot;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动的映射和绑定</span></span><br><span class="line"><span class="keyword">const</span> mutations = <span class="title function_">mapMutations</span>([<span class="string">&quot;changeName&quot;</span>, <span class="string">&quot;incrementLevel&quot;</span>, <span class="variable constant_">CHANGE_INFO</span>])</span><br><span class="line"><span class="keyword">const</span> newMutations = &#123;&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(mutations).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    newMutations[key] = mutations[key].<span class="title function_">bind</span>(&#123; <span class="attr">$store</span>: store&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> &#123; changeName, incrementLevel, changeInfo &#125; = newMutations</span><br></pre></td></tr></table></figure>



<h4 id="5-mutation-重要原则"><a href="#5-mutation-重要原则" class="headerlink" title="5.mutation 重要原则"></a>5.mutation 重要原则</h4><p>一条重要的原则就是要记住 mutation 必须是同步函数</p>
<ul>
<li>这是因为 devtool 工具会记录 mutation 的日记</li>
<li>每一条mutation被记录，devtools 都需要捕捉到前一状态和后一状态的快照</li>
<li>但是在 mutation 中执行异步操作，就无法追踪到数据的变化</li>
</ul>
<p>所以 Vuex 的重要原则中要求 mutation必须是同步函数</p>
<p>但是如果希望在 Vuex 中发送网络请求的话需要如何操作：Actions</p>
<h3 id="6、核心概念-Actions"><a href="#6、核心概念-Actions" class="headerlink" title="6、核心概念 Actions"></a>6、核心概念 Actions</h3><p>Action 类似于 mutation，不同在于：</p>
<ul>
<li><p>Action 提交的是 mutation，而不是直接变更状态</p>
</li>
<li><p>Action 可以包含任意异步操作</p>
</li>
</ul>
<p>这里有一个非常重要的参数 context：</p>
<ul>
<li><p>context 是一个和 store 实例均有相同方法和属性的 context 对象</p>
</li>
<li><p>所以我们可以从其中获取到 commit 方法来提交一个 mutation，或者通过 context.state 和 context.getters 来获取 state 和 getters</p>
</li>
</ul>
<p>但是为什么它不是store对象呢？等到 Modules 具体来说</p>
<h4 id="1-基本操作"><a href="#1-基本操作" class="headerlink" title="1.基本操作"></a>1.基本操作</h4><p>使用action 分发</p>
<ul>
<li>分发使用的是 store 上的dispatch函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">incrementAction</span>(<span class="params">context</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(context.commit) // 用于提交mutation</span></span><br><span class="line">        <span class="comment">// console.log(context.getters) // getters</span></span><br><span class="line">        <span class="comment">// console.log(context.state)  // state</span></span><br><span class="line">    	context.<span class="title function_">commit</span>(<span class="string">&quot;increment&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">methods中：</span><br><span class="line"><span class="title function_">counterBtnClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;incrementAction&quot;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>同样的，它也可以携带参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">changeNameAction</span>(<span class="params">context, payload</span>) &#123;</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&quot;changeName&quot;</span>, payload)</span><br><span class="line">&#125;</span><br><span class="line">methods中:</span><br><span class="line"><span class="title function_">nameBtnClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;changeNameAction&quot;</span>, <span class="string">&quot;why&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以以对象的形式进行分发</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230420081706466.png" alt="image-20230420081706466"></p>
<h4 id="2-actions-辅助函数"><a href="#2-actions-辅助函数" class="headerlink" title="2.actions 辅助函数"></a>2.actions 辅助函数</h4><p>action 也有对应的辅助函数</p>
<ul>
<li>数组类型的写法</li>
</ul>
<p>options api</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">...<span class="title function_">mapActions</span>([<span class="string">&quot;incrementAction&quot;</span>, <span class="string">&quot;changeNameAction&quot;</span>])</span><br></pre></td></tr></table></figure>

<p>composition api</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions, useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"><span class="number">1.</span>在setup中使用mapactions辅助函数</span><br><span class="line"><span class="keyword">const</span> actions = <span class="title function_">mapActions</span>([<span class="string">&quot;incrementAction&quot;</span>, <span class="string">&quot;changeNameAction&quot;</span>])</span><br><span class="line"><span class="keyword">const</span> newActions = &#123;&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(actions).<span class="title function_">forEach</span>( <span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    newActions[key] = actions[key].<span class="title function_">bind</span>(&#123; <span class="attr">$store</span>: store&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> &#123; incrementAction, changeNameAction&#125; = newActions</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.默认做法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    store.<span class="title function_">dispatch</span>(<span class="string">&quot;incrementAction&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对象写法</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230420081726099.png" alt="image-20230420081726099"></p>
<h4 id="3-actions-发起网络请求"><a href="#3-actions-发起网络请求" class="headerlink" title="3.actions 发起网络请求"></a>3.actions 发起网络请求</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">fetchHomeMultidataAction</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    <span class="comment">// 1返回promise,给promise设置then</span></span><br><span class="line">    <span class="comment">// fetch(&quot;http://123.207.32.32:8000/home/multidata&quot;).then(res =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   res.json().then(data =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     console.log(data)</span></span><br><span class="line">    <span class="comment">//   &#125;)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.promise的链式调用</span></span><br><span class="line">    <span class="comment">// fetch(&quot;http://123.207.32.32:8000/home/multidata&quot;).then(res =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   return res.json()</span></span><br><span class="line">    <span class="comment">//   &#125;).then(data =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     console.log(data)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.awiat/async</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">    <span class="comment">// console.log(data)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改state数据</span></span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&quot;changeBanners&quot;</span>, data.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span>)</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&quot;changeRecommends&quot;</span>, data.<span class="property">data</span>.<span class="property">recommend</span>.<span class="property">list</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="string">&quot;fetchHomeMultidataAction&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">changeBanners</span>(<span class="params">state, banners</span>) &#123;</span><br><span class="line">    state.<span class="property">banners</span> = banners</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">changeRecommends</span>(<span class="params">state, recommends</span>) &#123;</span><br><span class="line">    state.<span class="property">recommends</span> = recommends</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-actions-的异步操作"><a href="#4-actions-的异步操作" class="headerlink" title="4.actions 的异步操作"></a>4.actions 的异步操作</h4><p>Action 通常是异步的，如何知道 action 的结束</p>
<ul>
<li>可以通过让 action 返回 Promise，在 Promise 的 then 中来处理完成后的操作</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetchHomeMultidataAction</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">async</span> (resolve, reject) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>)</span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&quot;changeBanners&quot;</span>, data.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span>)</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&quot;changeRecommends&quot;</span>, data.<span class="property">data</span>.<span class="property">recommend</span>.<span class="property">list</span>)</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&quot;sdw&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="string">&quot;fetchHomeMultidataAction&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;home中的then回调&quot;</span>, res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="7、核心概念-Modules"><a href="#7、核心概念-Modules" class="headerlink" title="7、核心概念 Modules"></a>7、核心概念 Modules</h3><h4 id="1-module-的基本使用"><a href="#1-module-的基本使用" class="headerlink" title="1.module 的基本使用"></a>1.module 的基本使用</h4><p>什么是Module</p>
<ul>
<li><p>由于使用单一状态树，应用的所有状态会集中到一个比较大的对象，当应用变得非常复杂时，store 对象就有可能变得相当臃肿</p>
</li>
<li><p>为了解决以上问题，Vuex 允许我们将 store 分割成模块（module）</p>
</li>
<li><p>每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块</p>
</li>
</ul>
<p>做法：</p>
<ul>
<li>新建 modules 文件夹，将需要抽出的组件的数据抽离并导出</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123; &#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123; &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在 store 中导入并放入 module 中</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> homeModule <span class="keyword">from</span> <span class="string">&quot;./modules/home&quot;</span></span><br><span class="line"><span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">home</span>: homeModule</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在组件中获取 module 中的数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">for</span>=<span class="string">&quot;item in $store.state.home.banners&quot;</span> :key=<span class="string">&quot;item.acm&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p>在抽离之前发起的 dispatch 形式暂时不需要修改</p>
<h4 id="2-module-的局部状态"><a href="#2-module-的局部状态" class="headerlink" title="2.module 的局部状态"></a>2.module 的局部状态</h4><p>对于模块内部的 mutation 和 getter，接收的第一个参数是模块的局部状态对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">counter模块中：</span><br><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">incrementCount</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    state.<span class="property">count</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">doubleCount</span>(<span class="params">state, getters, rootState</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state.<span class="property">count</span> + rootState.<span class="property">rootCounter</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">incrementCountAction</span>(<span class="params">context</span>) &#123;</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&quot;incrementCount&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template 中：</span><br><span class="line">&lt;!-- <span class="number">1.</span>使用state时，是需要通过state.<span class="property">moduleName</span>.<span class="property">xxx</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Counter模块中的count： &#123;&#123; $store.state.counter.count&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;!-- <span class="number">2.</span>使用getters时，是直接getters.<span class="property">xxx</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Counter模块中的doubleCount： &#123;&#123; $store.getters.doubleCount&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">setup 中：</span><br><span class="line"><span class="comment">// 派发事件时，默认也是不需要根模块</span></span><br><span class="line"><span class="comment">// 提交mutation时，默认也是不需要模块名称</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">incrementCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    store.<span class="title function_">dispatch</span>(<span class="string">&quot;incrementCountAction&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-module-的命名空间"><a href="#3-module-的命名空间" class="headerlink" title="3.module 的命名空间"></a>3.module 的命名空间</h4><p>默认情况下，模块内部的 action 和 mutation 仍然是注册在全局的命名空间中的</p>
<ul>
<li><p>这样使得多个模块能够对同一个 action 或 mutation 作出响应</p>
</li>
<li><p>Getter 同样也默认注册在全局命名空间</p>
</li>
</ul>
<p>如果我们希望模块具有更高的封装度和复用性，可以添加 namespaced: true 的方式使其成为带命名空间的模块</p>
<ul>
<li>当模块被注册后，它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">counter模块中:</span><br><span class="line"><span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要加上命名空间</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Counter模块中的doubleCount： &#123;&#123; $store.getters[&quot;counter/doubleCount&quot;] &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">incrementCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    store.<span class="title function_">dispatch</span>(<span class="string">&quot;counter/incrementCountAction&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-module-修改或派发根组件"><a href="#4-module-修改或派发根组件" class="headerlink" title="4.module 修改或派发根组件"></a>4.module 修改或派发根组件</h4><p>如果希望在action中修改root中的state，那么有如下的方式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230420104445571.png" alt="image-20230420104445571"></p>
<h2 id="13-Vue全家桶-Pinia状态管理"><a href="#13-Vue全家桶-Pinia状态管理" class="headerlink" title="13.Vue全家桶 - Pinia状态管理"></a>13.Vue全家桶 - Pinia状态管理</h2><h3 id="1、Pinia-和-Vuex-的对比"><a href="#1、Pinia-和-Vuex-的对比" class="headerlink" title="1、Pinia 和 Vuex 的对比"></a>1、Pinia 和 Vuex 的对比</h3><h4 id="1-什么是-Pinia"><a href="#1-什么是-Pinia" class="headerlink" title="1.什么是 Pinia"></a>1.什么是 Pinia</h4><ul>
<li><p>Pinia开始于大概2019年，最初是作为一个实验为Vue重新设计状态管理，让它用起来像组合式API（Composition API）</p>
</li>
<li><p>从那时到现在，最初的设计原则依然是相同的，并且目前同时兼容Vue2、Vue3，也并不要求你使用Composition API</p>
</li>
<li><p>Pinia本质上依然是一个状态管理的库，用于跨组件、页面进行状态共享（这点和Vuex、Redux一样）</p>
</li>
</ul>
<h4 id="2-Pinia-和-Vuex-的区别"><a href="#2-Pinia-和-Vuex-的区别" class="headerlink" title="2.Pinia 和 Vuex 的区别"></a>2.Pinia 和 Vuex 的区别</h4><p>有 Vuex 为什么还要用 Pinia</p>
<ul>
<li><p>Pinia 最初是为了探索 Vuex 的下一次迭代会是什么样子，结合了 Vuex 5 核心团队讨论中的许多想法</p>
</li>
<li><p>最终，团队意识到 Pinia 已经实现了 Vuex5 中大部分内容，所以最终决定用 Pinia 来替代 Vuex</p>
</li>
<li><p>与 Vuex 相比，Pinia 提供了一个更简单的 API，具有更少的仪式，提供了 Composition-API 风格的 API</p>
</li>
<li><p>最重要的是，在与 TypeScript 一起使用时具有可靠的类型推断支持</p>
</li>
</ul>
<p>和 Vuex 相比，Pinia 有很多的优势</p>
<ul>
<li><p>mutations 不再存在：</p>
<ul>
<li>他们经常被认为是非常冗长</li>
<li>他们最初带来了 devtools 集成，但这不再是问题</li>
</ul>
</li>
<li><p>更友好的 TypeScript 支持，Vuex 之前对 TS 的支持很不友好</p>
</li>
<li><p>不再有 modules 的嵌套结构：</p>
<ul>
<li>你可以灵活使用每一个 store，它们是通过扁平化的方式来相互使用的</li>
</ul>
</li>
<li><p>也不再有命名空间的概念，不需要记住它们的复杂关系</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230420110608336.png" alt="image-20230420110608336" style="zoom:50%;" />



<h3 id="2、创建-Pinia-的-Store"><a href="#2、创建-Pinia-的-Store" class="headerlink" title="2、创建 Pinia 的 Store"></a>2、创建 Pinia 的 Store</h3><h4 id="1-认识-store"><a href="#1-认识-store" class="headerlink" title="1.认识 store"></a>1.认识 store</h4><ul>
<li><p>一个 Store （如 Pinia）是一个实体，它会持有为绑定到你组件树的状态和业务逻辑，也就是保存了全局的状态</p>
</li>
<li><p>它有点像始终存在，并且每个人都可以读取和写入的组件</p>
</li>
<li><p>可以在你的应用程序中定义任意数量的Store来管理你的状态</p>
</li>
</ul>
<p> Store有三个核心概念：</p>
<ul>
<li>state、getters、actions</li>
<li>等同于组件的data、computed、methods</li>
<li>一旦 store 被实例化，就可以直接在 store 上访问 state、getters 和 actions 中定义的任何属性</li>
</ul>
<h4 id="2-基本使用-2"><a href="#2-基本使用-2" class="headerlink" title="2.基本使用"></a>2.基本使用</h4><ul>
<li><p>定义一个Store</p>
<ul>
<li>需要知道 Store 是使用 defineStore() 定义的</li>
<li>并且它需要一个唯一名称，作为第一个参数传递</li>
<li>这个 name，也称为 id，是必要的，Pinia 使用它来将 store 连接到 devtools</li>
<li>返回的函数统一使用useX作为命名方案，这是约定的规范</li>
</ul>
</li>
<li><p>使用定义的 Store</p>
<ul>
<li>Store 在它被使用之前是不会创建的，可以通过调用 use 函数来使用 Store</li>
<li>注意Store获取到后不能被解构，那么会失去响应式</li>
<li>为了从 Store 中提取属性同时保持其响应式，需要使用storeToRefs()。</li>
</ul>
</li>
</ul>
<p>安装：npm install pinia or yarn add pinia</p>
<h4 id="3-详细使用"><a href="#3-详细使用" class="headerlink" title="3.详细使用"></a>3.详细使用</h4><ul>
<li>创建一个 pinia，并且将其传递给应用程序</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">index.<span class="property">js</span>：</span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> pinia</span><br><span class="line"></span><br><span class="line">main.<span class="property">js</span>：</span><br><span class="line"><span class="keyword">import</span> pinia <span class="keyword">from</span> <span class="string">&#x27;./stores&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(pinia).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>创建页面的 store</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义关于counter的store</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span></span><br><span class="line"><span class="keyword">const</span> useCounter = <span class="title function_">defineStore</span>(<span class="string">&quot;counter&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">99</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounter</span><br></pre></td></tr></table></figure>

<ul>
<li>组件中使用数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">count</span>: &#123;&#123; counterStore.<span class="property">count</span> &#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;@/stores/counter&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br></pre></td></tr></table></figure>



<p>解构之后失去响应式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; count &#125; = counterStore</span><br><span class="line">&lt;h2&gt;<span class="attr">count</span>: &#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<p>获取响应式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">方法<span class="number">1</span>：</span><br><span class="line"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; count &#125; = <span class="title function_">toRefs</span>(counterStore)</span><br><span class="line"></span><br><span class="line">方法<span class="number">2</span>：</span><br><span class="line"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; count&#125; = <span class="title function_">storeToRefs</span>(counterStore)</span><br></pre></td></tr></table></figure>



<h3 id="3、Pinia-核心概念-State"><a href="#3、Pinia-核心概念-State" class="headerlink" title="3、Pinia 核心概念 State"></a>3、Pinia 核心概念 State</h3><p>state 是 store 的核心部分，因为store是用来帮助我们管理状态的</p>
<ul>
<li>在 Pinia 中，状态被定义为返回初始状态的函数</li>
</ul>
<h4 id="操作-State"><a href="#操作-State" class="headerlink" title="操作 State"></a>操作 State</h4><p>读取和写入 State</p>
<ul>
<li>默认情况下，可以通过 store 实例访问状态来直接读取和写入状态</li>
</ul>
<p>改变 State</p>
<ul>
<li>除了直接用 store.counter++ 修改 store，你还可以调用 $patch 方法</li>
<li>它允许您使用部分“state”对象同时应用多个更改</li>
</ul>
<p>替换 State</p>
<ul>
<li>可以通过将其 $state 属性设置为新对象来替换 Store 的整个状态</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">changeState</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 1.修改state(一个一个修改状态)</span></span><br><span class="line">  <span class="comment">// useStore.name = &#x27;kobe&#x27;</span></span><br><span class="line">  <span class="comment">// useStore.age = 30</span></span><br><span class="line">  <span class="comment">// useStore.level = 200</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.一次性修改多个状态</span></span><br><span class="line">  <span class="comment">// useStore.$patch(&#123;</span></span><br><span class="line">  <span class="comment">//   name: &quot;james&quot;,</span></span><br><span class="line">  <span class="comment">//   age: 35,</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.替换state为新的对象</span></span><br><span class="line">  <span class="keyword">const</span> oldState = useStore.<span class="property">$state</span></span><br><span class="line">  useStore.<span class="property">$state</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;curry&quot;</span>,</span><br><span class="line">    <span class="attr">level</span>: <span class="number">199</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 并不是完全替换，应该是有劫持，发生了融合，指向同一个地址</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(oldState === useStore.<span class="property">$state</span>) <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>重置 State</p>
<ul>
<li>你可以通过调用 store 上的 $reset() 方法将状态重置到其初始值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">resetState</span>(<span class="params"></span>) &#123;</span><br><span class="line">  useStore.$reset()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4、Pinia-核心概念-Getters"><a href="#4、Pinia-核心概念-Getters" class="headerlink" title="4、Pinia 核心概念 Getters"></a>4、Pinia 核心概念 Getters</h3><p>Getters 相当于 Store 的计算属性</p>
<ul>
<li>它们可以用 defineStore() 中的 getters 属性定义</li>
<li>getters 中可以定义接受一个 state 作为参数的函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">doubleCount</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> * <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>在页面中访问 store 中的 getters</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">doubleCount</span>: &#123;&#123; counterStore.<span class="property">doubleCount</span> &#125;&#125;&lt;/h2&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>doubleCountAddOne: &#123;&#123; counterStore.doubleCountAddOne &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<p>Getters 中访问自己的其他 Getters</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">doubleCountAddOne</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// this是store实例</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">doubleCount</span> + <span class="number">1</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p>访问其他store的Getters</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useUser <span class="keyword">from</span> <span class="string">&quot;./user&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">showMessage</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="comment">// 1.获取user信息</span></span><br><span class="line">    <span class="keyword">const</span> userStore = <span class="title function_">useUser</span>()</span><br><span class="line">    <span class="comment">// 2.获取自己的信息</span></span><br><span class="line">    <span class="comment">// 3.拼接信息</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`name:<span class="subst">$&#123;userStore.name&#125;</span>-count:<span class="subst">$&#123;state.count&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;<span class="attr">showMessage</span>: &#123;&#123; counterStore.<span class="property">showMessage</span> &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>



<p>Getters也可以返回一个函数，这样就可以接受参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getFriendById</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; state.<span class="property">friends</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> friend = state.<span class="property">friends</span>[i]</span><br><span class="line">            <span class="keyword">if</span>(friend.<span class="property">id</span> === id) &#123;</span><br><span class="line">                <span class="keyword">return</span> friend</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line">在页面中使用：</span><br><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&quot;@/stores/counter&quot;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;friend-<span class="number">112</span>: &#123;&#123; counterStore.<span class="title function_">getFriendById</span>(<span class="number">112</span>) &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>



<h3 id="5、Pinia-核心概念-Actions"><a href="#5、Pinia-核心概念-Actions" class="headerlink" title="5、Pinia 核心概念 Actions"></a>5、Pinia 核心概念 Actions</h3><p>Actions 相当于组件中的 methods</p>
<ul>
<li>可以使用 defineStore() 中的 actions 属性定义，并且它们非常适合定义业务逻辑</li>
</ul>
<p>和getters一样，在action中可以通过this访问整个store实例的所有操作</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">num</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(state)</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">count</span> += num</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&quot;@/stores/counter&quot;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeState</span>(<span class="params"></span>) &#123;</span><br><span class="line">    counterStore.<span class="title function_">increment</span>(<span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;button @click=<span class="string">&quot;changeState&quot;</span>&gt;修改state&lt;/button&gt;</span><br></pre></td></tr></table></figure>



<p>Action 执行异步操作</p>
<ul>
<li>可以编写异步函数，在函数中使用await</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> useHome = <span class="title function_">defineStore</span>(<span class="string">&quot;home&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">banners</span>: [],</span><br><span class="line">    <span class="attr">recommends</span>: []</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">fetchHomeMultidata</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>)</span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">      </span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">banners</span> = data.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">recommends</span> = data.<span class="property">data</span>.<span class="property">recommend</span>.<span class="property">list</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;adsdw&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> useHome <span class="keyword">from</span> <span class="string">&quot;@/stores/home&quot;</span></span><br><span class="line"><span class="keyword">const</span> homeStore = <span class="title function_">useHome</span>()</span><br><span class="line">homeStore.<span class="title function_">fetchHomeMultidata</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fetchHomeMultidata已经完成了&quot;</span>, res)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;!-- 展示数据-------- --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in homeStore.banners&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="14-网络请求库-axios库"><a href="#14-网络请求库-axios库" class="headerlink" title="14.网络请求库 - axios库"></a>14.网络请求库 - axios库</h2><h3 id="1、认识-Axios-库"><a href="#1、认识-Axios-库" class="headerlink" title="1、认识 Axios 库"></a>1、认识 Axios 库</h3><p>安装：npm install axios</p>
<p>功能特点</p>
<ul>
<li><p>在浏览器中发送 XMLHttpRequests 请求</p>
</li>
<li><p>在 node.js 中发送 http请求</p>
</li>
<li><p>支持 Promise API</p>
</li>
<li><p>拦截请求和响应</p>
</li>
<li><p>转换请求和响应数据</p>
</li>
</ul>
<h3 id="2、axios-发送请求"><a href="#2、axios-发送请求" class="headerlink" title="2、axios 发送请求"></a>2、axios 发送请求</h3><h4 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h4><p>支持多种请求方式</p>
<ul>
<li>axios(config)</li>
<li>axios.request(config)</li>
<li>axios.get(url[, config])</li>
<li>axios.delete(url[, config])</li>
<li>axios.head(url[, config])</li>
<li>axios.post(url[, data[, config]])</li>
<li>axios.put(url[, data[, config]])</li>
<li>axios.patch(url[, data[, config]])</li>
</ul>
<p>有时候可能需求同时发送两个请求</p>
<ul>
<li>使用axios.all, 可以放入多个请求的数组</li>
<li>axios.all([]) 返回的结果是一个数组，使用 axios.spread 可将数组 [res1,res2] 展开为 res1, res2</li>
</ul>
<h4 id="常见配置"><a href="#常见配置" class="headerlink" title="常见配置"></a>常见配置</h4><p>请求地址</p>
<ul>
<li>url: ‘&#x2F;user’,</li>
</ul>
<p>请求类型</p>
<ul>
<li>method: ‘get’,</li>
</ul>
<p>请求根路径</p>
<ul>
<li>baseURL: ‘<a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.mt.com/api">http://www.mt.com/api</a>‘,</li>
</ul>
<p>请求前的数据处理</p>
<ul>
<li>transformRequest:[function(data){}],</li>
</ul>
<p>请求后的数据处理</p>
<ul>
<li>transformResponse: [function(data){}],</li>
</ul>
<p>自定义的请求头</p>
<ul>
<li>headers:{‘x-Requested-With’:’XMLHttpRequest’},</li>
</ul>
<p>URL查询对象</p>
<ul>
<li>params:{ id: 12 },</li>
</ul>
<p>查询对象序列化函数</p>
<ul>
<li>paramsSerializer: function(params){ }</li>
</ul>
<p>request body</p>
<ul>
<li>data: { key: ‘aa’},</li>
</ul>
<p>超时设置</p>
<ul>
<li>timeout: 1000</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&quot;http://123.207.32.32:1888/02_param/postjson&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;coderwhy&quot;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&quot;123456&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>, res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="额外补充"><a href="#额外补充" class="headerlink" title="额外补充"></a>额外补充</h4><p>baseURL</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.baseURL</span></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&quot;http://123.207.32.32:8000&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 给axios实例配置公共的基础配置</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = baseURL</span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">timeout</span> = <span class="number">10000</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.1 get:/home/multidata</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;/home/multidata&quot;</span>).<span class="title function_">then</span>( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>, res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>发送多个请求</p>
<ul>
<li>所有的请求完成之后才会调用 then</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">all</span>([</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&quot;/home/multidata&quot;</span>),</span><br><span class="line">  axios.<span class="title function_">post</span>(<span class="string">&quot;http://123.207.32.32:1888/02_param/postjson&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;coderwhy&quot;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&quot;123456&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">]).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res&quot;</span>, res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="3、axios-创建实例"><a href="#3、axios-创建实例" class="headerlink" title="3、axios 创建实例"></a>3、axios 创建实例</h3><p>为什么要创建axios的实例</p>
<ul>
<li>当我们从axios模块中导入对象时, 使用的实例是默认的实例</li>
<li>当给该实例设置一些默认配置时, 这些配置就被固定下来了</li>
<li>但是后续开发中, 某些配置可能会不太一样</li>
<li>比如某些请求需要使用特定的baseURL或者timeout等</li>
<li>这个时候就可以创建新的实例, 并且传入属于该实例的配置信息</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// axios默认库提供给我们的实例对象</span></span><br><span class="line"><span class="comment">// axios.get(&quot;url&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建其他的实例发送网络请求</span></span><br><span class="line"><span class="keyword">const</span> instance1 = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&quot;http://132.207.32.32:8000&quot;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">10000</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line">instance1.<span class="title function_">get</span>(<span class="string">&quot;/lyric&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">500665346</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instance2 = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&quot;http://132.207.32.32:9001&quot;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="4、axios-的拦截器"><a href="#4、axios-的拦截器" class="headerlink" title="4、axios 的拦截器"></a>4、axios 的拦截器</h3><p>axios的也可以设置拦截器：拦截每次请求和响应</p>
<ul>
<li><p>axios.interceptors.request.use(请求成功拦截, 请求失败拦截)</p>
</li>
<li><p>axios.interceptors.response.use(响应成功拦截, 响应失败拦截)</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对实例配置拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 请求成功的拦截</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求成功&quot;</span>)</span><br><span class="line">  <span class="comment">// 开始loading动画</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对原来的配置文件进行修改</span></span><br><span class="line">  <span class="comment">// 2.1 heder</span></span><br><span class="line">  <span class="comment">// 2.2 认证登录：token/cookie</span></span><br><span class="line">  <span class="comment">// 2.3 请求参数进行某些转化</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// if (config.url === &quot;/user/info&quot;)&#123;</span></span><br><span class="line">  <span class="comment">//   config.header[&quot;token&quot;] = &quot;coderwhy&quot;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求失败的拦截&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 这里拦截之后返回res.data，在下方则不需要写为res.data了。这里已经做了转换</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应成功拦截&quot;</span>)</span><br><span class="line">  <span class="comment">// 结束loading动画</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对数据进行转化，再返回数据</span></span><br><span class="line">  <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">&#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应失败的拦截:&quot;</span>, err)</span><br><span class="line">  <span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>, res)</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err:&quot;</span>, err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="5、axios-请求封装"><a href="#5、axios-请求封装" class="headerlink" title="5、axios 请求封装"></a>5、axios 请求封装</h3><p>封装的目的：为了防止 axios 突然不维护，而项目与 axios 的耦合度太高，以至于修改项目的成本太高与过于复杂</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HYRequest</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">baseURL, timeout=<span class="number">10000</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">instance</span> = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">      baseURL,</span><br><span class="line">      timeout</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">request</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">instance</span>.<span class="title function_">request</span>(config).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(err)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(&#123;...config, <span class="attr">method</span>:<span class="string">&quot;get&quot;</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">post</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(&#123;...config, <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以创建多个实例</span></span><br><span class="line"><span class="comment">// const hyRequest1 = new HYRequest(&quot;&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置baseURL</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">HYRequest</span>(<span class="string">&quot;http://123.207.32.32:8000&quot;</span>)</span><br><span class="line"></span><br><span class="line">使用：</span><br><span class="line"><span class="keyword">import</span> hyRequest <span class="keyword">from</span> <span class="string">&quot;./service&quot;</span></span><br><span class="line">hyRequest.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;/home/multidata&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>, res)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hyRequest.<span class="title function_">get</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;/home/multidata&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>, res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="15-项目实战"><a href="#15-项目实战" class="headerlink" title="15.项目实战"></a>15.项目实战</h2><h3 id="1、初始项目步骤"><a href="#1、初始项目步骤" class="headerlink" title="1、初始项目步骤"></a>1、初始项目步骤</h3><p>安装项目—&gt;npm install —&gt;npm run xx —&gt;去除默认样式—&gt;添加jsconfig（代码提示友好）—&gt;创建项目结构（目录）—&gt;CSS样式的重置（npm i normalize  main中引入）—&gt;创建路由—&gt;开发</p>
<p>修改第三方UI组件库的样式</p>
<p>1.插槽：插入自己的元素：那么可以在自己的作用域中直接修改这个元素</p>
<p>2.全局定义一个变量，覆盖它默认的值，但会修改全局</p>
<p>3.布局定义一个变量，覆盖它默认变量的值，优点：局部修改</p>
<p>4.直接查找对应的子组件选择器，进行修改</p>
<ul>
<li>:deep(子组件元素的选择器)进行修改</li>
<li>直接修改CSS</li>
</ul>
<h3 id="2、创建路由"><a href="#2、创建路由" class="headerlink" title="2、创建路由"></a>2、创建路由</h3><h3 id="3、tab-搭建"><a href="#3、tab-搭建" class="headerlink" title="3、tab 搭建"></a>3、tab 搭建</h3><h3 id="4、Home-主页"><a href="#4、Home-主页" class="headerlink" title="4、Home 主页"></a>4、Home 主页</h3><h3 id="5、detail-页面"><a href="#5、detail-页面" class="headerlink" title="5、detail 页面"></a>5、detail 页面</h3><h3 id="6、其他"><a href="#6、其他" class="headerlink" title="6、其他"></a>6、其他</h3><h4 id="1-主页发起网络请求阻止"><a href="#1-主页发起网络请求阻止" class="headerlink" title="1.主页发起网络请求阻止"></a>1.主页发起网络请求阻止</h4><h4 id="2-跳转回home页面保持scrollTop"><a href="#2-跳转回home页面保持scrollTop" class="headerlink" title="2.跳转回home页面保持scrollTop"></a>2.跳转回home页面保持scrollTop</h4><h4 id="3-移动端视口与vw单位转换"><a href="#3-移动端视口与vw单位转换" class="headerlink" title="3.移动端视口与vw单位转换"></a>3.移动端视口与vw单位转换</h4><h2 id="16-高级语法"><a href="#16-高级语法" class="headerlink" title="16.高级语法"></a>16.高级语法</h2><h3 id="1、Vue-中自定义指令"><a href="#1、Vue-中自定义指令" class="headerlink" title="1、Vue 中自定义指令"></a>1、Vue 中自定义指令</h3><h4 id="1-了解自定义指令"><a href="#1-了解自定义指令" class="headerlink" title="1.了解自定义指令"></a>1.了解自定义指令</h4><p>在 Vue 的模板语法中我们学习过各种各样的指令：v-show、v-for、v-model等等，除了使用这些指令之外，Vue也允许我们来自定义自己的指令</p>
<ul>
<li><p>注意：在Vue中，代码的复用和抽象主要还是通过组件</p>
</li>
<li><p>通常在某些情况下，你需要对DOM元素进行底层操作，这个时候就会用到自定义指令</p>
</li>
</ul>
<p>自定义指令分为两种：</p>
<ul>
<li>自定义局部指令：组件中通过 directives 选项，只能在当前组件中使用</li>
</ul>
<ul>
<li>自定义全局指令：app的 directive 方法，可以在任意组件中被使用</li>
</ul>
<p>比如我们来做一个非常简单的案例：当某个元素挂载完成后可以自定获取焦点</p>
<ul>
<li>实现方式一：如果我们使用默认的实现方式</li>
<li>实现方式二：自定义一个 v-focus 的局部指令</li>
<li>实现方式三：自定义一个 v-focus 的全局指令</li>
</ul>
<h4 id="2-基本使用-3"><a href="#2-基本使用-3" class="headerlink" title="2.基本使用"></a>2.基本使用</h4><p>以挂载input元素自动获取焦点实现</p>
<p>方式1：定义ref绑定input中，调用focus()</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=<span class="string">&quot;inputRef&quot;</span>&gt;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">import</span> useInput <span class="keyword">from</span> <span class="string">&quot;./hooks/useInput&quot;</span></span><br><span class="line"><span class="keyword">const</span> &#123; inputRef &#125; = <span class="title function_">useInput</span>()</span><br></pre></td></tr></table></figure>

<p>方式2：自定义指令（局部指令）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-focus&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">directives</span>: &#123;</span><br><span class="line">    <span class="attr">focus</span>: &#123;</span><br><span class="line">      <span class="comment">// 生命周期的函数（自定义指令）</span></span><br><span class="line">      <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;v-focus应用的元素被挂载了&quot;</span>, el)</span><br><span class="line">        el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 在setup函数中的写法：</span></span><br><span class="line"><span class="keyword">const</span> vFocus = &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;v-focus应用的元素被挂载了&quot;</span>, el)</span><br><span class="line">    el.<span class="title function_">focus</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方式3：自定义指令（全局指令）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义direvtives文件focus.js，统一导出到index</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">directiveFocus</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  app.<span class="title function_">directive</span>(<span class="string">&quot;focus&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;v-focus应用的元素被挂载了&quot;</span>, el)</span><br><span class="line">      el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在main.js中</span></span><br><span class="line"><span class="comment">// 方式1.</span></span><br><span class="line"><span class="keyword">import</span> directiveFocus <span class="keyword">from</span> <span class="string">&quot;./01-自定义指令/directives/focus.js&quot;</span></span><br><span class="line"><span class="title function_">directiveFocus</span>(app)</span><br><span class="line"><span class="comment">// 方式2.</span></span><br><span class="line"><span class="keyword">import</span> useDirectives <span class="keyword">from</span> <span class="string">&quot;./01-自定义指令/directives/index&quot;</span></span><br><span class="line"><span class="title function_">useDirectives</span>(app)</span><br></pre></td></tr></table></figure>



<h4 id="3-自定义指令的生命周期"><a href="#3-自定义指令的生命周期" class="headerlink" title="3.自定义指令的生命周期"></a>3.自定义指令的生命周期</h4><p>一个指令定义的对象，Vue提供了如下的几个钩子函数：</p>
<ul>
<li><p>created：在绑定元素的 attribute 或事件监听器被应用之前调用</p>
</li>
<li><p>beforeMount：当指令第一次绑定到元素并且在挂载父组件之前调用</p>
</li>
<li><p>mounted：在绑定元素的父组件被挂载后调用</p>
</li>
<li><p>beforeUpdate：在更新包含组件的 VNode 之前调用</p>
</li>
<li><p>updated：在包含组件的 VNode 及其子组件的 VNode 更新后调用</p>
</li>
<li><p>beforeUnmount：在卸载绑定元素的父组件之前调用</p>
</li>
<li><p>unmounted：当指令与元素解除绑定且父组件已卸载时，只调用一次</p>
</li>
</ul>
<h4 id="4-指令的参数和修饰符"><a href="#4-指令的参数和修饰符" class="headerlink" title="4.指令的参数和修饰符"></a>4.指令的参数和修饰符</h4><p>如果指令需要接受一些参数或者修饰符应该如何操作</p>
<ul>
<li><p>info是参数的名称</p>
</li>
<li><p>aaa-bbb是修饰符的名称</p>
</li>
<li><p>后面是传入的具体的值</p>
</li>
</ul>
<p>在生命周期中，我们可以通过 bindings 获取到对应的内容：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230730145927372.png" alt="image-20230730145927372"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter++&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 参数-修饰符-值 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-wbh:koby.abc.cba</span>=<span class="string">&quot;message&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 价格拼接单位符号 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-unit</span>=<span class="string">&quot;&#x27;¥&#x27;&quot;</span>&gt;</span> &#123;&#123; 111 &#125;&#125; <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> message = <span class="string">&#x27;你好啊，李银河&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> vWbh = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params">el, bindings</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(bindings)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    el.<span class="property">textContent</span> = bindings.<span class="property">value</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// unit.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">directiveUnit</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  app.<span class="title function_">directive</span>(<span class="string">&quot;unit&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params">el, bindings</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> defaultText = el.<span class="property">textContent</span></span><br><span class="line">      <span class="keyword">let</span> unit = bindings.<span class="property">value</span></span><br><span class="line">      <span class="keyword">if</span> (!unit) &#123;</span><br><span class="line">        unit = <span class="string">&#x27;¥&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      el.<span class="property">textContent</span> = unit+ defaultText</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>自定义指令案例：时间戳的显示需求</p>
<ul>
<li><p>在开发中，大多数情况下从服务器获取到的都是时间戳</p>
</li>
<li><p>需要将时间戳转换成具体格式化的时间来展示</p>
</li>
<li><p>在Vue2中可以通过过滤器来完成</p>
</li>
<li><p>在Vue3中可以通过计算属性（computed） 或者自定义一个方法（methods）来完成</p>
</li>
<li><p>其实我们还可以通过一个自定义的指令来完成</p>
</li>
</ul>
<p>实现一个可以自动对时间格式化的指令v-format-time：</p>
<ul>
<li>这里封装了一个函数，在首页中我们只需要调用这个函数并且传入app即可</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">directiveFocus</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  app.<span class="title function_">directive</span>(<span class="string">&quot;focus&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;v-focus应用的元素被挂载了&quot;</span>, el)</span><br><span class="line">      el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-ftime</span>=<span class="string">&quot;&#x27;YYYY/MM/DD&#x27;&quot;</span>&gt;</span>&#123;&#123; timetamp &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-ftime</span>&gt;</span>&#123;&#123; 1679564623 &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> timetamp = <span class="number">1673223322</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="2、Vue-内置组件-Teleport"><a href="#2、Vue-内置组件-Teleport" class="headerlink" title="2、Vue 内置组件 Teleport"></a>2、Vue 内置组件 Teleport</h3><p>在组件化开发中，我们封装一个组件A，在另外一个组件B中使用：</p>
<ul>
<li><p>那么组件A中template的元素，会被挂载到组件B中template的某个位置</p>
</li>
<li><p>最终我们的应用程序会形成一颗DOM树结构</p>
</li>
</ul>
<p>但是某些情况下，我们希望组件不是挂载在这个组件树上的，可能是移动到Vue app之外的其他位置</p>
<ul>
<li><p>比如移动到body元素上，或者我们有其他的div#app之外的元素上</p>
</li>
<li><p>这个时候我们就可以通过teleport来完成</p>
</li>
</ul>
<p>Teleport是什么</p>
<ul>
<li><p>它是一个Vue提供的内置组件，类似于react的Portals</p>
</li>
<li><p>teleport翻译过来是心灵传输、远距离运输的意思</p>
</li>
<li><p>它有两个属性：</p>
<ul>
<li>to：指定将其中的内容移动到的目标元素，可以使用选择器</li>
<li>disabled：是否禁用 teleport 的功能</li>
</ul>
</li>
</ul>
<p> 如果我们将多个 teleport 应用到同一个目标上（to的值相同），那么这些目标会进行合并</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可以在组件上使用，也可以在元素上使用</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;#abc&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">hello-world</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;#abc&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h3 id="3、Vue-内置组件-Suspense"><a href="#3、Vue-内置组件-Suspense" class="headerlink" title="3、Vue 内置组件 Suspense"></a>3、Vue 内置组件 Suspense</h3><p>Suspense显示的是一个实验性的特性，API随时可能会修改</p>
<p>Suspense是一个内置的全局组件，该组件有两个插槽</p>
<ul>
<li><p>default：如果default可以显示，那么显示default的内容</p>
</li>
<li><p>fallback：如果default无法显示，那么会显示fallback插槽的内容</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncHome</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./AsyncHome.vue&quot;</span>))</span><br><span class="line"></span><br><span class="line">&lt;suspense&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">async-home</span>&gt;</span><span class="tag">&lt;/<span class="name">async-home</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>loading<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/suspense&gt;</span><br></pre></td></tr></table></figure>



<h3 id="4、Vue-中安装插件的方式"><a href="#4、Vue-中安装插件的方式" class="headerlink" title="4、Vue 中安装插件的方式"></a>4、Vue 中安装插件的方式</h3><p>通常我们向Vue全局添加一些功能时，会采用插件的模式，它有两种编写方式：</p>
<ul>
<li>对象类型：一个对象，但是必须包含一个 install 的函数，该函数会在安装插件时执行</li>
<li>函数类型：一个function，这个函数会在安装插件时自动执行</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自己编写插件</span></span><br><span class="line"><span class="comment">// 安装插件</span></span><br><span class="line"><span class="comment">// 方式1：传入对象的情况</span></span><br><span class="line">app.<span class="title function_">use</span>(&#123;</span><br><span class="line">  <span class="attr">install</span>: <span class="keyword">function</span>(<span class="params">app</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;传入的对象被执行&quot;</span>, app)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2：传入函数的情况</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;传入的函数被执行&quot;</span>, app)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>插件可以完成的功能没有限制，比如下面的几种都是可以的：</p>
<ul>
<li>添加全局方法或者 property，通过把它们添加到 config.globalProperties 上实现</li>
<li>添加全局资源：指令&#x2F;过滤器&#x2F;过渡等</li>
<li>通过全局 mixin 来添加一些组件选项</li>
<li>一个库，提供自己的 API，同时提供上面提到的一个或多个功能</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自定义指令的方式一：</span></span><br><span class="line"><span class="keyword">import</span> useDirectives <span class="keyword">from</span> <span class="string">&quot;./01-自定义指令/directives/index&quot;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="title function_">useDirectives</span>(app)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义指令的方式二：使用插件的方式</span></span><br><span class="line"><span class="keyword">import</span> directives <span class="keyword">from</span> <span class="string">&quot;./01-自定义指令/directives/index&quot;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(directives).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="5、Vue-中渲染函数的使用"><a href="#5、Vue-中渲染函数的使用" class="headerlink" title="5、Vue 中渲染函数的使用"></a>5、Vue 中渲染函数的使用</h3><p>Vue推荐在绝大数情况下使用模板来创建你的HTML，然后一些特殊的场景，需要JavaScript的完全编程的能力，这个时候可以使用渲染函数 ，它比模板更接近编译器</p>
<p>前面讲解的VNode和VDOM的概念</p>
<ul>
<li><p>Vue在生成真实的DOM之前，会将节点转换成VNode，而VNode组合在一起形成一颗树结构，就是虚拟DOM （VDOM）</p>
</li>
<li><p>事实上，之前编写的 template 中的HTML 最终也是使用渲染函数生成对应的VNode</p>
</li>
<li><p>那么，如果你想充分的利用JavaScript的编程能力，可以自己来编写 createVNode 函数，生成对应的VNode</p>
</li>
</ul>
<p>那么应该怎么来做呢？使用 h()函数：</p>
<ul>
<li><p>h() 函数是一个用于创建 vnode 的一个函数</p>
</li>
<li><p>其实更准备的命名是 createVNode() 函数，但是为了简便在Vue将之简化为 h() 函数</p>
</li>
</ul>
<p>它接受三个参数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230730130638672.png" alt="image-20230730130638672"></p>
<ul>
<li><p>如果没有props，那么通常可以将children作为第二个参数传入</p>
</li>
<li><p>如果会产生歧义，可以将null作为第二个参数传入，将children作为第三个参数传入</p>
</li>
</ul>
<h4 id="h-函数的基本使用"><a href="#h-函数的基本使用" class="headerlink" title="h 函数的基本使用"></a>h 函数的基本使用</h4><p>函数可以在两个地方使用：</p>
<ul>
<li><p>render函数选项中</p>
</li>
<li><p>setup函数选项中（setup本身需要是一个函数类型，函数再返回h函数创建的VNode）</p>
</li>
</ul>
<h5 id="1-在-optionsApi-中使用"><a href="#1-在-optionsApi-中使用" class="headerlink" title="1.在 optionsApi 中使用"></a>1.在 optionsApi 中使用</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">class</span>: <span class="string">&quot;app&quot;</span> &#125;, [</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;h2&quot;</span>, &#123;<span class="attr">className</span>: <span class="string">&quot;title&quot;</span>&#125;, <span class="string">&quot;我是标题&quot;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;p&quot;</span>, &#123;<span class="attr">class</span>: <span class="string">&quot;content&quot;</span>&#125;, <span class="string">&quot;我是内容,哈哈哈&quot;</span>),</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">实现计数器：</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;./Home.vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;app&quot;</span>&#125;, [</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;h2&quot;</span>, <span class="literal">null</span>, <span class="string">`当前计数: <span class="subst">$&#123; <span class="variable language_">this</span>.counter &#125;</span>`</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: <span class="variable language_">this</span>.<span class="property">increment</span> &#125;, <span class="string">&quot;+1&quot;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: <span class="variable language_">this</span>.<span class="property">decrement</span> &#125;, <span class="string">&quot;-1&quot;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="title class_">Home</span>)</span><br><span class="line">    ])</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">counter</span>++</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">counter</span>--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h5 id="2-在-setup-函数中使用"><a href="#2-在-setup-函数中使用" class="headerlink" title="2.在 setup 函数中使用"></a>2.在 setup 函数中使用</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; h, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;./Home.vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      counter.<span class="property">value</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      counter.<span class="property">value</span>--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;app&quot;</span>&#125;, [</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;h2&quot;</span>, <span class="literal">null</span>, <span class="string">`当前计数: <span class="subst">$&#123; counter.value &#125;</span>`</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: increment &#125;, <span class="string">&quot;+1&quot;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: decrement &#125;, <span class="string">&quot;-1&quot;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="title class_">Home</span>)</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h5 id="3-在-setup-语法糖中使用"><a href="#3-在-setup-语法糖中使用" class="headerlink" title="3.在 setup 语法糖中使用"></a>3.在 setup 语法糖中使用</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">render</span> /&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; h, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;./Home.vue&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    counter.<span class="property">value</span>++</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    counter.<span class="property">value</span>--</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">render</span> = (<span class="params"></span>) =&gt; <span class="title function_">h</span>(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;app&quot;</span>&#125;, [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">h</span>(<span class="string">&quot;h2&quot;</span>, <span class="literal">null</span>, <span class="string">`当前计数: <span class="subst">$&#123; counter.value &#125;</span>`</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">h</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: increment &#125;, <span class="string">&quot;+1&quot;</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">h</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: decrement &#125;, <span class="string">&quot;-1&quot;</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">h</span>(<span class="title class_">Home</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="6、Vue-中编写-jsx-的语法"><a href="#6、Vue-中编写-jsx-的语法" class="headerlink" title="6、Vue 中编写 jsx 的语法"></a>6、Vue 中编写 jsx 的语法</h3><p>如果希望在项目中使用 jsx，那么我们需要添加对jsx的支持：</p>
<p>jsx 我们通常会通过Babel来进行转换（React 编写的 jsx 就是通过 babel 转换的）</p>
<p>对于 Vue 来说，我们只需要在Babel中配置对应的插件即可</p>
<p>安装 Babel 支持Vue的jsx插件：npm install @vue&#x2F;babel-plugin-jsx -D</p>
<p>在 babel.config.js 配置文件中配置插件：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230730133534571.png" alt="image-20230730133534571"></p>
<p>如果是 Vite 环境，需要安装插件：npm install @vitejs&#x2F;plugin-vue-jsx -D</p>
<p>在 vite 中的配置文件进行配置：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> jsx <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue-jsx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title function_">jsx</span>()</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">fileURLToPath</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;./src&#x27;</span>, <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="1-在-optionsApi-中使用-1"><a href="#1-在-optionsApi-中使用-1" class="headerlink" title="1.在 optionsApi 中使用"></a>1.在 optionsApi 中使用</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;jsx&quot;</span>&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容，哈哈哈<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">实现计数器：</span><br><span class="line">&lt;script lang=<span class="string">&quot;jsx&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;./About.vue&#x27;</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123; this.counter &#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">this.increment</span> &#125;&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">this.decrement</span> &#125;&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">About</span>&gt;</span><span class="tag">&lt;/<span class="name">About</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">counter</span>++</span><br><span class="line">      &#125;,</span><br><span class="line">       <span class="title function_">decrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">counter</span>--</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="2-在-setup-函数中使用-1"><a href="#2-在-setup-函数中使用-1" class="headerlink" title="2.在 setup 函数中使用"></a>2.在 setup 函数中使用</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;jsx&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;./About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> =(<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      counter.<span class="property">value</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">decrement</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      counter.<span class="property">value</span>--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123; counter.value &#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">increment</span> &#125;&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">decrement</span> &#125;&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">About</span>&gt;</span><span class="tag">&lt;/<span class="name">About</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="3-在-setup-语法糖中使用-1"><a href="#3-在-setup-语法糖中使用-1" class="headerlink" title="3.在 setup 语法糖中使用"></a>3.在 setup 语法糖中使用</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">jsx</span> /&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;jsx&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;./About.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">increment</span> =(<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  counter.<span class="property">value</span>++</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">decrement</span>= (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  counter.<span class="property">value</span>--</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">jsx</span> = (<span class="params"></span>) =&gt; (</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数: &#123; counter.value &#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">increment</span> &#125;&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">decrement</span> &#125;&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    <span class="tag">&lt;<span class="name">About</span>&gt;</span><span class="tag">&lt;/<span class="name">About</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="17-Vue3实现过渡动画"><a href="#17-Vue3实现过渡动画" class="headerlink" title="17.Vue3实现过渡动画"></a>17.Vue3实现过渡动画</h2><h3 id="1、认识-Vue-的动画原理"><a href="#1、认识-Vue-的动画原理" class="headerlink" title="1、认识 Vue 的动画原理"></a>1、认识 Vue 的动画原理</h3><p>在开发中，我们想要给一个组件的显示和消失添加某种过渡动画，可以很好的增加用户体验：</p>
<ul>
<li><p>React框架本身并没有提供任何动画相关的API，所以在React中使用过渡动画我们需要使用一个第三方库 react-transitiongroup</p>
</li>
<li><p>Vue中为我们提供一些内置组件和对应的API来完成动画，利用它们我们可以方便的实现过渡动画效果</p>
</li>
</ul>
<p>没有动画的情况下，整个内容的显示和隐藏会非常的生硬：</p>
<p>如果希望给单元素或者组件实现过渡动画，可以使用 transition 内置组件来完成动画</p>
<p>Vue 提供了 transition 的封装组件，在下列情形中，可以给任何元素和组件添加进入&#x2F;离开过渡</p>
<ul>
<li>条件渲染 (使用 v-if)条件展示 (使用 v-show)</li>
</ul>
<ul>
<li><p>动态组件</p>
</li>
<li><p>组件根节点</p>
</li>
</ul>
<p>Vue自动给h2元素添加了动画，这是什么原因</p>
<p>当插入或删除包含在 transition 组件中的元素时，Vue 将会做以下处理：</p>
<p>1.自动嗅探目标元素是否应用了CSS过渡或者动画，如果有，那么在恰当的时机添加&#x2F;删除 CSS类名</p>
<p>2.如果 transition 组件提供了JavaScript钩子函数，这些钩子函数将在恰当的时机被调用</p>
<p>3.如果没有找到JavaScript钩子并且也没有检测到CSS过渡&#x2F;动画，DOM插入、删除操作将会立即执行</p>
<h3 id="2、动画中常见类的作用"><a href="#2、动画中常见类的作用" class="headerlink" title="2、动画中常见类的作用"></a>2、动画中常见类的作用</h3><p>现上面提到了很多个class，事实上Vue就是帮助我们在这些class之间来回切换完成的动画</p>
<ul>
<li>v-enter-from：定义进入过渡的开始状态<ul>
<li>在元素被插入之前生效，在元素被插入之后的下一帧移除</li>
</ul>
</li>
</ul>
<ul>
<li><p>v-enter-active：定义进入过渡生效时的状态</p>
<ul>
<li>在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡&#x2F;动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数</li>
</ul>
</li>
<li><p>v-enter-to：定义进入过渡的结束状态</p>
<ul>
<li>在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡&#x2F;动画完成之后移除</li>
</ul>
</li>
<li><p>v-leave-from：定义离开过渡的开始状态</p>
<ul>
<li>在离开过渡被触发时立刻生效，下一帧被移除</li>
</ul>
</li>
<li><p>v-leave-active：定义离开过渡生效时的状态</p>
<ul>
<li>在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡&#x2F;动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数</li>
</ul>
</li>
<li><p>v-leave-to：离开过渡的结束状态</p>
<ul>
<li>在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被删除)，在过渡&#x2F;动画完成之后移除</li>
</ul>
</li>
</ul>
<p>class 添加的时机和命名规则</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230730162045648.png" alt="image-20230730162045648"></p>
<p>class的name命名规则如下：</p>
<ul>
<li>如果使用的是一个没有name的transition，那么所有的class是以 v- 作为默认前缀</li>
</ul>
<ul>
<li>如果添加了一个name属性，比如 <code>&lt;transition name=&quot;wbh&quot;&gt;</code>，那么所有的class会以wbh- 开头</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;app&quot;</span>&gt; </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;wbh&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">.<span class="property">wbh</span>-leave-to,</span><br><span class="line">.<span class="property">wbh</span>-enter-<span class="keyword">from</span> &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">0.6</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">wbh</span>-leave-<span class="keyword">from</span>,</span><br><span class="line">.<span class="property">wbh</span>-enter-to &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">wbh</span>-enter-active,</span><br><span class="line">.<span class="property">wbh</span>-leave-active &#123;</span><br><span class="line">  <span class="attr">transition</span>: all 2s ease;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3、animation-动画实现"><a href="#3、animation-动画实现" class="headerlink" title="3、animation 动画实现"></a>3、animation 动画实现</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">.<span class="property">wbh</span>-enter-active &#123;</span><br><span class="line">  <span class="attr">animation</span>: wbhAnim 2s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">wbh</span>-leave-active &#123;</span><br><span class="line">  <span class="attr">animation</span>: wbhLeaveAnim 2s ease;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes wbhAnim &#123;</span><br><span class="line">  <span class="number">0</span>% &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50</span>% &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.25</span>);</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100</span>% &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes wbhLeaveAnim &#123;</span><br><span class="line">  <span class="number">0</span>% &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">translateX</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="number">100</span>% &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">translateX</span>(-500px);</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4、动画的常见属性设置"><a href="#4、动画的常见属性设置" class="headerlink" title="4、动画的常见属性设置"></a>4、动画的常见属性设置</h3><h4 id="1-同时设置过渡和动画（一般不设置）"><a href="#1-同时设置过渡和动画（一般不设置）" class="headerlink" title="1.同时设置过渡和动画（一般不设置）"></a>1.同时设置过渡和动画（一般不设置）</h4><p>Vue为了知道过渡的完成，内部是在监听 transitionend 或 animationend，到底使用哪一个取决于元素应用的CSS规则</p>
<ul>
<li>如果只是使用了其中的一个，那么Vue能自动识别类型并设置监听</li>
</ul>
<p>但是如果我们同时使用了过渡和动画</p>
<ul>
<li>并且在这个情况下可能某一个动画执行结束时，另外一个动画还没有结束</li>
<li>在这种情况下，我们设置 type 属性为 animation 或者 transition 来明确的告知Vue监听的类型</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;transition name=<span class="string">&quot;wbh&quot;</span> type=<span class="string">&quot;transition&quot;</span> :duration=<span class="string">&quot;1000&quot;</span>&gt;</span><br><span class="line">    </span><br><span class="line">.<span class="property">wbh</span>-enter-<span class="keyword">from</span>,</span><br><span class="line">.<span class="property">wbh</span>-leave-to &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">wbh</span>-leave-<span class="keyword">from</span>,</span><br><span class="line">.<span class="property">wbh</span>-enter-to &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">wbh</span>-enter-active &#123;</span><br><span class="line">  <span class="attr">animation</span>: wbhAnim 10s ease;</span><br><span class="line">  <span class="attr">transition</span>: opacity 2s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">wbh</span>-leave-active &#123;</span><br><span class="line">  <span class="attr">animation</span>: wbhLeaveAnim 10s ease;</span><br><span class="line">  <span class="attr">transition</span>: opacity 2s ease;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-显式的指定动画时间"><a href="#2-显式的指定动画时间" class="headerlink" title="2.显式的指定动画时间"></a>2.显式的指定动画时间</h4><p>也可以显式的来指定过渡的时间，通过 duration 属性</p>
<p>duration可以设置两种类型的值： </p>
<ul>
<li><p>number类型：同时设置进入和离开的过渡时间</p>
</li>
<li><p>object类型：分别设置进入和离开的过渡时间</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230730162913131.png" alt="image-20230730162913131"></p>
<h4 id="3-过渡的模式mode"><a href="#3-过渡的模式mode" class="headerlink" title="3.过渡的模式mode"></a>3.过渡的模式mode</h4><p>当前的动画在两个元素之间切换的时候存在的问题：</p>
<p>会发现动画哈哈哈和动画呵呵呵是同时存在的</p>
<ul>
<li><p>这是因为默认情况下进入和离开动画是同时发生的</p>
</li>
<li><p>如果确实我们希望达到这个的效果，那么是没有问题</p>
</li>
</ul>
<p>但是如果不希望同时执行进入和离开动画，那么需要设置transition的过渡模式：</p>
<ul>
<li>in-out: 新元素先进行过渡，完成之后当前元素过渡离开</li>
<li>out-in: 当前元素先进行过渡，完成之后新元素过渡进入</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;transition name=<span class="string">&quot;wbh&quot;</span> type=<span class="string">&quot;transition&quot;</span> :duration=<span class="string">&quot;1000&quot;</span> mode=<span class="string">&quot;in-out&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else</span>&gt;</span>呵呵呵<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>



<h4 id="4-动态组件的切换"><a href="#4-动态组件的切换" class="headerlink" title="4.动态组件的切换"></a>4.动态组件的切换</h4><p>上方的过渡模式案例同样适用于动态组件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;transition name=<span class="string">&quot;wbh&quot;</span> mode=<span class="string">&quot;out-in&quot;</span> appear&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot; isShow ? &#x27;home&#x27; : &#x27;about&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<h5 id="appear初次渲染"><a href="#appear初次渲染" class="headerlink" title="appear初次渲染"></a>appear初次渲染</h5><p>默认情况下，首次渲染的时候是没有动画的，如果希望给他添加上去动画，那么就可以增加另外一个属性appear</p>
<h3 id="5、列表元素动画组实现"><a href="#5、列表元素动画组实现" class="headerlink" title="5、列表元素动画组实现"></a>5、列表元素动画组实现</h3><p>目前为止，过渡动画只要是针对单个元素或者组件的： </p>
<ul>
<li><p>要么是单个节点</p>
</li>
<li><p>要么是同一时间渲染多个节点中的一个</p>
</li>
</ul>
<p>那么如果希望渲染的是一个列表，并且该列表中添加删除数据也希望有动画执行呢</p>
<ul>
<li>这时要使用<code>&lt;transition-group&gt;</code>组件来完成</li>
</ul>
<p>使用<code>&lt;transition-group&gt;</code>有如下的特点：</p>
<ul>
<li>默认情况下，它不会渲染一个元素的包裹器，但是你可以指定一个元素并以 tag attribute 进行渲染</li>
<li>过渡模式不可用，因为我们不再相互切换特有的元素</li>
<li>内部元素总是需要提供唯一的 key attribute 值</li>
<li>CSS 过渡的类将会应用在内部的元素中，而不是这个组&#x2F;容器本身</li>
</ul>
<h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p>案例：对一列数字进行操作：增加&#x2F;删除，在此过程中添加对应的动画</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;transition-group tag=<span class="string">&quot;div&quot;</span> name=<span class="string">&quot;wbh&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in nums&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/transition-group&gt;</span><br></pre></td></tr></table></figure>



<h3 id="6、列表元素的移动动画"><a href="#6、列表元素的移动动画" class="headerlink" title="6、列表元素的移动动画"></a>6、列表元素的移动动画</h3><p>在上面的案例中虽然新增的或者删除的节点是有动画的，但是对于哪些其他需要移动的节点是没有动画的</p>
<ul>
<li>可以通过使用一个新增的 v-move 的class来完成动画</li>
<li>它会在元素改变位置的过程中应用</li>
<li>像之前的名字一样，可以通过name来自定义前缀</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* opcity设置为0  但是仍占据空间  将其设置为绝对定位便可以为别的元素添加移动动画 */</span></span><br><span class="line">.<span class="property">wbh</span>-leave-active &#123;</span><br><span class="line">    <span class="attr">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 针对其他需要移动的节点的动画 */</span></span><br><span class="line">.<span class="property">wbh</span>-move &#123;</span><br><span class="line">    <span class="attr">transition</span>: all 2s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;button @click=<span class="string">&quot;shuffleNumber&quot;</span>&gt;打乱数字&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; shuffle &#125; <span class="keyword">from</span> <span class="string">&quot;underscore&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">shuffleNumber</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  nums.<span class="property">value</span> = <span class="title function_">shuffle</span>(nums.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="18-Vue2-Vue3-响应式原理"><a href="#18-Vue2-Vue3-响应式原理" class="headerlink" title="18.Vue2-Vue3 响应式原理"></a>18.Vue2-Vue3 响应式原理</h2><h2 id="19-项目打包和自动化部署"><a href="#19-项目打包和自动化部署" class="headerlink" title="19.项目打包和自动化部署"></a>19.项目打包和自动化部署</h2><h3 id="1、项目部署和DevOps"><a href="#1、项目部署和DevOps" class="headerlink" title="1、项目部署和DevOps"></a>1、项目部署和DevOps</h3><h4 id="1-传统开发模式"><a href="#1-传统开发模式" class="headerlink" title="1.传统开发模式"></a>1.传统开发模式</h4><p>在传统的开发模式中，开发的整个过程是按部就班就行</p>
<p>但是这种模式存在很大的弊端：</p>
<ul>
<li>工作的不协调：开发人员在开发阶段，测试和运维人员其实是处于等待的状态。等到测试阶段，开发人员等待测试反馈bug，也会处于等待状态</li>
<li>线上bug的隐患：项目准备交付时，突然出现了bug，所有人员需要加班、等待问题的处理</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230811214745576.png" alt="image-20230811214745576"></p>
<h4 id="2-DevOps-开发模式"><a href="#2-DevOps-开发模式" class="headerlink" title="2.DevOps 开发模式"></a>2.DevOps 开发模式</h4><p>DevOps是Development和Operations两个词的结合，将开发和运维结合起来的模式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230811214845555.png" alt="image-20230811214845555"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\王邦辉\AppData\Roaming\Typora\typora-user-images\image-20230811214910607.png" alt="image-20230811214910607"></p>
<h4 id="3-持续集成和持续交付"><a href="#3-持续集成和持续交付" class="headerlink" title="3.持续集成和持续交付"></a>3.持续集成和持续交付</h4><p>伴随着DevOps一起出现的两个词就是持续集成和持续交付(部署)：</p>
<ul>
<li>CI是Continuous Integration（持续集成）；</li>
<li>CD是两种翻译：Continuous Delivery（持续交付）或Continuous Deployment（持续部署）；</li>
</ul>
<p>持续集成CI：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230811214939067.png" alt="image-20230811214939067"></p>
<p>持续交付和持续部署：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230811215001791.png" alt="image-20230811215001791"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230811215111520.png" alt="image-20230811215111520"></p>
<h4 id="4-自动化部署流程"><a href="#4-自动化部署流程" class="headerlink" title="4.自动化部署流程"></a>4.自动化部署流程</h4><h3 id="2、购买云服务器"><a href="#2、购买云服务器" class="headerlink" title="2、购买云服务器"></a>2、购买云服务器</h3><h4 id="1-注册阿里云账号"><a href="#1-注册阿里云账号" class="headerlink" title="1.注册阿里云账号"></a>1.注册阿里云账号</h4><p>云服务器我们可以有很多的选择：阿里云、腾讯云、华为云</p>
<ul>
<li>目前在公司使用比较多的是阿里云</li>
<li>我自己之前也一直使用阿里云，也在使用腾讯云</li>
<li>之前华为云也有找我帮忙推广他们的活动</li>
</ul>
<p>我们需要注册阿里云账号</p>
<ul>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://aliyun.com/">https://aliyun.com/</a></p>
</li>
<li><p>注册即可，非常简单</p>
</li>
</ul>
<h4 id="2-购买云服务器"><a href="#2-购买云服务器" class="headerlink" title="2.购买云服务器"></a>2.购买云服务器</h4><p>购买云服务器其实是购买一个实例</p>
<ul>
<li>来到控制台</li>
<li>创建实例，选择类型和配置</li>
<li>配置网络安全组</li>
<li>创建实例</li>
</ul>
<h3 id="3、搭建服务器环境"><a href="#3、搭建服务器环境" class="headerlink" title="3、搭建服务器环境"></a>3、搭建服务器环境</h3><h4 id="1-jenkins自动化部署"><a href="#1-jenkins自动化部署" class="headerlink" title="1.jenkins自动化部署"></a>1.jenkins自动化部署</h4><p>留白</p>
<h4 id="2-nginx安装和配置"><a href="#2-nginx安装和配置" class="headerlink" title="2.nginx安装和配置"></a>2.nginx安装和配置</h4><h5 id="1、安装nginx"><a href="#1、安装nginx" class="headerlink" title="1、安装nginx"></a>1、安装nginx</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">dnf install nginx</span><br></pre></td></tr></table></figure>

<p>启动nginx</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl status nginx</span><br><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure>



<h5 id="2、配置nginx"><a href="#2、配置nginx" class="headerlink" title="2、配置nginx"></a>2、配置nginx</h5><p>这里主要配置nginx的用户和默认访问目录：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">/etc/nginx/nginx.<span class="property">conf</span></span><br></pre></td></tr></table></figure>

<p>配置用户：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230811214035537.png" alt="image-20230811214035537"></p>
<p>通过Linux命令创建文件夹和文件：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">mkdir /root/mall_cms</span><br><span class="line">cd /root/mall_cms</span><br><span class="line">touch index.<span class="property">html</span></span><br><span class="line"></span><br><span class="line">vi index.<span class="property">html</span></span><br></pre></td></tr></table></figure>

<p>配置访问目录：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wbhnote.oss-cn-hangzhou.aliyuncs.com/img/image-20230811214138041.png" alt="image-20230811214138041"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://awzz-coder.github.io">awzz-coder</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://awzz-coder.github.io/archives/f8e09374.html">https://awzz-coder.github.io/archives/f8e09374.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://awzz-coder.github.io" target="_blank">awzz博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/IT%E5%89%8D%E7%AB%AF/">IT前端</a><a class="post-meta__tags" href="/tags/Vue/">Vue</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/">前端框架</a></div><div class="post_share"><div class="social-share" data-image="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat-pay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/wechat-pay.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/ali-pay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/ali-pay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/archives/ef9ebb65.html" title="小程序开发实战"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">小程序开发实战</div></div></a></div><div class="next-post pull-right"><a href="/archives/7db00131.html" title="前端工程化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">前端工程化</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/archives/f99e1de4.html" title="HTML&#x2F;CSS 知识体系（部分）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-12</div><div class="title">HTML&#x2F;CSS 知识体系（部分）</div></div></a></div><div><a href="/archives/4b0178e0.html" title="JavaScript基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-23</div><div class="title">JavaScript基础</div></div></a></div><div><a href="/archives/7db00131.html" title="前端工程化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-01</div><div class="title">前端工程化</div></div></a></div><div><a href="/archives/0.html" title="数据结构与算法"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-10</div><div class="title">数据结构与算法</div></div></a></div><div><a href="/archives/5205ee75.html" title="面试题"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-10</div><div class="title">面试题</div></div></a></div><div><a href="/archives/ef9ebb65.html" title="小程序开发实战"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-01</div><div class="title">小程序开发实战</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81ODI5MC8zNDc1Mw=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">awzz-coder</div><div class="author-info__description">我的博客笔记-前端分享</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" href="https://awzz-coder.github.io"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/awzz-coder" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.baidu.com" rel="external nofollow noreferrer" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="https://space.bilibili.com/476760963?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="B站"><i class="fas fa-b"></i></a><a class="social-icon" href="/546836216@qq.com" target="_blank" title="QQ邮箱"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到awzz的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue"><span class="toc-text">Vue</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%82%82%E9%80%85Vue"><span class="toc-text">1.邂逅Vue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Vue%E5%9C%A8%E5%89%8D%E7%AB%AF%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-text">1、Vue在前端的重要性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Vue2%E8%BF%98%E6%98%AFVue3"><span class="toc-text">2、Vue2还是Vue3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Vue-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">3、Vue 初体验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%91%BD%E4%BB%A4%E5%BC%8F%E4%B8%8E%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="toc-text">4、命令式与声明式编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81MVC%E5%92%8CMVVM%E7%9A%84%E6%A8%A1%E5%9E%8B%E5%8C%BA%E5%88%AB"><span class="toc-text">5、MVC和MVVM的模型区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%B8%B8%E7%94%A8-options-api"><span class="toc-text">6、常用 options api</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-data"><span class="toc-text">1.data</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-methods"><span class="toc-text">2.methods</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81vscode-%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5"><span class="toc-text">7、vscode 代码片段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="toc-text">2.模板语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Mustache-%E8%AF%AD%E6%B3%95"><span class="toc-text">1、Mustache 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%B8%B8%E8%A7%81%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4"><span class="toc-text">2、常见基本指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-v-once"><span class="toc-text">1.v-once</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-v-text"><span class="toc-text">2.v-text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-v-html"><span class="toc-text">3.v-html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-v-pre"><span class="toc-text">4.v-pre</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-v-cloak"><span class="toc-text">5.v-cloak</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-v-memo"><span class="toc-text">6.v-memo</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81v-bind-%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7"><span class="toc-text">3、v-bind 绑定属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%91%E5%AE%9A%E5%9F%BA%E6%9C%AC%E5%B1%9E%E6%80%A7"><span class="toc-text">1.绑定基本属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%91%E5%AE%9Aclass"><span class="toc-text">2.绑定class</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BB%91%E5%AE%9Astyle"><span class="toc-text">3.绑定style</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7"><span class="toc-text">4.动态绑定属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%BB%91%E5%AE%9A%E5%AF%B9%E8%B1%A1"><span class="toc-text">5.绑定对象</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E3%80%81Vue-%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-text">4 、Vue 的事件绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81Vue-%E7%9A%84%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">5、Vue 的条件渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-v-if%E7%9A%84%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86"><span class="toc-text">1.v-if的渲染原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-template-%E5%85%83%E7%B4%A0"><span class="toc-text">2.template 元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-v-show%E5%92%8Cv-if%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">3.v-show和v-if的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81Vue-%E7%9A%84%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-text">6、Vue 的列表渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B8%B2%E6%9F%93%EF%BC%88%E9%81%8D%E5%8E%86%EF%BC%89%E6%96%B9%E5%BC%8F"><span class="toc-text">1.渲染（遍历）方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-template%E5%85%83%E7%B4%A0"><span class="toc-text">2.template元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B"><span class="toc-text">3.数组更新检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-v-for%E4%B8%AD%E7%9A%84key"><span class="toc-text">4.v-for中的key</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%BA%86%E8%A7%A3key%E5%B1%9E%E6%80%A7"><span class="toc-text">1、了解key属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%99%9A%E6%8B%9FDOM"><span class="toc-text">2、虚拟DOM</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81key%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">3、key的作用</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Options-API"><span class="toc-text">3.Options API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7computed"><span class="toc-text">1、计算属性computed</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">1.基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%AF%B9%E6%AF%94%E5%AE%9E%E7%8E%B0"><span class="toc-text">案例对比实现</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-text">1.模板语法：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-methods-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.methods 实现</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-computed-%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.computed 实现</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-computed-%E5%92%8C-methods-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">2.computed 和 methods 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-computed-%E7%9A%84-setter-%E5%92%8C-getter"><span class="toc-text">3.computed 的 setter 和 getter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%BE%A6%E5%90%AC%E5%99%A8watch"><span class="toc-text">2、侦听器watch</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-text">1.什么是侦听器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BE%A6%E5%90%AC"><span class="toc-text">2.基本侦听</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BE%A6%E5%90%AC%E9%80%89%E9%A1%B9"><span class="toc-text">3.侦听选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-text">4.其他的写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E9%98%B6%E6%AE%B5%E7%BB%83%E4%B9%A0"><span class="toc-text">3、阶段练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Vue-%E7%9A%84%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-text">4. Vue 的双向绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">1、基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81v-model-%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-text">2、v-model 的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%BB%91%E5%AE%9A%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B"><span class="toc-text">3、绑定其他类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-v-model-%E7%BB%91%E5%AE%9A-textarea"><span class="toc-text">1.v-model 绑定 textarea</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-v-model-%E7%BB%91%E5%AE%9A-checkbox"><span class="toc-text">2.v-model 绑定 checkbox</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E9%80%89%E6%A1%86"><span class="toc-text">单选框</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E9%80%89%E6%A1%86"><span class="toc-text">多选框</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-v-model-%E7%BB%91%E5%AE%9A-radio"><span class="toc-text">3.v-model 绑定 radio</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-v-model-%E7%BB%91%E5%AE%9A-select"><span class="toc-text">4.v-model 绑定 select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-v-model-%E7%9A%84%E5%80%BC%E7%BB%91%E5%AE%9A"><span class="toc-text">5.v-model 的值绑定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-v-model-%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">4.v-model 修饰符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81lazy"><span class="toc-text">1、lazy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81number"><span class="toc-text">2、number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81trim"><span class="toc-text">3、trim</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%A4%9A%E4%B8%AA%E4%BF%AE%E9%A5%B0%E7%AC%A6%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">4、多个修饰符一起使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-text">5.组件化开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%A4%E8%AF%86%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-text">1、认识组件化开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E6%80%9D%E6%83%B3"><span class="toc-text">1.开发思想</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Vue-%E7%9A%84%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-text">2.Vue 的组件化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-text">2、注册组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-text">1.注册全局组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%90%8D%E7%A7%B0"><span class="toc-text">2.组件的名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B1%80%E9%83%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">3.局部组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Vue-%E7%9A%84%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="toc-text">3、Vue 的开发模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Vue-CLI-%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-text">4、Vue CLI 脚手架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-text">1.什么是脚手架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Vue-CLI-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-text">2.Vue CLI 安装和使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E5%A4%B9%E8%AF%B4%E6%98%8E"><span class="toc-text">3.项目文件夹说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Vue-CLI-%E7%9A%84%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-text">4.Vue CLI 的运行原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%A1%A5%E5%85%85"><span class="toc-text">5.补充</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81jsconfig-json"><span class="toc-text">1、jsconfig.json</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%BC%95%E5%85%A5Vue%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-text">2、引入Vue的版本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81style-%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">3、style 的作用域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81vite-%E5%88%9B%E5%BB%BA-vue-%E9%A1%B9%E7%9B%AE"><span class="toc-text">4、vite 创建 vue 项目</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%84%E4%BB%B6%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-text">6.组件间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B5%8C%E5%A5%97%E5%85%B3%E7%B3%BB"><span class="toc-text">1、组件的嵌套关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E6%8B%86%E5%88%86"><span class="toc-text">组件的拆分</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E5%AD%90%E7%BB%84%E4%BB%B6"><span class="toc-text">2、父组件传递子组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">1.父子组件之间通信的方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%88%B6%E4%BC%A0%E5%AD%90%E6%96%B9%E6%B3%95"><span class="toc-text">2.父传子方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81Props-%E7%9A%84%E6%95%B0%E7%BB%84%E7%94%A8%E6%B3%95"><span class="toc-text">1、Props 的数组用法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81Props-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%94%A8%E6%B3%95"><span class="toc-text">2、Props 的对象用法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81type-%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">3、type 的类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81Props%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-text">4、Props的大小写</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E9%9D%9Eprops%E7%9A%84attribute"><span class="toc-text">3、非props的attribute</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E7%88%B6%E7%BB%84%E4%BB%B6"><span class="toc-text">4、子组件传递父组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%A1%88%E4%BE%8B%E7%BB%83%E4%B9%A0"><span class="toc-text">5、案例练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%BB%84%E4%BB%B6%E6%8F%92%E6%A7%BD"><span class="toc-text">7.组件插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%A4%E8%AF%86%E6%8F%92%E6%A7%BDSlot%E4%BD%9C%E7%94%A8"><span class="toc-text">1、认识插槽Slot作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%8F%92%E6%A7%BDSlot%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2、插槽Slot基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BDSlot%E4%BD%BF%E7%94%A8"><span class="toc-text">3、具名插槽Slot使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BDSlot%E4%BD%BF%E7%94%A8"><span class="toc-text">4、作用域插槽Slot使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8F%92%E6%A7%BD%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">1.插槽作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8"><span class="toc-text">2.使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%8B%AC%E5%8D%A0%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD%E7%9A%84%E7%BC%A9%E5%86%99"><span class="toc-text">1、独占默认插槽的缩写</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD%E5%92%8C%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD%E6%B7%B7%E5%90%88%E4%BD%BF%E7%94%A8"><span class="toc-text">2、默认插槽和具名插槽混合使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E9%9D%9E%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-text">5、非父子组件的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5Provide-x2F-Inject"><span class="toc-text">1.依赖注入Provide&#x2F;Inject</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%BD%9C%E7%94%A8"><span class="toc-text">1、作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2、基本使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81Provide-%E5%92%8C-Inject-%E5%87%BD%E6%95%B0%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-text">3、Provide 和 Inject 函数的写法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E5%A4%84%E7%90%86%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-text">4、处理响应式数据</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF%E4%BD%BF%E7%94%A8"><span class="toc-text">2.全局事件总线使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E9%A2%9D%E5%A4%96%E7%9F%A5%E8%AF%86%E8%A1%A5%E5%85%85"><span class="toc-text">8.额外知识补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">1、生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-text">生命周期的流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81ref-%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0%E7%BB%84%E4%BB%B6"><span class="toc-text">2、ref 获取元素组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2%E7%BB%84%E4%BB%B6"><span class="toc-text">3、动态切换组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E6%93%8D%E4%BD%9C"><span class="toc-text">其它操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Keep-Alive-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">4、Keep-Alive 的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">缓存组件的生命周期</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">5、异步组件的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%89%80%E4%BB%A5%E9%BB%98%E8%AE%A4%E7%9A%84%E6%89%93%E5%8C%85%E8%BF%87%E7%A8%8B"><span class="toc-text">1.所以默认的打包过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%96%87%E4%BB%B6%E7%9A%84%E5%88%86%E5%8C%85"><span class="toc-text">2.文件的分包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6"><span class="toc-text">3.实现异步组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84-v-model"><span class="toc-text">6、组件的 v-model</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-1"><span class="toc-text">1.基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E5%B1%9E%E6%80%A7"><span class="toc-text">2.绑定多个属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E6%B7%B7%E5%85%A5"><span class="toc-text">7、组件的混入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86-Mixin"><span class="toc-text">1.认识 Mixin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2.基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%90%88%E5%B9%B6%E8%A7%84%E5%88%99"><span class="toc-text">3.合并规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%85%A8%E5%B1%80%E6%B7%B7%E5%85%A5-Mixin"><span class="toc-text">4.全局混入 Mixin</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Composition-API"><span class="toc-text">9.Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%A4%E8%AF%86-CompositionAPI"><span class="toc-text">1、认识 CompositionAPI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Options-API%E7%9A%84%E5%BC%8A%E7%AB%AF"><span class="toc-text">1.Options API的弊端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%AE%A4%E8%AF%86-Composition-API"><span class="toc-text">2.认识 Composition API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Setup-%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2、Setup 函数的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#setup-%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">setup 函数的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81setup-%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">1、setup 函数的参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81setup-%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">2、setup 函数的返回值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Setup-%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-text">3、Setup 中数据的响应式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Reactive-API"><span class="toc-text">1.Reactive API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Ref-API"><span class="toc-text">2.Ref API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Ref-%E8%87%AA%E5%8A%A8%E8%A7%A3%E5%8C%85"><span class="toc-text">3.Ref 自动解包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-reactive-%E5%92%8C-ref-%E7%9A%84%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93"><span class="toc-text">4.reactive 和 ref 的使用总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%A4%E8%AF%86-readonly"><span class="toc-text">5.认识 readonly</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81readonly-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">1、readonly 的使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81readonly-%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">2、readonly 的应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Reactive-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85"><span class="toc-text">4、Reactive 知识点补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Reactive-%E5%88%A4%E6%96%AD%E7%9A%84-API"><span class="toc-text">Reactive 判断的 API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81Ref-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85"><span class="toc-text">5、Ref 知识点补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-toRefs"><span class="toc-text">1.toRefs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-toRef"><span class="toc-text">2.toRef</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-ref-%E5%85%B6%E4%BB%96%E7%9A%84-API"><span class="toc-text">3.ref 其他的 API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81setup-%E4%B8%AD%E7%A6%81%E7%94%A8-this"><span class="toc-text">6、setup 中禁用 this</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Composition-API"><span class="toc-text">10.Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81computed"><span class="toc-text">1、computed</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#setup%E4%B8%AD%E4%BD%BF%E7%94%A8ref"><span class="toc-text">setup中使用ref</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">2、组件的生命周期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Provide-x2F-Inject-%E4%BD%BF%E7%94%A8"><span class="toc-text">3、Provide&#x2F;Inject 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Provide-%E5%87%BD%E6%95%B0"><span class="toc-text">1.Provide 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Inject%E5%87%BD%E6%95%B0"><span class="toc-text">2.Inject函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-text">3.数据响应式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81watch-x2F-watchEffect"><span class="toc-text">4、watch&#x2F;watchEffect</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Watch-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">1.Watch 的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-WatchEffect"><span class="toc-text">2.WatchEffect</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#watchEffect-%E7%9A%84%E5%81%9C%E6%AD%A2%E4%BE%A6%E5%90%AC"><span class="toc-text">watchEffect 的停止侦听</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89-Hook-%E7%BB%83%E4%B9%A0"><span class="toc-text">5、自定义 Hook 练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-useCounter-%E8%AE%A1%E6%95%B0"><span class="toc-text">1.useCounter 计数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-useTitle-%E5%88%87%E6%8D%A2title"><span class="toc-text">2.useTitle 切换title</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-useScrollPosition"><span class="toc-text">3.useScrollPosition</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81script-setup-%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-text">6、script setup 语法糖</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%A1%B6%E5%B1%82%E7%9A%84%E7%BB%91%E5%AE%9A%E4%BC%9A%E8%A2%AB%E6%9A%B4%E9%9C%B2%E7%BB%99%E6%A8%A1%E6%9D%BF"><span class="toc-text">1.顶层的绑定会被暴露给模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AF%BC%E5%85%A5%E7%9A%84%E7%BB%84%E4%BB%B6%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8"><span class="toc-text">2.导入的组件直接使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-defineProps-%E5%92%8C-defineEmits"><span class="toc-text">3.defineProps() 和 defineEmits()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-defineExpose"><span class="toc-text">4.defineExpose()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E6%A1%88%E4%BE%8B%E7%BB%83%E4%B9%A0"><span class="toc-text">7、案例练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">1.创建项目获取数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A4%B4%E9%83%A8%E7%9A%84%E5%B0%81%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-text">2.头部的封装与使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%97%E8%A1%A8%E7%9A%84%E5%B1%95%E7%A4%BA"><span class="toc-text">3.列表的展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B0%81%E8%A3%85"><span class="toc-text">4.组件的封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">5.组件中的数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%A8%A1%E6%8B%9F%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-text">6.模拟网络请求</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-Vue%E5%85%A8%E5%AE%B6%E6%A1%B6-Vue-Router"><span class="toc-text">11.Vue全家桶 - Vue-Router</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B"><span class="toc-text">1、前端路由的发展历程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%90%8E%E7%AB%AF%E8%B7%AF%E7%94%B1"><span class="toc-text">1.后端路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%98%B6%E6%AE%B5"><span class="toc-text">2.前后端分离阶段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1"><span class="toc-text">3.前端路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Vue-Router%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2、Vue-Router基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-URL-%E7%9A%84-hash"><span class="toc-text">1.URL 的 hash</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-HTML5-%E7%9A%84-History"><span class="toc-text">2.HTML5 的 History</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AE%A4%E8%AF%86-vue-router"><span class="toc-text">3.认识 vue-router</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">4.使用步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%B7%AF%E7%94%B1%E7%9A%84%E9%BB%98%E8%AE%A4%E8%B7%AF%E5%BE%84"><span class="toc-text">5.路由的默认路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-history-%E6%A8%A1%E5%BC%8F"><span class="toc-text">6.history 模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-router-link"><span class="toc-text">7.router-link</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD%E5%88%86%E5%8C%85%E5%A4%84%E7%90%86"><span class="toc-text">3、路由懒加载分包处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%92%8C%E8%B7%AF%E7%94%B1%E5%B5%8C%E5%A5%97"><span class="toc-text">4、动态路由和路由嵌套</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%B7%AF%E7%94%B1%E5%8A%A8%E6%80%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8C%B9%E9%85%8D"><span class="toc-text">1.路由动态的基本匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E5%80%BC"><span class="toc-text">2.获取动态路由的值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-NotFound"><span class="toc-text">3.NotFound</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%B7%AF%E7%94%B1%E7%9A%84%E5%B5%8C%E5%A5%97"><span class="toc-text">4.路由的嵌套</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-text">5、路由的编程式导航</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%A3%E7%A0%81%E7%9A%84%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-text">1.代码的页面跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-query-%E6%96%B9%E5%BC%8F%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">2.query 方式的参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9B%BF%E6%8D%A2%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE"><span class="toc-text">3.替换当前位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%89%8D%E8%BF%9B%E5%90%8E%E9%80%80"><span class="toc-text">4.页面的前进后退</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%8A%A8%E6%80%81%E7%AE%A1%E7%90%86%E8%B7%AF%E7%94%B1%E5%AF%B9%E8%B1%A1"><span class="toc-text">6、动态管理路由对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1"><span class="toc-text">1.动态添加路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1%E7%9A%84%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95"><span class="toc-text">2.动态添加路由的其他方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB%E9%92%A9%E5%AD%90"><span class="toc-text">7、路由导航守卫钩子</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-2"><span class="toc-text">1.基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%99%BB%E5%BD%95%E5%AE%88%E5%8D%AB%E5%8A%9F%E8%83%BD"><span class="toc-text">2.登录守卫功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%85%B6%E4%BB%96%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB"><span class="toc-text">3.其他导航守卫</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-Vue%E5%85%A8%E5%AE%B6%E6%A1%B6-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">12.Vue全家桶 - Vuex状态管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%A4%E8%AF%86%E5%BA%94%E7%94%A8%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">1、认识应用状态管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">1.什么是状态管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A4%8D%E6%9D%82%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">2.复杂的状态管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Vuex-%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">3.Vuex 的状态管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Vuex-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2、Vuex 的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA-store"><span class="toc-text">1.创建 store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-1"><span class="toc-text">2.基本使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-State"><span class="toc-text">3、核心概念 State</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8D%95%E4%B8%80%E7%8A%B6%E6%80%81%E6%A0%91"><span class="toc-text">1.单一状态树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E8%8E%B7%E5%8F%96%E7%8A%B6%E6%80%81"><span class="toc-text">2.组件获取状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%9C%A8-setup-%E4%B8%AD%E4%BD%BF%E7%94%A8-mapState"><span class="toc-text">3.在 setup 中使用 mapState</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Getters"><span class="toc-text">4、核心概念 Getters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-3"><span class="toc-text">1.基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-getters-%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-text">2.getters 第二个参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-getter-%E7%9A%84%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0"><span class="toc-text">3.getter 的返回函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-mapGetters-%E7%9A%84%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"><span class="toc-text">4.mapGetters 的辅助函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Mutations"><span class="toc-text">5、核心概念 Mutations</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-4"><span class="toc-text">1.基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%90%BA%E5%B8%A6%E6%95%B0%E6%8D%AE"><span class="toc-text">2.携带数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B8%B8%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.常量类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-mapMutation-%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"><span class="toc-text">4.mapMutation 辅助函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81options-api-%E4%B8%AD"><span class="toc-text">1、options api 中</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%9C%A8-setup-%E4%B8%AD"><span class="toc-text">2、在 setup() 中</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-mutation-%E9%87%8D%E8%A6%81%E5%8E%9F%E5%88%99"><span class="toc-text">5.mutation 重要原则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Actions"><span class="toc-text">6、核心概念 Actions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">1.基本操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-actions-%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"><span class="toc-text">2.actions 辅助函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-actions-%E5%8F%91%E8%B5%B7%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-text">3.actions 发起网络请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-actions-%E7%9A%84%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C"><span class="toc-text">4.actions 的异步操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Modules"><span class="toc-text">7、核心概念 Modules</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-module-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">1.module 的基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-module-%E7%9A%84%E5%B1%80%E9%83%A8%E7%8A%B6%E6%80%81"><span class="toc-text">2.module 的局部状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-module-%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-text">3.module 的命名空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-module-%E4%BF%AE%E6%94%B9%E6%88%96%E6%B4%BE%E5%8F%91%E6%A0%B9%E7%BB%84%E4%BB%B6"><span class="toc-text">4.module 修改或派发根组件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-Vue%E5%85%A8%E5%AE%B6%E6%A1%B6-Pinia%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">13.Vue全家桶 - Pinia状态管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Pinia-%E5%92%8C-Vuex-%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-text">1、Pinia 和 Vuex 的对比</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-Pinia"><span class="toc-text">1.什么是 Pinia</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Pinia-%E5%92%8C-Vuex-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">2.Pinia 和 Vuex 的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA-Pinia-%E7%9A%84-Store"><span class="toc-text">2、创建 Pinia 的 Store</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86-store"><span class="toc-text">1.认识 store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-2"><span class="toc-text">2.基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AF%A6%E7%BB%86%E4%BD%BF%E7%94%A8"><span class="toc-text">3.详细使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Pinia-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-State"><span class="toc-text">3、Pinia 核心概念 State</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C-State"><span class="toc-text">操作 State</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Pinia-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Getters"><span class="toc-text">4、Pinia 核心概念 Getters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81Pinia-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Actions"><span class="toc-text">5、Pinia 核心概念 Actions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BA%93-axios%E5%BA%93"><span class="toc-text">14.网络请求库 - axios库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%A4%E8%AF%86-Axios-%E5%BA%93"><span class="toc-text">1、认识 Axios 库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81axios-%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-text">2、axios 发送请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="toc-text">请求方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE"><span class="toc-text">常见配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%9D%E5%A4%96%E8%A1%A5%E5%85%85"><span class="toc-text">额外补充</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81axios-%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B"><span class="toc-text">3、axios 创建实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81axios-%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">4、axios 的拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81axios-%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85"><span class="toc-text">5、axios 请求封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98"><span class="toc-text">15.项目实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%88%9D%E5%A7%8B%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A4"><span class="toc-text">1、初始项目步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="toc-text">2、创建路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81tab-%E6%90%AD%E5%BB%BA"><span class="toc-text">3、tab 搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Home-%E4%B8%BB%E9%A1%B5"><span class="toc-text">4、Home 主页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81detail-%E9%A1%B5%E9%9D%A2"><span class="toc-text">5、detail 页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%85%B6%E4%BB%96"><span class="toc-text">6、其他</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%BB%E9%A1%B5%E5%8F%91%E8%B5%B7%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E9%98%BB%E6%AD%A2"><span class="toc-text">1.主页发起网络请求阻止</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%B7%B3%E8%BD%AC%E5%9B%9Ehome%E9%A1%B5%E9%9D%A2%E4%BF%9D%E6%8C%81scrollTop"><span class="toc-text">2.跳转回home页面保持scrollTop</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%A7%86%E5%8F%A3%E4%B8%8Evw%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2"><span class="toc-text">3.移动端视口与vw单位转换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95"><span class="toc-text">16.高级语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Vue-%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-text">1、Vue 中自定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%86%E8%A7%A3%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-text">1.了解自定义指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-3"><span class="toc-text">2.基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">3.自定义指令的生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%8C%87%E4%BB%A4%E7%9A%84%E5%8F%82%E6%95%B0%E5%92%8C%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">4.指令的参数和修饰符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Vue-%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6-Teleport"><span class="toc-text">2、Vue 内置组件 Teleport</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Vue-%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6-Suspense"><span class="toc-text">3、Vue 内置组件 Suspense</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Vue-%E4%B8%AD%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">4、Vue 中安装插件的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81Vue-%E4%B8%AD%E6%B8%B2%E6%9F%93%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">5、Vue 中渲染函数的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#h-%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">h 函数的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%9C%A8-optionsApi-%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-text">1.在 optionsApi 中使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%9C%A8-setup-%E5%87%BD%E6%95%B0%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-text">2.在 setup 函数中使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%9C%A8-setup-%E8%AF%AD%E6%B3%95%E7%B3%96%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-text">3.在 setup 语法糖中使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81Vue-%E4%B8%AD%E7%BC%96%E5%86%99-jsx-%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-text">6、Vue 中编写 jsx 的语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9C%A8-optionsApi-%E4%B8%AD%E4%BD%BF%E7%94%A8-1"><span class="toc-text">1.在 optionsApi 中使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9C%A8-setup-%E5%87%BD%E6%95%B0%E4%B8%AD%E4%BD%BF%E7%94%A8-1"><span class="toc-text">2.在 setup 函数中使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%9C%A8-setup-%E8%AF%AD%E6%B3%95%E7%B3%96%E4%B8%AD%E4%BD%BF%E7%94%A8-1"><span class="toc-text">3.在 setup 语法糖中使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-Vue3%E5%AE%9E%E7%8E%B0%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB"><span class="toc-text">17.Vue3实现过渡动画</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%A4%E8%AF%86-Vue-%E7%9A%84%E5%8A%A8%E7%94%BB%E5%8E%9F%E7%90%86"><span class="toc-text">1、认识 Vue 的动画原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%8A%A8%E7%94%BB%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%B1%BB%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">2、动画中常见类的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81animation-%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0"><span class="toc-text">3、animation 动画实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%8A%A8%E7%94%BB%E7%9A%84%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="toc-text">4、动画的常见属性设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%B8%A1%E5%92%8C%E5%8A%A8%E7%94%BB%EF%BC%88%E4%B8%80%E8%88%AC%E4%B8%8D%E8%AE%BE%E7%BD%AE%EF%BC%89"><span class="toc-text">1.同时设置过渡和动画（一般不设置）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%98%BE%E5%BC%8F%E7%9A%84%E6%8C%87%E5%AE%9A%E5%8A%A8%E7%94%BB%E6%97%B6%E9%97%B4"><span class="toc-text">2.显式的指定动画时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%BF%87%E6%B8%A1%E7%9A%84%E6%A8%A1%E5%BC%8Fmode"><span class="toc-text">3.过渡的模式mode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E5%88%87%E6%8D%A2"><span class="toc-text">4.动态组件的切换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#appear%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93"><span class="toc-text">appear初次渲染</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%88%97%E8%A1%A8%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB%E7%BB%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">5、列表元素动画组实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%88%97%E8%A1%A8%E5%85%83%E7%B4%A0%E7%9A%84%E7%A7%BB%E5%8A%A8%E5%8A%A8%E7%94%BB"><span class="toc-text">6、列表元素的移动动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-Vue2-Vue3-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-text">18.Vue2-Vue3 响应式原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="toc-text">19.项目打包和自动化部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%92%8CDevOps"><span class="toc-text">1、项目部署和DevOps</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BC%A0%E7%BB%9F%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="toc-text">1.传统开发模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-DevOps-%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="toc-text">2.DevOps 开发模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98"><span class="toc-text">3.持续集成和持续交付</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B"><span class="toc-text">4.自动化部署流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%B4%AD%E4%B9%B0%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">2、购买云服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E5%86%8C%E9%98%BF%E9%87%8C%E4%BA%91%E8%B4%A6%E5%8F%B7"><span class="toc-text">1.注册阿里云账号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%B4%AD%E4%B9%B0%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">2.购买云服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83"><span class="toc-text">3、搭建服务器环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="toc-text">1.jenkins自动化部署</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-nginx%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE"><span class="toc-text">2.nginx安装和配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%AE%89%E8%A3%85nginx"><span class="toc-text">1、安装nginx</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AEnginx"><span class="toc-text">2、配置nginx</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/archives/5205ee75.html" title="面试题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试题"/></a><div class="content"><a class="title" href="/archives/5205ee75.html" title="面试题">面试题</a><time datetime="2023-05-09T16:00:00.000Z" title="发表于 2023-05-10 00:00:00">2023-05-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/ef9ebb65.html" title="小程序开发实战"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="小程序开发实战"/></a><div class="content"><a class="title" href="/archives/ef9ebb65.html" title="小程序开发实战">小程序开发实战</a><time datetime="2023-01-31T16:00:00.000Z" title="发表于 2023-02-01 00:00:00">2023-02-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/f8e09374.html" title="Vue"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue"/></a><div class="content"><a class="title" href="/archives/f8e09374.html" title="Vue">Vue</a><time datetime="2022-12-09T16:00:00.000Z" title="发表于 2022-12-10 00:00:00">2022-12-10</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://w.wallhaven.cc/full/2y/wallhaven-2yz3m9.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By awzz-coder</div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><div class="aplayer no-destroy" data-id="7487493788" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>